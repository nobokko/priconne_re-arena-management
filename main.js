(()=>{var t={51:(t,n,e)=>{"use strict";e.d(n,{Z:()=>i});const i='<dialog id="heroines_possession_status_dialog"> <style>#heroines_possession_status_dialog [name=heroines] [name=row],#heroines_possession_status_dialog header{display:grid;grid-template-columns:40px 216px 110px 64px 64px 64px 6rem}#heroines_possession_status_dialog header{position:sticky;top:0}#heroines_possession_status_dialog form{position:sticky;bottom:0}#heroines_possession_status_dialog label[name=name]{width:216px}#heroines_possession_status_dialog [data-level],#heroines_possession_status_dialog [data-rank],#heroines_possession_status_dialog [data-special_weapon_level]{width:56px}</style> <header> <div>所持</div> <div>名前</div> <div>星</div> <div>レベル</div> <div>ランク</div> <div>専用装備</div> <div>更新日</div> </header> <template id="template_heroine_row" name="template_heroine_row"> </template> <div name="heroines"></div> <form method="dialog"> <button value="ok">ok</button> <button value="cancel">cancel</button> </form> </dialog> '},485:(t,n,e)=>{"use strict";e.d(n,{Z:()=>i});const i='<div name="row" data-id="" data-heroine_id=""> <div name="has_this"><input type="checkbox" id="heroines_possession_status_dialog_heroine_row_"></div> <label name="name" for="heroines_possession_status_dialog_heroine_row_">name</label> <div name="star"><select data-star="5" value="5"> <option value="1">★☆☆☆☆</option> <option value="2">★★☆☆☆</option> <option value="3">★★★☆☆</option> <option value="4">★★★★☆</option> <option value="5" selected="selected">★★★★★</option> <option value="6">★★★★★★</option> </select></div> <div name="level"><input data-level="190" type="text" value="190"></div> <div name="rank"><input data-rank="20" type="text" value="20"></div> <div name="special_weapon_level"><input data-special_weapon_level="190" type="text" value="190"></div> <div name="last_modified_date">----/--/--</div> </div> '},758:(t,n,e)=>{"use strict";e.d(n,{Z:()=>i});const i='<dialog id="search_dialog"> <style>#heroine{display:flex;flex-wrap:wrap}#heroine>div{width:calc(1em * 5)}</style> <form method="dialog"> <div id="heroine" name="heroine"></div> <button value="ok">ok</button> <button value="cancel">cancel</button> </form> </dialog> '},215:(t,n,e)=>{"use strict";e.d(n,{Z:()=>i});const i='<style>#history{position:sticky;bottom:0}</style> <div id="history" name="history"> <fieldset> <legend>search condition history</legend> <ol></ol> </fieldset> </div>'},983:(t,n,e)=>{"use strict";e.d(n,{Z:()=>i});const i='<style>#matchs>div{display:grid;grid-template-columns:1fr 1fr 1fr 1fr .5fr 1fr 1fr 1fr 1fr}#matchs>div [name=winner_party]{grid-column:1/5}#matchs>div [name=loser_party]{grid-column:6/10}#matchs>div [name=match_info]{text-align:right;grid-column:1/10}#matchs>div [name=loser_party],#matchs>div [name=winner_party]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr}</style> <div id="matchs" name="matchs"> </div>'},442:(t,n,e)=>{"use strict";e.d(n,{Z:()=>i});const i='<div name="winner_party"> <span name="h4"></span> <span name="h3"></span> <span name="h2"></span> <span name="h1"></span> <span name="h0"></span> </div> <div name="loser_party"> <span name="h4"></span> <span name="h3"></span> <span name="h2"></span> <span name="h1"></span> <span name="h0"></span> </div> <div name="match_info"> <span name="match_remark">match_remark</span> <span name="created_date">created_date</span> </div> '},377:(t,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>i});const i='<dialog id="register_dialog"> <style>#register_dialog fieldset{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr}div[data-party_member_id]{grid-row:2/3}div[data-party_member_id]{display:grid;grid-template-columns:1fr}div[data-party_member_id] input[type=text]{width:100%}</style> <fieldset> <button value="" data-match="winner" data-party_member_id="1">（未設定）</button> <div data-party_member_id="1"> <label>星</label><select name="star" value="5"> <option value="1">★☆☆☆☆</option> <option value="2">★★☆☆☆</option> <option value="3">★★★☆☆</option> <option value="4">★★★★☆</option> <option value="5" selected="selected">★★★★★</option> <option value="6">★★★★★★</option> </select> <label>Lv</label><input type="text" name="level"> <label>Rank</label><input type="text" name="rank"> <label>専用装備Lv</label><input type="text" name="special_weapon_level"> </div> <button value="" data-match="winner" data-party_member_id="2">（未設定）</button> <div data-party_member_id="2"> <label>星</label><select name="star" value="5"> <option value="1">★☆☆☆☆</option> <option value="2">★★☆☆☆</option> <option value="3">★★★☆☆</option> <option value="4">★★★★☆</option> <option value="5" selected="selected">★★★★★</option> <option value="6">★★★★★★</option> </select> <label>Lv</label><input type="text" name="level"> <label>Rank</label><input type="text" name="rank"> <label>専用装備Lv</label><input type="text" name="special_weapon_level"> </div> <button value="" data-match="winner" data-party_member_id="3">（未設定）</button> <div data-party_member_id="3"> <label>星</label><select name="star" value="5"> <option value="1">★☆☆☆☆</option> <option value="2">★★☆☆☆</option> <option value="3">★★★☆☆</option> <option value="4">★★★★☆</option> <option value="5" selected="selected">★★★★★</option> <option value="6">★★★★★★</option> </select> <label>Lv</label><input type="text" name="level"> <label>Rank</label><input type="text" name="rank"> <label>専用装備Lv</label><input type="text" name="special_weapon_level"> </div> <button value="" data-match="winner" data-party_member_id="4">（未設定）</button> <div data-party_member_id="4"> <label>星</label><select name="star" value="5"> <option value="1">★☆☆☆☆</option> <option value="2">★★☆☆☆</option> <option value="3">★★★☆☆</option> <option value="4">★★★★☆</option> <option value="5" selected="selected">★★★★★</option> <option value="6">★★★★★★</option> </select> <label>Lv</label><input type="text" name="level"> <label>Rank</label><input type="text" name="rank"> <label>専用装備Lv</label><input type="text" name="special_weapon_level"> </div> <button value="" data-match="winner" data-party_member_id="5">（未設定）</button> <div data-party_member_id="5"> <label>星</label><select name="star" value="5"> <option value="1">★☆☆☆☆</option> <option value="2">★★☆☆☆</option> <option value="3">★★★☆☆</option> <option value="4">★★★★☆</option> <option value="5" selected="selected">★★★★★</option> <option value="6">★★★★★★</option> </select> <label>Lv</label><input type="text" name="level"> <label>Rank</label><input type="text" name="rank"> <label>専用装備Lv</label><input type="text" name="special_weapon_level"> </div> <button value="" data-match="loser" data-party_member_id="1">（未設定）</button> <button value="" data-match="loser" data-party_member_id="2">（未設定）</button> <button value="" data-match="loser" data-party_member_id="3">（未設定）</button> <button value="" data-match="loser" data-party_member_id="4">（未設定）</button> <button value="" data-match="loser" data-party_member_id="5">（未設定）</button> <input type="text" name="match_remark"> </fieldset> <form method="dialog"> <button value="ok">ok</button> <button value="cancel">cancel</button> </form> <dialog id="heroine_select_dialog"> <style>dialog#heroine_select_dialog>form{width:75vw;display:grid;grid-template-columns:repeat(auto-fit,100px)}dialog#heroine_select_dialog>form [data-deleted=true]{color:gray}</style> <form method="dialog"></form> </dialog> </dialog> '},197:(t,n,e)=>{t=e.nmd(t),self.window||(window=self),function(){"use strict";function n(t){return function(n){this[t]=n}}function e(t){return function(){return this[t]}}function i(t){return function(){return t}}var r,o=this;function a(t){return void 0!==t}function u(){}function s(t){var n=typeof t;if("object"==n){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return n;var e=Object.prototype.toString.call(t);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==n&&void 0===t.call)return"object";return n}function c(t){return null!=t}function h(t){var n=s(t);return"array"==n||"object"==n&&"number"==typeof t.length}function l(t){return"string"==typeof t}function f(t){return"function"==s(t)}function p(t){return t[d]||(t[d]=++y)}var d="closure_uid_"+(1e9*Math.random()>>>0),y=0;function v(t,n,e){return t.call.apply(t.bind,arguments)}function b(t,n,e){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,i),t.apply(n,e)}}return function(){return t.apply(n,arguments)}}function m(t,n,e){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:b).apply(null,arguments)}function g(t,n){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function w(t,n){t=t.split(".");var e,i=o;t[0]in i||!i.execScript||i.execScript("var "+t[0]);for(;t.length&&(e=t.shift());)!t.length&&a(n)?i[e]=n:i=i[e]&&Object.prototype.hasOwnProperty.call(i,e)?i[e]:i[e]={}}function _(t,n){function e(){}e.prototype=n.prototype,t.hb=n.prototype,t.prototype=new e,t.prototype.constructor=t,t.Vg=function(t,e,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return n.prototype[e].apply(t,r)}}function E(t){if(Error.captureStackTrace)Error.captureStackTrace(this,E);else{var n=Error().stack;n&&(this.stack=n)}t&&(this.message=String(t))}_(E,Error),E.prototype.name="CustomError";var S=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function T(t,n){var e=0;t=S(String(t)).split("."),n=S(String(n)).split(".");for(var i=Math.max(t.length,n.length),r=0;0==e&&r<i;r++){var o=t[r]||"",a=n[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=N(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||N(0==o[2].length,0==a[2].length)||N(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return e}function N(t,n){return t<n?-1:t>n?1:0}function A(t,n,e){this.pg=e,this.Of=t,this.Kg=n,this.qd=0,this.fd=null}A.prototype.get=function(){var t;return 0<this.qd?(this.qd--,t=this.fd,this.fd=t.next,t.next=null):t=this.Of(),t},A.prototype.put=function(t){this.Kg(t),this.qd<this.pg&&(this.qd++,t.next=this.fd,this.fd=t)};var q,x,C=Array.prototype.indexOf?function(t,n,e){return Array.prototype.indexOf.call(t,n,e)}:function(t,n,e){if(e=null==e?0:0>e?Math.max(0,t.length+e):e,l(t))return l(n)&&1==n.length?t.indexOf(n,e):-1;for(;e<t.length;e++)if(e in t&&t[e]===n)return e;return-1},k=Array.prototype.forEach?function(t,n,e){Array.prototype.forEach.call(t,n,e)}:function(t,n,e){for(var i=t.length,r=l(t)?t.split(""):t,o=0;o<i;o++)o in r&&n.call(e,r[o],o,t)},I=Array.prototype.map?function(t,n,e){return Array.prototype.map.call(t,n,e)}:function(t,n,e){for(var i=t.length,r=Array(i),o=l(t)?t.split(""):t,a=0;a<i;a++)a in o&&(r[a]=n.call(e,o[a],a,t));return r},O=Array.prototype.reduce?function(t,n,e,i){return i&&(n=m(n,i)),Array.prototype.reduce.call(t,n,e)}:function(t,n,e,i){var r=e;return k(t,(function(e,o){r=n.call(i,r,e,o,t)})),r},j=Array.prototype.some?function(t,n,e){return Array.prototype.some.call(t,n,e)}:function(t,n,e){for(var i=t.length,r=l(t)?t.split(""):t,o=0;o<i;o++)if(o in r&&n.call(e,r[o],o,t))return!0;return!1};function M(t,n,e){return 2>=arguments.length?Array.prototype.slice.call(t,n):Array.prototype.slice.call(t,n,e)}function R(t){for(var n=[],e=0;e<t;e++)n[e]=0;return n}function D(t){for(var n=[],e=0;e<arguments.length;e++){var i=arguments[e];if("array"==s(i))for(var r=0;r<i.length;r+=8192)for(var o=D.apply(null,M(i,r,r+8192)),a=0;a<o.length;a++)n.push(o[a]);else n.push(i)}return n}function L(t){var n,e=[],i=0;for(n in t)e[i++]=t[n];return e}t:{var B=o.navigator;if(B){var P=B.userAgent;if(P){q=P;break t}}q=""}function G(t){return-1!=q.indexOf(t)}function F(){return G("Safari")&&!(U()||G("Coast")||G("Opera")||G("Edge")||G("Silk")||G("Android"))}function U(){return(G("Chrome")||G("CriOS"))&&!G("Edge")}function z(t){o.setTimeout((function(){throw t}),0)}function H(){this.Bd=this.oc=null}var J,K=new A((function(){return new V}),(function(t){t.reset()}),100);function V(){this.next=this.scope=this.Td=null}function W(t,n){J||function(){if(-1!=String(o.Promise).indexOf("[native code]")){var t=o.Promise.resolve(void 0);J=function(){t.then(X)}}else J=function(){var t=X;!f(o.setImmediate)||o.Window&&o.Window.prototype&&!G("Edge")&&o.Window.prototype.setImmediate==o.setImmediate?(x||(x=function(){var t=o.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!G("Presto")&&(t=function(){(i=document.createElement("IFRAME")).style.display="none",i.src="",document.documentElement.appendChild(i);var t=i.contentWindow;(i=t.document).open(),i.write(""),i.close();var n="callImmediate"+Math.random(),e="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host,i=m((function(t){"*"!=e&&t.origin!=e||t.data!=n||this.port1.onmessage()}),this);t.addEventListener("message",i,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,e)}}}),void 0!==t&&!G("Trident")&&!G("MSIE")){var n=new t,e={},i=e;return n.port1.onmessage=function(){if(a(e.next)){var t=(e=e.next).Fe;e.Fe=null,t()}},function(t){i.next={Fe:t},i=i.next,n.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var n=document.createElement("SCRIPT");n.onreadystatechange=function(){n.onreadystatechange=null,n.parentNode.removeChild(n),n=null,t(),t=null},document.documentElement.appendChild(n)}:function(t){o.setTimeout(t,0)}}()),x(t)):o.setImmediate(t)}}(),$||(J(),$=!0),Z.add(t,n)}H.prototype.add=function(t,n){var e=K.get();e.set(t,n),this.Bd?this.Bd.next=e:this.oc=e,this.Bd=e},H.prototype.remove=function(){var t=null;return this.oc&&(t=this.oc,this.oc=this.oc.next,this.oc||(this.Bd=null),t.next=null),t},V.prototype.set=function(t,n){this.Td=t,this.scope=n,this.next=null},V.prototype.reset=function(){this.next=this.scope=this.Td=null};var $=!1,Z=new H;function X(){for(var t;t=Z.remove();){try{t.Td.call(t.scope)}catch(t){z(t)}K.put(t)}$=!1}function Y(t,n){if(this.Ta=0,this.nf=void 0,this.Vc=this.dc=this.D=null,this.ed=this.Rd=!1,t!=u)try{var e=this;t.call(n,(function(t){ct(e,2,t)}),(function(t){ct(e,3,t)}))}catch(t){ct(this,3,t)}}function Q(){this.next=this.context=this.ic=this.Ic=this.child=null,this.Ed=!1}Q.prototype.reset=function(){this.context=this.ic=this.Ic=this.child=null,this.Ed=!1};var tt=new A((function(){return new Q}),(function(t){t.reset()}),100);function nt(t,n,e){var i=tt.get();return i.Ic=t,i.ic=n,i.context=e,i}function et(t){if(t instanceof Y)return t;var n=new Y(u);return ct(n,2,t),n}function it(t){return new Y((function(n,e){e(t)}))}function rt(t,n,e){ht(t,n,e,null)||W(g(n,t))}function ot(t){return new Y((function(n,e){var i=t.length,r=[];if(i)for(var o=function(t,e){i--,r[t]=e,0==i&&n(r)},a=function(t){e(t)},u=0;u<t.length;u++)rt(t[u],g(o,u),a);else n(r)}))}function at(){var t,n;return new vt(new Y((function(e,i){t=e,n=i})),t,n)}function ut(t,n){t.dc||2!=t.Ta&&3!=t.Ta||lt(t),t.Vc?t.Vc.next=n:t.dc=n,t.Vc=n}function st(t,n,e,i){var r=nt(null,null,null);return r.child=new Y((function(t,o){r.Ic=n?function(e){try{var r=n.call(i,e);t(r)}catch(t){o(t)}}:t,r.ic=e?function(n){try{var r=e.call(i,n);!a(r)&&n instanceof yt?o(n):t(r)}catch(t){o(t)}}:o})),r.child.D=t,ut(t,r),r.child}function ct(t,n,e){0==t.Ta&&(t===e&&(n=3,e=new TypeError("Promise cannot resolve to itself")),t.Ta=1,ht(e,t.Qg,t.Rg,t)||(t.nf=e,t.Ta=n,t.D=null,lt(t),3!=n||e instanceof yt||function(t,n){t.ed=!0,W((function(){t.ed&&dt.call(null,n)}))}(t,e)))}function ht(t,n,e,i){if(t instanceof Y)return ut(t,nt(n||u,e||null,i)),!0;var r;if(t)try{r=!!t.$goog_Thenable}catch(t){r=!1}else r=!1;if(r)return t.then(n,e,i),!0;if("object"==(r=typeof t)&&null!=t||"function"==r)try{var o=t.then;if(f(o))return function(t,n,e,i,r){function o(t){a||(a=!0,i.call(r,t))}var a=!1;try{n.call(t,(function(t){a||(a=!0,e.call(r,t))}),o)}catch(t){o(t)}}(t,o,n,e,i),!0}catch(t){return e.call(i,t),!0}return!1}function lt(t){t.Rd||(t.Rd=!0,W(t.Vf,t))}function ft(t){var n=null;return t.dc&&(n=t.dc,t.dc=n.next,n.next=null),t.dc||(t.Vc=null),n}function pt(t,n,e){2==n?t.Ic.call(t.context,e):t.ic&&t.ic.call(t.context,e)}Y.prototype.then=function(t,n,e){return st(this,f(t)?t:null,f(n)?n:null,e)},Y.prototype.then=Y.prototype.then,Y.prototype.$goog_Thenable=!0,Y.prototype.ve=function(t,n){return st(this,null,t,n)},Y.prototype.Qg=function(t){this.Ta=0,ct(this,2,t)},Y.prototype.Rg=function(t){this.Ta=0,ct(this,3,t)},Y.prototype.Vf=function(){for(var t;t=ft(this);){var n,e=this.Ta,i=this.nf;if(3==e&&t.ic&&!t.Ed)for(n=this;n&&n.ed;n=n.D)n.ed=!1;if(t.child)t.child.D=null,pt(t,e,i);else try{t.Ed?t.Ic.call(t.context):pt(t,e,i)}catch(t){dt.call(null,t)}tt.put(t)}this.Rd=!1};var dt=z;function yt(t){E.call(this,t)}function vt(t,n,e){this.ha=t,this.resolve=n,this.reject=e}function bt(t,n,e,i){e=e||function(t,n){return t==n},i=i||function(n){return t[n]};for(var r=t.length,o=n.length,a=[],u=0;u<r+1;u++)a[u]=[],a[u][0]=0;for(var s=0;s<o+1;s++)a[0][s]=0;for(u=1;u<=r;u++)for(s=1;s<=o;s++)e(t[u-1],n[s-1])?a[u][s]=a[u-1][s-1]+1:a[u][s]=Math.max(a[u-1][s],a[u][s-1]);var c=[];for(u=r,s=o;0<u&&0<s;)e(t[u-1],n[s-1])?(c.unshift(i(u-1,s-1)),u--,s--):a[u-1][s]>a[u][s-1]?u--:s--;return c}function mt(t){return O(arguments,(function(t,n){return t+n}),0)}function gt(t){return mt.apply(null,arguments)/arguments.length}function wt(t){var n=arguments.length;if(2>n)return 0;var e=gt.apply(null,arguments);return mt.apply(null,I(arguments,(function(t){return Math.pow(t-e,2)})))/(n-1)}function _t(t){return Math.sqrt(wt.apply(null,arguments))}_(yt,E),yt.prototype.name="cancel";var Et="StopIteration"in o?o.StopIteration:{message:"StopIteration",stack:""};function St(){}function Tt(t){if(j(arguments,(function(t){return!t.length}))||!arguments.length)return new St;var n=new St,e=arguments,i=R(e.length);return n.next=function(){if(i){for(var t=I(i,(function(t,n){return e[n][t]})),n=i.length-1;0<=n;n--){if(i[n]<e[n].length-1){i[n]++;break}if(0==n){i=null;break}i[n]=0}return t}throw Et},n}function Nt(t,n){this.l={},this.a=[],this.Ua=this.Eb=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else t&&this.addAll(t)}function At(t){return qt(t),t.a.concat()}function qt(t){if(t.Eb!=t.a.length){for(var n=0,e=0;n<t.a.length;){var i=t.a[n];xt(t.l,i)&&(t.a[e++]=i),n++}t.a.length=e}if(t.Eb!=t.a.length){var r={};for(e=n=0;n<t.a.length;)xt(r,i=t.a[n])||(t.a[e++]=i,r[i]=1),n++;t.a.length=e}}function xt(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function Ct(){return G("iPhone")&&!G("iPod")&&!G("iPad")}St.prototype.next=function(){throw Et},St.prototype.pc=function(){return this},(r=Nt.prototype).zc=e("Eb"),r.qa=function(){qt(this);for(var t=[],n=0;n<this.a.length;n++)t.push(this.l[this.a[n]]);return t},r.Pa=function(t){return xt(this.l,t)},r.jd=function(){return 0==this.Eb},r.clear=function(){this.l={},this.Ua=this.Eb=this.a.length=0},r.remove=function(t){return!!xt(this.l,t)&&(delete this.l[t],this.Eb--,this.Ua++,this.a.length>2*this.Eb&&qt(this),!0)},r.get=function(t,n){return xt(this.l,t)?this.l[t]:n},r.set=function(t,n){xt(this.l,t)||(this.Eb++,this.a.push(t),this.Ua++),this.l[t]=n},r.addAll=function(t){var n;if(t instanceof Nt)n=At(t),t=t.qa();else{n=[];var e,i=0;for(e in t)n[i++]=e;t=L(t)}for(i=0;i<n.length;i++)this.set(n[i],t[i])},r.forEach=function(t,n){for(var e=At(this),i=0;i<e.length;i++){var r=e[i],o=this.get(r);t.call(n,o,r,this)}},r.clone=function(){return new Nt(this)},r.pc=function(t){qt(this);var n=0,e=this.Ua,i=this,r=new St;return r.next=function(){if(e!=i.Ua)throw Error("The map has changed since the iterator was created");if(n>=i.a.length)throw Et;var r=i.a[n++];return t?r:i.l[r]},r};var kt,It,Ot=G("Opera"),jt=G("Trident")||G("MSIE"),Mt=G("Edge"),Rt=G("Gecko")&&!(-1!=q.toLowerCase().indexOf("webkit")&&!G("Edge"))&&!(G("Trident")||G("MSIE"))&&!G("Edge"),Dt=-1!=q.toLowerCase().indexOf("webkit")&&!G("Edge"),Lt=G("Macintosh"),Bt=G("Windows"),Pt=G("Android"),Gt=Ct(),Ft=G("iPad"),Ut=G("iPod");t:{var zt="",Ht=(It=q,Rt?/rv\:([^\);]+)(\)|;)/.exec(It):Mt?/Edge\/([\d\.]+)/.exec(It):jt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(It):Dt?/WebKit\/(\S+)/.exec(It):Ot?/(?:Version)[ \/]?(\S+)/.exec(It):void 0);if(Ht&&(zt=Ht?Ht[1]:""),jt){var Jt,Kt=o.document;if(null!=(Jt=Kt?Kt.documentMode:void 0)&&Jt>parseFloat(zt)){kt=String(Jt);break t}}kt=zt}var Vt=kt,Wt={};function $t(t){return function(t,n){var e=Wt;return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n()}(t,(function(){return 0<=T(Vt,t)}))}var Zt,Xt=function(){var t;return Bt?(t=(t=/Windows NT ([0-9.]+)/).exec(q))?t[1]:"0":Lt?(t=(t=/10[_.][0-9_.]+/).exec(q))?t[0].replace(/_/g,"."):"10":Pt?(t=(t=/Android\s+([^\);]+)(\)|;)/).exec(q))?t[1]:"":(Gt||Ft||Ut)&&(t=(t=/(?:iPhone|CPU)\s+OS\s+(\S+)/).exec(q))?t[1].replace(/_/g,"."):""}(),Yt=Ct()||G("iPod"),Qt=G("iPad");function tn(){var t;!(t=F()&&!$t(10))&&(t=Qt||Yt)&&(t=!(0<=T(Xt,10))),this.ae=t,this.fg=!(this.ae||jt&&!$t(10)),!jt||$t(11),this.Ug=U()||F(),this.ug=a(window.Map)&&a(window.Map.prototype.values)&&a(window.Map.prototype.forEach)&&!this.ae,this.vg=a(window.Set)&&a(window.Set.prototype.values)&&a(window.Set.prototype.forEach)&&!this.ae}function nn(){return a(Zt)||(Zt=new tn),Zt}function en(){this.l=new Nt,Object.defineProperty(this,"size",{get:function(){return this.l.zc()}})}en.prototype.clear=function(){this.l.clear()},en.prototype.clear=en.prototype.clear,en.prototype.delete=function(t){return this.l.remove(t)},en.prototype.delete=en.prototype.delete,en.prototype.forEach=function(t,n){return this.l.forEach(t,n)},en.prototype.forEach=en.prototype.forEach,en.prototype.get=function(t){return this.l.get(t)},en.prototype.get=en.prototype.get,en.prototype.has=function(t){return this.l.Pa(t)},en.prototype.has=en.prototype.has,en.prototype.set=function(t,n){return this.l.set(t,n)},en.prototype.set=en.prototype.set;var rn=nn().ug;function on(){return rn?new window.Map:new en}function an(t){if(t instanceof en)return At(t.l);var n=0,e=Array(t.size);return t.forEach((function(t,i){e[n++]=i})),e}function un(t){if(t instanceof en)return t.l.qa();var n=0,e=Array(t.size);return t.forEach((function(t){e[n++]=t})),e}function sn(t,n){this.sa=t,this.m=n||this.Ke()}var cn=0;function hn(t){return new sn(t.id,t.value)}function ln(t){return new sn(cn++,t||{})}function fn(t){if(null==t)return null;t=new Uint8Array(t);for(var n="",e=0;e<t.length;++e){var i=t[e].toString(16);n+=2>i.length?"0"+i:i}return n}(r=sn.prototype).id=e("sa"),r.Ke=function(){return{}},r.wf=e("m"),r.Ja=function(){return{id:this.sa,value:this.wf()}},r.nb=function(t){return"#"==t.substr(-1)?this.sa:null};var pn={};function dn(t,n,e,i,r){this.wd=t,this.jg=n,this.Tg=e,this.Qf=i,this.Jf=r}function yn(t,n){this.yd=t,this.Ra=n||null,this.S=at(),this.wd=!1,this.za=null}function vn(t){this.Lg=t}w("lf.TransactionType",pn),pn.READ_ONLY=0,pn.READ_WRITE=1,w("lf.TransactionStats",dn),dn.prototype.Og=e("wd"),dn.prototype.success=dn.prototype.Og,dn.prototype.ig=e("jg"),dn.prototype.insertedRowCount=dn.prototype.ig,dn.prototype.Sg=e("Tg"),dn.prototype.updatedRowCount=dn.prototype.Sg,dn.prototype.Pf=e("Qf"),dn.prototype.deletedRowCount=dn.prototype.Pf,dn.prototype.If=e("Jf"),dn.prototype.changedTableCount=dn.prototype.If,yn.prototype.ka=function(){return(0==this.yd?this.sc():function(t){try{!function(t){t.ib.forEach((function(t){var n=this.aa.get(t.getName());te(this.Aa,n,un(t.wa),1),ee(this.Aa,n,un(t.xa),1),ne(this.Aa,n,un(t.la),1)}),t)}(t.Ra)}catch(t){return it(t)}return function(t){return function(t){t.Ra.ib.forEach((function(t,n){n=this.Ra.da().get(n),n=this.I(n.getName(),n.kb.bind(n),0);var e=un(t.xa).map((function(t){return t.id()}));0<e.length&&n.remove(e).ve(this.Te,this),t=un(t.la).map((function(t){return t[1]})).concat(un(t.wa)),n.put(t).ve(this.Te,this)}),t)}(t),function(t){(function(t){var n=[];return an(t.ib).map((function(t){return this.aa.get(t)}),t).forEach((function(t){t.Cb()&&(t.Da().forEach((function(t){n.push(this.C.get(t.j()))}),this),n.push(this.C.get(t.getName()+".#")))}),t),n})(t.Ra).forEach((function(t){var n=this.I(t.getName(),hn,1);n.remove([]),n.put(t.Ja())}),t)}(t),t.sc()}(t).then(function(t){return this.Ra.ka(),t}.bind(t))}(this)).then(function(t){return this.wd=!0,t}.bind(this))},yn.prototype.Te=function(t){this.S.reject(t)},yn.prototype.Y=function(){if(null===this.za)if(this.wd)if(0==this.yd)this.za=new dn(!0,0,0,0,0);else{var t=0,n=0,e=0,i=0;this.Ra.ib.forEach((function(r){i++,t+=r.wa.size,e+=r.la.size,n+=r.xa.size})),this.za=new dn(!0,t,e,n,i)}else this.za=new dn(!1,0,0,0,0);return this.za},vn.prototype.toString=e("Lg");var bn=new vn("backstore"),mn=new vn("cache"),gn=new vn("indexstore"),wn=new vn("engine"),_n=new vn("runner"),En=new vn("observerregistry"),Sn=new vn("schema");function Tn(t){this.l=new Nt,t&&this.addAll(t)}function Nn(t){var n=typeof t;return"object"==n&&t||"function"==n?"o"+p(t):n.substr(0,1)+t}function An(t){this.Xb=new Tn(t),Object.defineProperty(this,"size",{get:function(){return this.Xb.zc()}})}(r=Tn.prototype).zc=function(){return this.l.zc()},r.add=function(t){this.l.set(Nn(t),t)},r.addAll=function(t){t=function(t){if(t.qa&&"function"==typeof t.qa)return t.qa();if(l(t))return t.split("");if(h(t)){for(var n=[],e=t.length,i=0;i<e;i++)n.push(t[i]);return n}return L(t)}(t);for(var n=t.length,e=0;e<n;e++)this.add(t[e])},r.remove=function(t){return this.l.remove(Nn(t))},r.clear=function(){this.l.clear()},r.jd=function(){return this.l.jd()},r.contains=function(t){return this.l.Pa(Nn(t))},r.qa=function(){return this.l.qa()},r.clone=function(){return new Tn(this)},r.pc=function(){return this.l.pc(!1)},An.prototype.add=function(t){this.Xb.add(t)},An.prototype.add=An.prototype.add,An.prototype.clear=function(){this.Xb.clear()},An.prototype.clear=An.prototype.clear,An.prototype.delete=function(t){return this.Xb.remove(t)},An.prototype.delete=An.prototype.delete,An.prototype.forEach=function(t,n){this.Xb.qa().forEach(t,n)},An.prototype.has=function(t){return this.Xb.contains(t)},An.prototype.has=An.prototype.has;var qn=nn().vg;function xn(t){return qn?a(t)?new window.Set(t):new window.Set:new An(t)}function Cn(t){if(t instanceof An)return t.Xb.qa();var n=0,e=Array(t.size);return t.forEach((function(t){e[n++]=t})),e}function kn(t,n){this.sa=t,this.m=n||{}}function In(t,n){n.forEach((function(t){this.m[t.id()]=t.Ja()}),t)}function On(t){return new kn(t.id,JSON.parse(t.value))}function jn(t,n,e){this.Z=t,this.Gb=n,this.pf=e}function Mn(t,n,e){var i=[e<<9,(e+1<<9)-1];return n=(t=t.b(mn)).Va(n,i[0],i[1]),In(e=new kn(e),n),e}function Rn(t,n){return new kn(n)}function Dn(t){this.V=t.b(mn),this.C=t.b(gn),this.g=t.b(Sn)}function Ln(t,n,e){var i=t.C.lc.get(n.getName())||[],r=0;i.forEach((function(t){try{Bn(t,e),r++}catch(t){throw i.slice(0,r).forEach((function(t){Bn(t,[e[1],e[0]])}),this),t}}),t)}function Bn(t,n){var e=null===n[1]?void 0:n[1].nb(t.getName()),i=null===n[0]?void 0:n[0].nb(t.getName());if(!a(i)&&a(e))t.add(e,n[1].id());else if(a(i)&&a(e)){if(null===e||null===i){if(e==i)return}else if(0==t.jb().compare(i,e))return;t.add(e,n[1].id()),t.remove(i,n[0].id())}else a(i)&&!a(e)&&t.remove(i,n[0].id())}kn.prototype.W=e("sa"),kn.prototype.Ja=function(){return{id:this.sa,value:JSON.stringify(this.m)}},(r=jn.prototype).get=function(t){if(0==t.length)return this.Vd();var n=this.Gb;return function(t,n){var e=on(),i=at();return t=function(t){var n=xn();return t.forEach((function(t){n.add(t>>9)})),Cn(n)}(n).map((function(t){return new Y((function(n,i){var r;try{r=this.Z.get(t)}catch(t){return void i(t)}r.onerror=i,r.onsuccess=function(t){t=On(t.target.result),e.set(t.W(),t),n()}}),this)}),t),ot(t).then((function(){i.resolve(e)})),i.ha}(this,t).then((function(e){return t.map((function(t){var i=e.get(t>>9);return n(i.m[t])}))}))},r.Vd=function(){return new Y((function(t,n){var e,i=[];try{e=this.Z.openCursor()}catch(t){return void n(t)}e.onerror=n,e.onsuccess=function(){var n=e.result;if(n){var r,o=On(n.value).m;for(r in o)i.push(this.Gb(o[r]));n.continue()}else t(i)}.bind(this)}),this)},r.Tb=function(t){return new Y((function(n,e){var i;try{i=t()}catch(t){return void e(t)}i.onsuccess=n,i.onerror=e}),this)},r.put=function(t){if(0==t.length)return et();var n=on();return t.forEach((function(t){var e=t.id()>>9,i=n.get(e)||null;null===i&&(i=this.pf(this.Z.name,e)),In(i,[t]),n.set(e,i)}),this),ot(t=un(n).map((function(t){return this.Tb(function(){return this.Z.put(t.Ja())}.bind(this))}),this))},r.remove=function(t){if(0==t.length)return this.Tb(function(){return this.Z.clear()}.bind(this));var n=on();return t.forEach((function(t){var e=t>>9,i=n.get(e)||null;null===i&&(i=this.pf(this.Z.name,e)),function(t,n){n.forEach((function(t){delete this.m[t]}),t)}(i,[t]),n.set(e,i)}),this),ot(t=un(n).map((function(t){return this.Tb(function(){return 0==Object.keys(t.m).length?this.Z.delete(t.W()):this.Z.put(t.Ja())}.bind(this))}),this))},Dn.prototype.update=function(t){t.forEach((function(t){!function(t,n){var e=t.g.table(n.getName());(function(t){var n=[];return t.wa.forEach((function(t){n.push([null,t])})),t.la.forEach((function(t){n.push(t)})),t.xa.forEach((function(t){n.push([t,null])})),n})(n).forEach((function(t){Ln(this,e,t)}),t)}(this,t),function(t,n){var e=n.getName();n.xa.forEach((function(t,n){this.V.remove(e,n)}),t),n.wa.forEach((function(t){this.V.set(e,t)}),t),n.la.forEach((function(t){this.V.set(e,t[1])}),t)}(this,t)}),this)};var Pn={};w("lf.ConstraintAction",Pn),Pn.RESTRICT=0,Pn.CASCADE=1;var Gn={};w("lf.ConstraintTiming",Gn),Gn.IMMEDIATE=0,Gn.DEFERRABLE=1;var Fn={};w("lf.Order",Fn),Fn.DESC=0,Fn.ASC=1;var Un={};w("lf.Type",Un),Un.ARRAY_BUFFER=0,Un.BOOLEAN=1,Un.DATE_TIME=2,Un.INTEGER=3,Un.NUMBER=4,Un.STRING=5,Un.OBJECT=6;var zn={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};function Hn(t,n){if(this.code=t,this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+t,1<arguments.length)for(var e=1;e<=Math.min(4,arguments.length-1);++e)this.message+="&p"+(e-1)+"="+encodeURIComponent(String(arguments[e]).slice(0,64))}function Jn(){this.l=on(),this.size=0}function Kn(t){this.C=t.b(gn),this.g=t.b(Sn),this.V=t.b(mn),this.$c=null}function Vn(t,n,e){var i=n.Mb.xg;e.forEach((function(t){i.forEach((function(n){if(null==t.m[n.getName()])throw new Hn(202,n.j())}),this)}),t)}function Wn(t,n,e,i){n.Mb.Ud.forEach((function(t){t.timing==i&&function(t,n,e){var i=$n(t,n);e.forEach((function(t){if(Zn(t[0],t[1],n.name)&&null!==(t=t[1].nb(n.name))&&!i.Pa(t))throw new Hn(203,n.name)}),t)}(this,t,e)}),t)}function $n(t,n){null===t.$c&&(t.$c=on());var e=t.$c.get(n.name)||null;return null===e&&(e=t.g.table(n.Xa)[n.Jc].Ca(),e=t.C.get(e.j()),t.$c.set(n.name,e)),e}function Zn(t,n,e){return(null===t?null!==n:null===n)||t.nb(e)!=n.nb(e)}function Xn(t,n,e,i){null!==(n=gu(t.g.info(),n.getName(),0))&&(n=n.filter((function(t){return t.timing==i})),0!=n.length&&Qn(t,n,e,(function(t,n,e){if(n.Pa(e))throw new Hn(203,t.name)})))}function Yn(t,n,e){if(null===(n=gu(t.g.info(),n.getName(),1)))return null;var i=new Jn;return Qn(t,n,e,(function(t,n,e){0<(n=n.get(e)).length&&i.Wb(t.Ge,n)})),i}function Qn(t,n,e,i){n.forEach((function(t){var n=this.C.get(t.name),r=$n(this,t);e.forEach((function(e){if(Zn(e[0],e[1],r.getName())){var o=e[0].nb(r.getName());i(t,n,o,e)}}),this)}),t)}function te(t,n,e,i){0!=e.length&&(e=e.map((function(t){return[null,t]})),Wn(t,n,e,i))}function ne(t,n,e,i){0!=e.length&&(Wn(t,n,e,i),Xn(t,n,e,i))}function ee(t,n,e,i){0!=e.length&&(e=e.map((function(t){return[t,null]})),Xn(t,n,e,i))}function ie(t){this.wa=on(),this.la=on(),this.xa=on(),this.A=t}function re(t,n){this.aa=on(),n.forEach((function(t){this.aa.set(t.getName(),t)}),this),this.g=t.b(Sn),this.V=t.b(mn),this.C=t.b(gn),this.Aa=new Kn(t),this.gd=new Dn(t),this.ib=on()}function oe(t,n,e){var i=n.getName(),r=t.ib.get(i)||new ie(i);t.ib.set(i,r);try{Ln(t.gd,n,e)}catch(t){throw t}n=e[0];var o=e[1];null===n&&null!==o?(t.V.set(i,o),r.add(o)):null!==n&&null!==o?(t.V.set(i,o),r.modify(e)):null!==n&&null===o&&(t.V.remove(i,n.id()),r.delete(n))}function ae(t,n){if(!t.aa.has(n.getName()))throw new Hn(106,n.getName())}function ue(t,n,e,i){this.from=t,this.o=n,this.ea=this.from!=se&&e,this.na=this.o!=se&&i}w("lf.type.DEFAULT_VALUES",zn),_(Hn,Error),(r=Jn.prototype).has=function(t){return this.l.has(t)},r.set=function(t,n){var e=this.l.get(t)||null;return null===e&&(e=xn(),this.l.set(t,e)),e.has(n)||(e.add(n),this.size++),this},r.Wb=function(t,n){var e=this.l.get(t)||null;return null===e&&(e=xn(),this.l.set(t,e)),n.forEach((function(t){e.has(t)||(e.add(t),this.size++)}),this),this},r.be=function(t){return t.keys().forEach((function(n){var e=t.get(n);this.Wb(n,e)}),this),this},r.delete=function(t,n){var e=this.l.get(t)||null;return null!==e&&((n=e.delete(n))&&(--this.size,0==e.size&&this.l.delete(t)),n)},r.get=function(t){return null===(t=this.l.get(t)||null)?null:Cn(t)},r.clear=function(){this.l.clear(),this.size=0},r.keys=function(){return an(this.l)},r.values=function(){var t=[];return this.l.forEach((function(n){t.push.apply(t,Cn(n))})),t},(r=ie.prototype).getName=e("A"),r.add=function(t){if(this.xa.has(t.id())){var n=[this.xa.get(t.id()),t];this.la.set(t.id(),n),this.xa.delete(t.id())}else this.wa.set(t.id(),t)},r.modify=function(t){var n=t[1],e=t[0].id();this.wa.has(e)?this.wa.set(e,n):(this.la.has(e)&&(t=[this.la.get(t[0].id())[0],n]),this.la.set(e,t))},r.delete=function(t){if(this.wa.has(t.id()))this.wa.delete(t.id());else if(this.la.has(t.id())){var n=this.la.get(t.id())[0];this.la.delete(t.id()),this.xa.set(t.id(),n)}else this.xa.set(t.id(),t)},r.be=function(t){t.wa.forEach((function(t){this.add(t)}),this),t.la.forEach((function(t){this.modify(t)}),this),t.xa.forEach((function(t){this.delete(t)}),this)},r.toString=function(){return"["+an(this.wa).toString()+"], ["+an(this.la).toString()+"], ["+an(this.xa).toString()+"]"},r.jd=function(){return 0==this.wa.size&&0==this.xa.size&&0==this.la.size},(r=re.prototype).da=e("aa"),r.Ab=function(t,n){ae(this,t),Vn(this.Aa,t,n),te(this.Aa,t,n,0);for(var e=0;e<n.length;e++)oe(this,t,[null,n[e]])},r.update=function(t,n){ae(this,t),Vn(this.Aa,t,n),n=n.map((function(t){return[this.V.get(t.id()),t]}),this),function(t,n,e){if(null!==(n=gu(t.g.info(),n.getName(),1))){var i=function(t,n,e){var i=new Jn;return Qn(t,e,n,(function(t,n,e,r){n.get(e).forEach((function(n){i.set(n,{Sd:t,Cg:r[1]})}))})),i}(t.Aa,e,n);i.keys().forEach((function(t){i.get(t).forEach((function(n){var e=this.g.table(n.Sd.Ge),i=this.V.get(t),r=e.kb(i.Ja());r.m[n.Sd.vb]=n.Cg.m[n.Sd.Jc],oe(this,e,[i,r])}),this)}),t)}}(this,t,n),ne(this.Aa,t,n,0),n.forEach((function(n){oe(this,t,n)}),this)},r.Wd=function(t,n){ae(this,t),Vn(this.Aa,t,n);for(var e=0;e<n.length;e++){var i,r=n[e],o=null;if(null===(a=t.Mb.sd))i=null;else{i=this.Aa;var a=a.j(),u=r.nb(a);i=0==(i=i.C.get(a).get(u)).length?null:i[0]}null!=i?(o=this.V.get(i),r.sa=i,ne(this.Aa,t,[[o,r]],0)):te(this.Aa,t,[r],0),oe(this,t,[o,r])}},r.remove=function(t,n){ae(this,t),function(t,n,e){if(null!==gu(t.g.info(),n.getName(),1)){n=function(t,n,e){var i={ue:[],rf:new Jn},r=new Jn;r.Wb(n.getName(),e.map((function(t){return t.id()})));do{var o=new Jn;r.keys().forEach((function(t){var n=this.g.table(t);null!==(n=Yn(this,n,t=r.get(t).map((function(t){return[this.V.get(t),null]}),this)))&&(i.ue.unshift.apply(i.ue,n.keys()),o.be(n))}),t),r=o,i.rf.be(r)}while(0<r.size);return i}(t.Aa,n,e);var i=n.rf;n.ue.forEach((function(t){var n=this.g.table(t);t=i.get(t).map((function(t){return this.V.get(t)}),this),ee(this.Aa,n,t,0),t.forEach((function(t){oe(this,n,[t,null])}),this)}),t)}}(this,t,n),ee(this.Aa,t,n,0);for(var e=0;e<n.length;e++)oe(this,t,[n[e],null])},r.ka=function(){},r.Jb=function(){var t=un(this.ib).map((function(t){return function(t){var n=new ie(t.A);return t.wa.forEach((function(t){n.delete(t)})),t.xa.forEach((function(t){n.add(t)})),t.la.forEach((function(t){n.modify([t[1],t[0]])})),n}(t)}));this.gd.update(t)};var se=new function(){};function ce(t,n){var e=pe(t.from,n.from,!0,t.ea,n.ea);if(0==e)return!0;var i=-1==e?t:n;return t=1==e?t:n,i.o==se||i.o>t.from||i.o==t.from&&!i.na&&!t.ea}function he(){return new ue(se,se,!1,!1)}function le(t){return t.from==se&&t.o==se}function fe(t){return t.from==t.o&&t.from!=se&&!t.ea&&!t.na}function pe(t,n,e,i,r){function o(t){return e?t:1==t?-1:1}return i=i||!1,r=r||!1,t==se?n==se?(i?!r:r)?o(i?1:-1):0:o(-1):n==se?o(1):t<n?-1:t==n?(i?!r:r)?o(i?1:-1):0:1}function de(t,n){var e=pe(t.from,n.from,!0,t.ea,n.ea);return 0==e&&(e=pe(t.o,n.o,!1,t.na,n.na)),e}function ye(t){this.kc=[],a(t)&&this.add(t)}function ve(t,n){this.entries=t,this.M=xn(n),this.$a=null}function be(t){return t.entries.map((function(t){return t.va.m}))}function me(t){return t.entries.map((function(t){return t.va.id()}))}function ge(t,n){return t.$a.get(n.j())}ue.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==se?"unbound":this.from)+", "+(this.o==se?"unbound":this.o)+(this.na?")":"]")},ue.prototype.reverse=function(){return new ue(this.o,this.from,this.na,this.ea)},ue.prototype.contains=function(t){var n=this.o==se||t<this.o||t==this.o&&!this.na;return(this.from==se||t>this.from||t==this.from&&!this.ea)&&n},ye.prototype.toString=function(){return this.kc.map((function(t){return t.toString()})).join(",")},ye.prototype.Pa=function(t){return this.kc.some((function(n){return n.contains(t)}))},ye.prototype.qa=e("kc"),ye.prototype.add=function(t){if(0!=t.length)if(1==(t=this.kc.concat(t)).length)this.kc=t;else{t.sort(de);for(var n=[],e=t[0],i=1;i<t.length;++i)if(ce(e,t[i])){var r=t[i],o=he();if(e.from!=se&&r.from!=se){var a=pe(e.from,r.from,!0);1!=a?(o.from=e.from,o.ea=0!=a?e.ea:e.ea&&r.ea):(o.from=r.from,o.ea=r.ea)}e.o!=se&&r.o!=se&&(-1!=(a=pe(e.o,r.o,!1))?(o.o=e.o,o.na=0!=a?e.na:e.na&&r.na):(o.o=r.o,o.na=r.na)),e=o}else n.push(e),e=t[i];n.push(e),this.kc=n}},ve.prototype.u=function(){return Cn(this.M)};var we=null;function _e(){return null===we&&(we=new ve([],[])),we}function Ee(t,n){var e=1<n.length;return new ve(t=t.map((function(t){return new Se(t,e)})),n)}function Se(t,n){this.va=t,this.id=Ne++,this.Yd=n}var Te,Ne=0;function Ae(t,n){var e=n.Ka;return null!==e&&t.va.m.hasOwnProperty(e)?t.va.m[e]:t.Yd?t.va.m[Gr(n.I())][n.getName()]:t.va.m[n.getName()]}function qe(t,n,e){if(null!=(i=n.Ka))t.va.m[i]=e;else if(t.Yd){var i=Gr(n.I()),r=t.va.m[i];null==r&&(r={},t.va.m[i]=r),r[n.getName()]=e}else t.va.m[n.getName()]=e}function xe(t,n,e,i){function r(t,n){if(t.Yd)for(var e in t=t.va.m)o[e]=t[e];else o[n[0]]=t.va.m}var o={};return r(t,n),r(e,i),new Se(t=new sn(-1,o),!0)}function Ce(t){this.fa=t}function ke(){this.Ze=function(){function t(t){return t}var n=on();return n.set(1,(function(t){return null===t?null:t?1:0})),n.set(2,(function(t){return null===t?null:t.getTime()})),n.set(3,t),n.set(4,t),n.set(5,t),n}();var t=Me();this.Ob=on(),this.Ob.set(1,je()),this.Ob.set(2,function(){var t=on();return t.set("between",(function(t,n){return null!==t&&null!==n[0]&&null!==n[1]&&t.getTime()>=n[0].getTime()&&t.getTime()<=n[1].getTime()})),t.set("eq",(function(t,n){return(null===t?-1:t.getTime())==(null===n?-1:n.getTime())})),t.set("gte",(function(t,n){return null!==t&&null!==n&&t.getTime()>=n.getTime()})),t.set("gt",(function(t,n){return null!==t&&null!==n&&t.getTime()>n.getTime()})),t.set("in",(function(t,n){return n.some((function(n){return n.getTime()==t.getTime()}))})),t.set("lte",(function(t,n){return null!==t&&null!==n&&t.getTime()<=n.getTime()})),t.set("lt",(function(t,n){return null!==t&&null!==n&&t.getTime()<n.getTime()})),t.set("neq",(function(t,n){return(null===t?-1:t.getTime())!=(null===n?-1:n.getTime())})),t}()),this.Ob.set(4,t),this.Ob.set(3,t),this.Ob.set(5,function(){var t=Me();return t.set("match",(function(t,n){return null!==t&&null!==n&&new RegExp(n).test(t)})),t}()),this.Ob.set(6,function(){var t=on();return t.set("eq",(function(t,n){if(null!==n)throw new Hn(550);return null===t})),t.set("neq",(function(t,n){if(null!==n)throw new Hn(550);return null!==t})),t}())}function Ie(){return null!=Te||(Te=new ke),Te}function Oe(t,n,e){if(null===(t=t.Ob.get(n)||null))throw new Hn(550);if(null===(e=t.get(e)||null))throw new Hn(550);return e}function je(){var t=on();return t.set("eq",(function(t,n){return t==n})),t.set("neq",(function(t,n){return t!=n})),t}function Me(){var t=je();return t.set("between",(function(t,n){return null!==t&&null!==n[0]&&null!==n[1]&&t>=n[0]&&t<=n[1]})),t.set("gte",(function(t,n){return null!==t&&null!==n&&t>=n})),t.set("gt",(function(t,n){return null!==t&&null!==n&&t>n})),t.set("in",(function(t,n){return-1!=n.indexOf(t)})),t.set("lte",(function(t,n){return null!==t&&null!==n&&t<=n})),t.set("lt",(function(t,n){return null!==t&&null!==n&&t<n})),t}function Re(){this.h=this.D=null}w("lf.bind",(function(t){return new Ce(t)})),w("lf.Binder",Ce),Ce.prototype.Ca=e("fa");var De=[];function Le(t){for(var n=0;null!==t.getParent();)n++,t=t.getParent();return n}function Be(t){return t.h||De}function Pe(t,n){return Be(t)[n]||null}function Ge(t,n,e){n.D=t,null===t.h?t.h=[n]:t.h.splice(e,0,n)}function Fe(t,n){n.D=t,null===t.h?t.h=[n]:t.h.push(n)}function Ue(t,n){var e=t.h&&t.h[n];return e?(e.D=null,t.h.splice(n,1),0==t.h.length&&(t.h=null),e):null}function ze(t,n,e){!1!==n.call(e,t)&&Be(t).forEach((function(t){ze(t,n,e)}))}function He(){Re.call(this),this.sa=Je++}Re.prototype.getParent=e("D"),Re.prototype.bb=function(){for(var t=this;null!==t.getParent();)t=t.getParent();return t},Re.prototype.removeChild=function(t){return Ue(this,Be(this).indexOf(t))},_(He,Re);var Je=0;function Ke(t,n,e){He.call(this),this.J=t,this.value=n,this.F=e,this.vc=Oe(Ie(),this.J.G(),this.F),this.Wa=!1,this.cc=n}function Ve(t){var n=!1;if(t.value instanceof Ce||(n="array"!=s(t.value)||!t.value.some((function(t){return t instanceof Ce}))),!n)throw new Hn(501)}function We(t,n){return 2==t.J.G()?n.getTime():n}function $e(t){this.ba=t,this.Wc=this.Ga=null}function Ze(t,n){return null===t.Ga&&null!=t.w&&(t.Ga=function(t){var n=on();return ze(t,(function(t){n.set(t.W(),t)})),n}(t.w)),t.Ga.get(n)||null}function Xe(t,n){n.w&&(t.w=n.w.Nb()),t.Wc=n}function Ye(t,n){null!=(t=t.w)&&ze(t,(function(t){t instanceof Ke&&t.bind(n)}))}function Qe(t){$e.call(this,t)}function ti(t){var n="";return t.forEach((function(e,i){n+=e.J.j()+" ",n+=1==e.order?"ASC":"DESC",i<t.length-1&&(n+=", ")})),n}function ni(t,n){this.Ha=t,this.aa=n}function ei(t,n){this.global=t,this.Oa=t.b(bn),this.td=n.map((function(t){return t.context})),this.jf=n.map((function(t){return t.je})),this.Md=function(t){var n=xn();return t.forEach((function(t){t.da().forEach(n.add.bind(n))})),n}(this.jf),this.xe=function(t){return t.td.some((function(t){return!(t instanceof Qe)}))?1:0}(this),this.Db=at()}function ii(t,n){ei.call(this,t,n),this.Ib=t.b(En)}function ri(t,n){this.c=t,this.Ib=t.b(En),this.Ia=t.b(_n),this.gd=new Dn(t),this.ib=n;var e=t.b(Sn);t=this.ib.map((function(t){return e.table(t.getName())})),this.aa=xn(t),this.Db=at()}function oi(t){this.c=t,this.Oa=t.b(bn),this.Ia=t.b(_n)}function ai(t,n){this.Ua=t,this.i=n,this.Za=on()}function ui(t,n){var e=at(),i=t;return n.length&&(i=t.child(n)),i.once("value",(function(t){e.resolve(t.val())}),(function(t){e.reject(t)})),e.ha}function si(t,n,e){function i(t){t?r.reject(t):r.resolve()}e=e||!1;var r=at();return e?t.set(n,i):t.update(n,i),r.ha}function ci(t,n,e){var i=t.Za.get(n);return null!=i?function(){var t={},n=at();return this.i.orderByChild("T").equalTo(i).once("value",(function(i){i.forEach((function(n){var i=e(n.val());t[parseInt(n.key(),10)]=i})),n.resolve(t)})),n.ha}.call(t).then(function(t){return t["@rev"]={R:++this.Sa},si(this.i,t)}.bind(t)):et()}function hi(t,n,e){yn.call(this,n,e),this.i=t}function li(){this.Ba=on()}function fi(t,n){if(0==n.length)return un(t.Ba);var e=[];return n.forEach((function(t){null===(t=this.Ba.get(t)||null)||e.push(t)}),t),e}function pi(t,n){n.forEach((function(t){this.Ba.set(t.id(),t)}),t)}function di(t,n){0==n.length||n.length==t.Ba.size?t.Ba.clear():n.forEach((function(t){this.Ba.delete(t)}),t)}function yi(t,n){this.g=t,this.Df=n,this.Kc=on(),this.Sa=-1,this.M=on(),this.Za=on(),this.Jd=null}function vi(t){t.i.off(),t.i.on("child_removed",t.zg.bind(t)),t.Kd&&(t.Kd.off(),t.Kc.clear()),t.Kd=t.i.orderByChild("R").startAt(t.Sa+1),t.Kd.on("value",t.ee.bind(t))}function bi(t,n){var e=at(),i=t.Za.get(n),r=t.g.table(n);return t.i.orderByChild("T").equalTo(i).once("value",function(t){var i=new li,o=[];t.forEach((function(t){o.push(r.kb({id:parseInt(t.key(),10),value:t.val().P}))})),pi(i,o),this.M.set(n,i),e.resolve()}.bind(t)),e.ha}function mi(t,n,e,i){this.i=n,this.ja=e,this.Ua=t,this.Uc=i}function gi(t){return t instanceof ArrayBuffer?fn(t):t instanceof Date?t.getTime():t}function wi(t,n,e){return function(t,n,e,i){return new Y((function(t,i){var r;try{var o=this.ja.objectStore(n);r=o.openCursor()}catch(t){return void i(t)}r.onsuccess=function(){var n=r.result;n?(e(n),n.continue()):t()},r.onerror=i}),t)}(t,n,t.Uc?function(t){var n,i=On(t.value),r=i.m;for(n in r){var o=hn(r[n]);e(o),r[n]=o.Ja()}t.update(i.Ja())}:function(t){var n=hn(t.value);e(n),t.update(n.Ja())})}function _i(t,n){this.Z=t,this.Gb=n}function Ei(t,n,e,i,r){yn.call(this,e,r),this.c=t,this.ja=n,this.Uc=i,this.ja.oncomplete=this.S.resolve.bind(this.S),this.ja.onabort=this.S.reject.bind(this.S)}function Si(t,n){this.c=t,this.g=n,this.Gd=n.ke.Sf||!1}function Ti(t,n){t.objectStoreNames.contains(n)||t.createObjectStore(n,{keyPath:"id"})}function Ni(t,n,e){yn.call(this,n,e),this.Z=t,0==n&&this.S.resolve()}function Ai(t){this.g=t,this.M=on()}function qi(t,n){if(!t.M.has(n)){var e=new li;t.M.set(n,e)}}function xi(t){Ai.call(this,t),this.pd=null}function Ci(t,n,e){this.ja=t,this.A='"'+n+'"',this.Gb=e}function ki(t,n,e){yn.call(this,n,e),this.i=t,this.M=on(),this.Nd=[]}function Ii(t){return t.replace(".","__d__").replace("#","__s__")}function Oi(t,n,e,i){var r=at();return t.Nd.push({Ng:n,Dg:e,transform:i,S:r}),r.ha}function ji(t,n,e){this.i=e,this.c=t,this.Ua=n}function Mi(t){return new ki(t.i,1,new re(t.c,xn()))}function Ri(t,n,e){var i=Mi(t),r="UPDATE "+n+" SET value=? WHERE id=?";return t.ec(n).then((function(t){return t.forEach((function(t){t=e(t),Oi(i,r,[JSON.stringify(t.value),t.id])})),i.ka()}))}function Di(t){Oi(t,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],(function(t){for(var n=Array(t.rows.length),e=0;e<n.length;++e)n[e]=t.rows.item(e).tbl_name;return n}))}function Li(t,n,e){this.c=t,this.g=n,this.Mg=e||1}function Bi(t){this.l=on(),this.$b=on(),t.oa().forEach((function(t){this.$b.set(t.getName(),xn())}),this)}function Pi(t,n){return n.map((function(t){return this.get(t)}),t)}function Gi(t,n,e){var i=0,r=t.length;for(e=e||Fi;i<r;){var o=i+r>>1;0>e(t[o],n)?i=o+1:r=o}return i==r&&t[i]==n?i:~i}function Fi(t,n){return t-n}function Ui(t,n,e){return 0>(e=Gi(t,n,e))&&(t.splice(-(e+1),0,n),!0)}function zi(t,n,e,i){return t=n?t.reverse():t,null==e&&null==i?t:0==(e=Math.min(a(e)?e:t.length,t.length))?[]:(i=Math.min(i||0,t.length),t.slice(i,i+e))}function Hi(){this.ia=0,this.Fc=null}function Ji(t,n,e,i){if(this.A=t,this.$=n,this.yf=e,this.za=new Hi,i){if(t=511,t*=t*t,i.length>=t)throw new Hn(6,t);i=function(t,n){for(var e=n.length,i=0,r=t=Zi(t);0<e;){var o=768<=e?511:257<=e&&511>=e?e:257,a=n.slice(i,i+o);t.a=a.map((function(t){return t.key})),t.B=a.map((function(t){return t.value})),i+=o,0<(e-=o)&&(nr(t,o=Zi(t.s)),t=o)}return r}(this,i),this.ua=i=ir(i)}else this.clear()}He.prototype.W=e("sa"),_(Ke,He),(r=Ke.prototype).Nb=function(){var t=new Ke(this.J,this.value,this.F);t.cc=this.cc,t.vd(this.Wa);var n=this.W();return t.sa=n,t},r.lb=function(t){return null!=t?(t.push(this.J),t):[this.J]},r.u=function(t){return(t=null!=t?t:xn()).add(this.J.I()),t},r.vd=n("Wa"),r.eval=function(t){return Ve(this),"in"==this.F?function(t,n){var e=xn(t.value),i=function(t){return null!==t&&e.has(t)!=this.Wa}.bind(t);return new ve(t=n.entries.filter((function(t){return i(Ae(t,this.J))}),t),n.u())}(this,t):new ve(t.entries.filter((function(t){return this.vc(Ae(t,this.J),this.value)!=this.Wa}),this),t.u())},r.bind=function(t){if(this.cc instanceof Ce){var n=this.cc.Ca();if(t.length<=n)throw new Hn(510);this.value=t[n]}else"array"==s(this.cc)&&(this.value=this.cc.map((function(n){if(n instanceof Ce){var e=n.Ca();if(t.length<=e)throw new Hn(510);return t[n.Ca()]}return n})))},r.toString=function(){return"value_pred("+this.J.j()+" "+this.F+(this.Wa?"(complement)":"")+" "+this.value+")"},r.ld=function(){return Ve(this),null!==this.value&&("between"==this.F||"in"==this.F||"eq"==this.F||"gt"==this.F||"gte"==this.F||"lt"==this.F||"lte"==this.F)},r.we=function(){var t=null;if("between"==this.F)t=new ue(We(this,this.value[0]),We(this,this.value[1]),!1,!1);else{if("in"==this.F)return t=this.value.map((function(t){return new ue(t,t,!1,!1)})),new ye(this.Wa?function(t){if(0==t.length)return[];t.sort(de);for(var n=Array(t.length+1),e=0;e<n.length;e++)n[e]=0==e?new ue(se,t[e].from,!1,!0):e==n.length-1?new ue(t[e-1].o,se,!0,!1):new ue(t[e-1].o,t[e].from,!0,!0);return n}(t):t);t=We(this,this.value),t="eq"==this.F?new ue(t,t,!1,!1):"gte"==this.F?new ue(t,se,!1,!1):"gt"==this.F?new ue(t,se,!0,!1):"lte"==this.F?new ue(se,t,!1,!1):new ue(se,t,!1,!0)}return new ye(this.Wa?function(t){if(le(t))return[];var n=null,e=null;return t.from==se||(n=new ue(se,t.from,!1,!t.ea)),t.o==se||(e=new ue(t.o,se,!t.na,!1)),[n,e].filter((function(t){return null!==t}))}(t):[t])},$e.prototype.bind=function(){return this},_(Qe,$e),Qe.prototype.da=function(){return xn(this.from)},Qe.prototype.clone=function(){var t=new Qe(this.ba);return Xe(t,this),this.f&&(t.f=this.f.slice()),this.from&&(t.from=this.from.slice()),t.X=this.X,t.L=this.L,this.N&&(t.N=this.N.slice()),this.ra&&(t.ra=this.ra.slice()),this.Sb&&(t.Sb=this.Sb),this.Zb&&(t.Zb=this.Zb),t.eb=this.eb,t},Qe.prototype.bind=function(t){return Qe.hb.bind.call(this,t),null!=this.Sb&&(this.X=t[this.Sb.Ca()]),null!=this.Zb&&(this.L=t[this.Zb.Ca()]),Ye(this,t),this},ni.prototype.bb=e("Ha"),ni.prototype.da=e("aa"),(r=ei.prototype).exec=function(){var t=0==this.xe?void 0:new re(this.global,this.Md),n=[],e=this.jf.slice(),i=this.td;return function r(){var o=e.shift();if(o){var a=i[n.length];return o.bb().exec(t,a).then((function(t){return n.push(t[0]),r()}))}return et()}().then(function(){return this.ja=this.Oa.Fb(this.xe,Cn(this.Md),t),this.ja.ka()}.bind(this)).then(function(){return this.ge(n),n}.bind(this),(function(n){throw null!=t&&t.Jb(),n}))},r.G=e("xe"),r.da=e("Md"),r.W=function(){return p(this)},r.ge=function(){},r.Y=function(){var t=null;return null!=this.ja&&(t=this.ja.Y()),null===t?new dn(!1,0,0,0,0):t},_(ii,ei),ii.prototype.getPriority=i(0),ii.prototype.ge=function(t){this.td.forEach((function(n,e){uu(this.Ib,n,t[e])}),this)},(r=ri.prototype).exec=function(){return this.gd.update(this.ib),this.Mc(),et()},r.G=i(1),r.da=e("aa"),r.W=function(){return p(this)},r.getPriority=i(1),r.Mc=function(){var t=au(this.Ib,this.aa);0!=t.length&&(t=new ii(this.c,t),Wa(this.Ia,t))},oi.prototype.ee=function(t){t=new ri(this.c,t),Wa(this.Ia,t)},w("lf.backstore.FirebaseRawBackStore",ai),ai.prototype.cd=e("i"),ai.prototype.dd=function(){throw new Hn(351)},ai.prototype.Ea=function(t){return ui(this.i,"@rev/R").then(function(t){return this.Sa=t,ui(this.i,"@table")}.bind(this)).then(function(n){var e,i=0;for(e in n)this.Za.set(e,n[e]),n[e]>i&&(i=n[e]);return t.oa().forEach((function(t){this.Za.has(t.getName())||(n[t.getName()]=++i)}),this),si(e=this.i.child("@table"),n)}.bind(this))},ai.prototype.tc=function(t){return ci(this,t,i(null)).then(function(){return this.Za.delete(t),si(this.i.child("@table/"+t),null,!0)}.bind(this))},ai.prototype.dropTable=ai.prototype.tc,ai.prototype.qc=function(t,n,e){return ci(this,t,function(t){var i=t.P;return i[n]=e,{R:this.Sa+1,T:t.T,P:i}}.bind(this))},ai.prototype.addTableColumn=ai.prototype.qc,ai.prototype.uc=function(t,n){return ci(this,t,function(t){var e=t.P;return delete e[n],{R:this.Sa+1,T:t.T,P:e}}.bind(this))},ai.prototype.dropTableColumn=ai.prototype.uc,ai.prototype.Lc=function(t,n,e){return ci(this,t,function(t){var i=t.P;return i[e]=i[n],delete i[n],{R:this.Sa+1,T:t.T,P:i}}.bind(this))},ai.prototype.renameTableColumn=ai.prototype.Lc,ai.prototype.xb=function(){throw new Hn(351)},ai.prototype.createRow=ai.prototype.xb,ai.prototype.Cc=e("Ua"),ai.prototype.getVersion=ai.prototype.Cc,ai.prototype.ec=function(t){var n=at();return t=this.Za.get(t),this.i.orderByChild("T").equalTo(t).once("value",(function(t){var e=[];t.forEach((function(t){e.push(t.val().P)})),n.resolve(e)})),n.ha},ai.prototype.dump=function(){var t={};return ot(an(this.Za).map(function(n){return this.ec(n).then((function(e){t[n]=e}))}.bind(this))).then((function(){return t}))},ai.prototype.dump=ai.prototype.dump,_(hi,yn),hi.prototype.I=function(t){return this.i.Ac(t)},hi.prototype.sc=function(){if(0==this.yd)return this.S.resolve(),this.S.ha;var t=this.Ra.ib;if(0==t.size)this.S.resolve();else{var n=this.i.Sa+1;this.i.Sa=n;var e={"@rev":{R:n}};t.forEach((function(t,i){var r=this.i.Za.get(i);t.wa.forEach((function(t,i){e[i]={R:n,T:r,P:t.m}})),t.la.forEach((function(t,i){e[i]={R:n,T:r,P:t[1].m}})),t.xa.forEach((function(t,n){e[n]=null}))}),this),this.i.i.update(e,function(e){null===e?this.S.resolve():(this.i.Sa=n-1,e=un(t).map((function(t){return bi(this.i,t.getName())}),this),ot(e).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.ha},li.prototype.getData=e("Ba"),li.prototype.get=function(t){return et(fi(this,t))},li.prototype.put=function(t){return pi(this,t),et()},li.prototype.remove=function(t){return di(this,t),et()},(r=yi.prototype).Ea=function(t){this.i=this.Df.child(this.g.name());var n=t||function(){return et()};return ui(this.i,"@db/version").then(function(t){return null===t?si(this.i,function(t){var n={};return n["@db"]={version:t.g.version()},n["@rev"]={R:1},t.Sa=1,n["@table"]={},t.g.oa().forEach((function(t,e){t=t.getName(),n["@table"][t]=e,this.M.set(t,new li),this.Za.set(t,e)}),t),n}(this),!0).then(function(){var t=new ai(0,this.i);return n(t)}.bind(this)).then(function(){return this.Ea()}.bind(this)):t==this.g.version()?ui(this.i,"@rev/R").then(function(t){return this.Sa=t,ui(this.i,"@table")}.bind(this)).then(function(t){for(var n in t)this.Za.set(n,t[n]);return ot(t=this.g.oa().map((function(t){return bi(this,t.getName())}),this))}.bind(this)).then(function(){return function(t){cn=un(t.M).map((function(t){return function(t){return 0==t.Ba.size?0:an(t.Ba).reduce((function(t,n){return t>n?t:n}),0)}(t)})).reduce((function(t,n){return t>n?t:n}),0)+1}(this),vi(this),et()}.bind(this)):this.he(t,n).then(function(){return this.Ea()}.bind(this))}.bind(this))},r.he=function(t,n){var e=new ai(t,this.i);return e.Ea(this.g).then(function(){return et()}.bind(this)).then((function(){return n(e)})).then(function(){return si(this.i.child("@db"),{version:this.g.version()},!0)}.bind(this))},r.zg=function(t){var n=t.val(),e=this.Kc.get(n.T)||null;null===e&&(e=xn(),this.Kc.set(n.T,e)),e.add(parseInt(t.key(),10))},r.ee=function(t){var n=t.child("@rev/R").val();null!=n&&n!=this.Sa&&(this.Sa=n,t=function(t,n){var e=xn(),i=on();return t.Za.forEach(function(t,n){var r=this.M.get(n),o=new ie(n);this.Kc.has(t)&&((n=Cn(this.Kc.get(t))).forEach((function(t){e.add(t)})),fi(r,n).forEach((function(t){o.delete(t)}))),i.set(t,o)}.bind(t)),n.forEach(function(t){if("@rev"!=t.key()){var n=parseInt(t.key(),10);if(!e.has(n)){var r=t.val();t=i.get(r.T);var o=this.M.get(t.getName());r=this.g.table(t.getName()).kb({id:n,value:r.P}),o.getData().has(n)?t.modify([fi(o,[n])[0],r]):t.add(r)}}}.bind(t)),un(i).filter((function(t){return!t.jd()}))}(this,t),t.forEach((function(t){var n=this.M.get(t.getName()),e=an(t.xa);0<e.length&&di(n,e);var i=un(t.wa);t.la.forEach((function(t){i.push(t[1])})),pi(n,i)}),this),0<t.length&&this.Gc(t),vi(this))},r.Fb=function(t,n,e){return new hi(this,t,e)},r.Ac=function(t){var n=this.M.get(t)||null;if(null!==n)return n;throw new Hn(101,t)},r.close=function(){},r.subscribe=n("Jd"),r.Gc=function(t){null!=this.Jd&&this.Jd(t)},w("lf.backstore.IndexedDBRawBackStore",mi),mi.prototype.cd=e("i"),mi.prototype.getRawDBInstance=mi.prototype.cd,mi.prototype.dd=e("ja"),mi.prototype.getRawTransaction=mi.prototype.dd,mi.prototype.tc=function(t){return new Y((function(n,e){try{this.i.deleteObjectStore(t)}catch(t){return void e(t)}n()}),this)},mi.prototype.dropTable=mi.prototype.tc,mi.prototype.qc=function(t,n,e){var i=gi(e);return wi(this,t,(function(t){t.m[n]=i}))},mi.prototype.addTableColumn=mi.prototype.qc,mi.prototype.uc=function(t,n){return wi(this,t,(function(t){delete t.m[n]}))},mi.prototype.dropTableColumn=mi.prototype.uc,mi.prototype.Lc=function(t,n,e){return wi(this,t,(function(t){t.m[e]=t.m[n],delete t.m[n]}))},mi.prototype.renameTableColumn=mi.prototype.Lc,mi.prototype.xb=function(t){var n,e={};for(n in t)e[n]=gi(t[n]);return ln(e)},mi.prototype.createRow=mi.prototype.xb,mi.prototype.Cc=e("Ua"),mi.prototype.getVersion=mi.prototype.Cc,mi.prototype.dump=function(){for(var t=this.i.objectStoreNames,n=[],e=0;e<t.length;++e){var i=t.item(e);n.push(this.ec(i))}return ot(n).then((function(n){var e={};return n.forEach((function(n,i){e[t.item(i)]=n})),e}))},mi.prototype.dump=mi.prototype.dump,mi.prototype.ec=function(t){return function(t,n){var e=[];return new Y((function(t,i){var r;try{r=this.ja.objectStore(n).openCursor()}catch(t){return void i(t)}r.onsuccess=function(){var n=r.result;if(n){if(this.Uc){var i,o=On(n.value).m;for(i in o)e.push(o[i])}else e.push(n.value);n.continue()}else t(e)}.bind(this),r.onerror=i}),t)}(this,t).then((function(t){return t.map((function(t){return t.value}))}))},_i.prototype.get=function(t){return 0==t.length?null!=this.Z.getAll?function(t){return new Y((function(t,n){var e;try{e=this.Z.getAll()}catch(t){return void n(t)}e.onerror=n,e.onsuccess=function(){var n=e.result.map((function(t){return this.Gb(t)}),this);t(n)}.bind(this)}),t)}(this):function(t){return new Y((function(t,n){var e,i=[];try{e=this.Z.openCursor()}catch(t){return void n(t)}e.onerror=n,e.onsuccess=function(){var n=e.result;n?(i.push(this.Gb(n.value)),n.continue()):t(i)}.bind(this)}),t)}(this):ot(t=t.map((function(t){return new Y((function(n,e){var i;try{i=this.Z.get(t)}catch(t){return void e(t)}i.onerror=e,i.onsuccess=function(t){n(this.Gb(t.target.result))}.bind(this)}),this)}),this))},_i.prototype.Tb=function(t){return new Y((function(n,e){var i;try{i=t()}catch(t){return void e(t)}i.onsuccess=n,i.onerror=e}),this)},_i.prototype.put=function(t){return 0==t.length?et():ot(t=t.map((function(t){return this.Tb(function(){return this.Z.put(t.Ja())}.bind(this))}),this))},_i.prototype.remove=function(t){return new Y((function(n,e){var i=this.Z.count();i.onsuccess=function(i){if(0==t.length||i.target.result==t.length)return this.Tb(function(){return this.Z.clear()}.bind(this)).then(n,e);ot(i=t.map((function(t){return this.Tb(function(){return this.Z.delete(t)}.bind(this))}),this)).then(n,e)}.bind(this),i.onerror=e}),this)},_(Ei,yn),Ei.prototype.I=function(t,n,e){return this.Uc?(e=null!=e?e:0,new jn(t=this.ja.objectStore(t),n,0==e?g(Mn,this.c):Rn)):new _i(this.ja.objectStore(t),n)},Ei.prototype.sc=function(){return this.S.ha},(r=Si.prototype).Ea=function(t){var n=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==n)throw new Hn(352);var e=t||function(){return et()};return new Y((function(t,i){var r;try{r=n.open(this.g.name(),this.g.version())}catch(t){return void i(t)}r.onerror=function(t){t=t.target.error,i(new Hn(361,t.name,t.message))},r.onupgradeneeded=function(t){(function(t,n,e){var i=e.target.result;return e=new mi(e.oldVersion,i,e.target.transaction,t.Gd),function(t){for(var n=[],e=0;e<t.objectStoreNames.length;++e){var i=t.objectStoreNames.item(e);-1!=i.indexOf(".")&&n.push(i)}n.forEach((function(n){try{t.deleteObjectStore(n)}catch(t){}}))}(i),t.g.oa().forEach(g(t.Lf,i),t),n(e)})(this,e,t).then((function(){}),i)}.bind(this),r.onsuccess=function(n){this.i=n.target.result,this.qe().then(function(n){cn=Math.max(cn,n+1),t(this.i)}.bind(this))}.bind(this)}),this)},r.Lf=function(t,n){t.objectStoreNames.contains(n.getName())||t.createObjectStore(n.getName(),{keyPath:"id"}),n.Cb()&&(n.Da().forEach((function(n){Ti(t,n.j())}),this),Ti(t,Fr(n)))},r.Fb=function(t,n,e){return n=this.i.transaction(function(t){var n=xn();return t.forEach((function(t){n.add(t.getName()),t.Cb()&&(t.Da().forEach((function(t){n.add(t.j())})),n.add(Fr(t)))})),Cn(n)}(n),0==t?"readonly":"readwrite"),new Ei(this.c,n,t,this.Gd,e)},r.qe=function(t){function n(){return 0==e.length?et():function(n){return new Y((function(e,a){var u;try{u=(t||i.transaction([n])).objectStore(n).openCursor(null,"prev")}catch(t){return void a(t)}u.onsuccess=function(t){(t=t.target.result)&&(r=Math.max(r,o(t))),e(r)},u.onerror=function(){e(r)}}))}(e.shift()).then(n)}var e=this.g.oa().map((function(t){return t.getName()})),i=this.i,r=0,o=function(t){return this.Gd?(t=On(t.value),Object.keys(t.m).reduce((function(t,n){return Math.max(t,n)}),0)):t.key}.bind(this);return new Y((function(t){n().then((function(){t(r)}))}))},r.close=function(){this.i.close()},r.Ac=function(){throw new Hn(511)},r.subscribe=function(){},r.Gc=function(){},_(Ni,yn),Ni.prototype.I=function(t){return this.Z.Ac(t)},Ni.prototype.sc=function(){return this.S.resolve(),this.S.ha},(r=Ai.prototype).Ea=function(){return this.g.oa().forEach(this.gg,this),et()},r.Ac=function(t){var n=this.M.get(t)||null;if(null===n)throw new Hn(101,t);return n},r.Fb=function(t,n,e){return new Ni(this,t,e)},r.gg=function(t){qi(this,t.getName()),t.Cb()&&(t.Da().forEach((function(t){qi(this,t.j())}),this),qi(this,Fr(t)))},r.close=function(){},r.subscribe=function(){},r.Gc=function(){},_(xi,Ai),xi.prototype.subscribe=function(t){null===this.pd&&(this.pd=t)},xi.prototype.Gc=function(t){null===this.pd||this.pd(t)},Ci.prototype.get=function(t){var n=this.Gb;return Oi(this.ja,"SELECT id, value FROM "+this.A+" "+(0==t.length?"":"WHERE id IN ("+t.join(",")+")"),[],(function(t){for(var e=t.rows.length,i=Array(e),r=0;r<e;++r)i[r]=n({id:t.rows.item(r).id,value:JSON.parse(t.rows.item(r).value)});return i}))},Ci.prototype.put=function(t){if(0==t.length)return et();var n="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";return t.forEach((function(t){Oi(this.ja,n,[t.id(),JSON.stringify(t.m)])}),this),et()},Ci.prototype.remove=function(t){return Oi(this.ja,"DELETE FROM "+this.A+" "+(0==t.length?"":"WHERE id IN ("+t.join(",")+")"),[]),et()},_(ki,yn),ki.prototype.I=function(t,n){var e=this.M.get(t)||null;return null===e&&(e=new Ci(this,Ii(t),n),this.M.set(t,e)),e},ki.prototype.sc=function(){var t=null,n=this.S.reject.bind(this.S),e=function(t,n){this.S.reject(n)}.bind(this),i=[],r=function(n,o){if(null!==t){var a=o;null!=t.transform&&null!=o&&(a=t.transform(o)),i.push(a),t.S.resolve(a)}0<this.Nd.length?(t=o=this.Nd.shift(),n.executeSql(o.Ng,o.Dg,r,e)):this.S.resolve(i)}.bind(this);return 0==this.yd?this.i.readTransaction(r,n):this.i.transaction(r,n),this.S.ha},w("lf.backstore.WebSqlRawBackStore",ji),ji.prototype.cd=e("i"),ji.prototype.getRawDBInstance=ji.prototype.cd,ji.prototype.dd=function(){throw new Hn(356)},ji.prototype.getRawTransaction=ji.prototype.dd,ji.prototype.tc=function(t){var n=Mi(this);return Oi(n,"DROP TABLE "+t,[]),n.ka()},ji.prototype.dropTable=ji.prototype.tc,ji.prototype.ec=function(t){var n=Mi(this);return Oi(n,"SELECT id, value FROM "+t,[]),n.ka().then((function(t){for(var n=t[0].rows.length,e=Array(n),i=0;i<n;++i)e[i]={id:t[0].rows.item(i).id,value:JSON.parse(t[0].rows.item(i).value)};return et(e)}))},ji.prototype.qc=function(t,n,e){var i=gi(e);return Ri(this,t,(function(t){return t.value[n]=i,t}))},ji.prototype.addTableColumn=ji.prototype.qc,ji.prototype.uc=function(t,n){return Ri(this,t,(function(t){return delete t.value[n],t}))},ji.prototype.dropTableColumn=ji.prototype.uc,ji.prototype.Lc=function(t,n,e){return Ri(this,t,(function(t){return t.value[e]=t.value[n],delete t.value[n],t}))},ji.prototype.renameTableColumn=ji.prototype.Lc,ji.prototype.xb=function(t){var n,e={};for(n in t)e[n]=gi(t[n]);return ln(e)},ji.prototype.createRow=ji.prototype.xb,ji.prototype.Cc=e("Ua"),ji.prototype.getVersion=ji.prototype.Cc,ji.prototype.dump=function(){var t=at(),n=Mi(this);Di(n);var e={};return n.ka().then(function(n){n=n[0].filter((function(t){return"__lf_ver"!=t&&"__WebKitDatabaseInfoTable__"!=t})).map((function(t){return this.ec(t).then((function(n){e[t]=n}))}),this),ot(n).then((function(){t.resolve(e)}))}.bind(this)),t.ha},ji.prototype.dump=ji.prototype.dump,(r=Li.prototype).Ea=function(t){if(null==window.openDatabase)throw new Hn(353);var n=t||function(){return et()};return new Y((function(t,e){var i=window.openDatabase(this.g.name(),"",this.g.name(),this.Mg);if(null==i)throw new Hn(354);this.i=i,function(t,n){var e=at(),i=new ki(t.i,1,new re(t.c,xn()));return Oi(i,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]),Oi(i,"SELECT v FROM __lf_ver WHERE id = 0",[]),i.ka().then(function(t){var i=0;t[1].rows.length&&(i=t[1].rows.item(0).v),i<this.g.version()?this.he(n,i).then(e.resolve.bind(e)):i>this.g.version()?e.reject(new Hn(108)):e.resolve()}.bind(t),e.reject.bind(e)),e.ha}(this,n).then(function(){this.qe().then(t,e)}.bind(this),(function(t){if(t instanceof Hn)throw t;throw new Hn(354,t.message)}))}),this)},r.Fb=function(t,n,e){if(null!=this.i)return new ki(this.i,t,e);throw new Hn(2)},r.close=function(){},r.Ac=function(){throw new Hn(512)},r.subscribe=function(){throw new Hn(355)},r.Gc=function(){throw new Hn(355)},r.he=function(t,n){return function(t){var n=t.g.oa(),e=new ki(t.i,1,new re(t.c,xn())),i=new ki(t.i,1,new re(t.c,xn()));return Oi(e,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[t.g.version()]),Di(e),e.ka().then((function(t){var e=t[1];e.filter((function(t){return-1!=t.indexOf("__d__")})).forEach((function(t){Oi(i,'DROP TABLE "'+t+'"',[])}));var r=[],o=[],a=[];return n.map((function(t){-1==e.indexOf(t.getName())&&r.push(t.getName()),t.Cb&&(t.Da().forEach((function(t){t=Ii(t.j()),r.push(t),o.push(t)})),t=Ii(Fr(t)),r.push(t),a.push(t))})),r.forEach((function(t){Oi(i,'CREATE TABLE "'+t+'"(id INTEGER PRIMARY KEY, value TEXT)',[])})),i.ka()}))}(this).then(function(){return t(new ji(this.c,n,this.i))}.bind(this))},r.qe=function(){var t=0,n=at(),e=function(n){var e=new ki(this.i,0);return Oi(e,'SELECT MAX(id) FROM "'+n+'"',[]),e.ka().then((function(n){n=n[0].rows.item(0)["MAX(id)"],t=Math.max(n,t)}))}.bind(this),i=this.g.oa().map((function(t){return e(t.getName())}));return ot(i).then((function(){cn=Math.max(cn,t+1),n.resolve()}),(function(t){n.reject(t)})),n.ha},(r=Bi.prototype).set=function(t,n){this.l.set(n.id(),n),this.$b.get(t).add(n.id())},r.Wb=function(t,n){var e=this.$b.get(t);n.forEach((function(t){this.l.set(t.id(),t),e.add(t.id())}),this)},r.get=function(t){return this.l.get(t)||null},r.Va=function(t,n,e){var i=[],r=Math.min(n,e),o=Math.max(n,e);if((t=this.$b.get(t)).size<o-r)t.forEach((function(t){t>=r&&t<=o&&(t=this.l.get(t),i.push(t))}),this);else for(n=r;n<=o;++n)t.has(n)&&(e=this.l.get(n),i.push(e));return i},r.remove=function(t,n){this.l.delete(n),this.$b.get(t).delete(n)},r.zc=function(t){return null!=t?this.$b.get(t).size:this.l.size},r.clear=function(){this.l.clear(),this.$b.clear()},Hi.prototype.add=function(t,n){this.ia+=n,this.Fc=null===this.Fc||t>this.Fc?t:this.Fc},Hi.prototype.remove=function(t,n){this.ia-=n},Hi.prototype.clear=function(){this.ia=0};var Ki=[];function Vi(t,n,e){if(!t.$.Od(n.a[e])){if(!(1<n.a[e].length))return null;if(null===n.a[e][0])return null}return[n.a[e],t.yf?[n.B[e]]:n.B[e]]}function Wi(t,n,e,i){return i=function(t,n){var e=n.Y();t=t.map((function(t){var i=new $i(t.id(),n);return i.a=t.m[0],i.B=t.m[1],i.a.forEach((function(t,r){e.add(t,n.Ma()?1:i.B[r].length)})),i}));for(var i=0;i<t.length-1;++i)nr(t[i],t[i+1]);return 1<t.length?ir(t[0]):t[0]}(i,t=new Ji(n,t,e)),t.ua=i,t}function $i(t,n){this.sa=t,this.s=n,this.mb=0,this.ya=this.qb=this.D=null,this.a=[],this.B=[],this.h=[],this.Yf=1==n.jb().Zd()?this.Pe:this.Oe}function Zi(t){return new $i(cn++,t)}function Xi(t){return 0==t.mb}function Yi(t){function n(t){return null!=t?t.sa.toString():"_"}var e=t.sa+"["+t.a.join("|")+"]",i=t.h.map((function(t){return t.sa})).join("|"),r=t.B.join("/"),o=n(t.qb)+"{";return o=(o=Xi(t)?o+r:o+i)+"}"+n(t.D),t.ya&&(e=e+"  "+(t=Yi(t.ya))[0],o=o+"  "+t[1]),[e,o]}function Qi(t){return Xi(t)?t:Qi(t.h[0])}function tr(t){return Xi(t)?t:tr(t.h[t.h.length-1])}function nr(t,n){n&&(n.qb=t),t&&(t.ya=n)}function er(t){var n=t[0],e=Zi(n.s);for(e.mb=n.mb+1,e.h=t,n=0;n<t.length;++n)t[n].D=e,0<n&&e.a.push(t[n].a[0]);return e}function ir(t){var n=t,e=[];do{e.push(n),n=n.ya}while(n);if(512>=e.length)n=er(e);else{var i=e.length,r=0;for((n=Zi(t.s)).mb=t.mb+2;0<i;){t=768<=i?511:257<=i&&511>=i?i:257;var o=e.slice(r,r+t),a=er(o);a.D=n,n.h.length&&(n.a.push(o[0].a[0]),nr(n.h[n.h.length-1],a)),n.h.push(a),r+=t,i-=t}}return n}function rr(t){return Xi(t)?t.a[0]:rr(t.h[0])}function or(t){t.a=[];for(var n=1;n<t.h.length;++n)t.a.push(rr(t.h[n]))}function ar(t,n,e,i){var r=ur(t,n),o=Xi(t);if(o){if(!t.s.Qa(t.a[r],n))return!1}else{var u=t.s.Qa(t.a[r],n)?r+1:r;if(!ar(t.h[u],n,u,i))return!1;or(t)}if(t.a.length>r&&t.s.Qa(t.a[r],n)){if(a(i)&&!t.s.Ma()&&o&&(0>(i=Gi(u=t.B[r],i,void 0))?i=!1:(u.splice(i,1),i=!0),i&&t.s.Y().remove(n,1),t.B[r].length))return!1;t.a.splice(r,1),o&&(o=t.s.Ma()?1:t.B[r].length,t.B.splice(r,1),t.s.Y().remove(n,o))}if(256>t.a.length&&null!==t.D){t:{if(t.ya&&256<t.ya.a.length)n=t.ya,r=i=0,o=t.a.length+1;else{if(!(t.qb&&256<t.qb.a.length)){n=!1;break t}n=t.qb,i=t.qb.a.length-1,r=Xi(t)?i:i+1,o=0}t.a.splice(o,0,n.a[i]),n.a.splice(i,1),i=Xi(t)?t.B:t.h,Xi(t)?u=n.B:(u=n.h)[r].D=t,i.splice(o,0,u[r]),u.splice(r,1),Xi(n)||(or(n),or(t)),n=!0}n||function(t,n){var e,i,r;t.ya&&511>t.ya.a.length?(e=t.ya,r=i=0):t.qb&&(i=(e=t.qb).a.length,r=Xi(e)?e.B.length:e.h.length),i=[i,0].concat(t.a),Array.prototype.splice.apply(e.a,i),i=null,Xi(t)?i=t.B:(i=t.h).forEach((function(t){t.D=e})),i=[r,0].concat(i),Array.prototype.splice.apply(Xi(e)?e.B:e.h,i),nr(t.qb,t.ya),Xi(e)||or(e),-1!=n&&(t.D.a.splice(n,1),t.D.h.splice(n,1))}(t,e)}return!0}function ur(t,n){for(var e=0,i=t.a.length,r=t.s.jb();e<i;){var o=e+i>>1;-1==r.compare(t.a[o],n)?e=o+1:i=o}return e}function sr(t,n,e,i){if(t.s.Ma())!n.reverse&&n.L?n.L--:e[n.count++]=t.B[i];else for(var r=0;r<t.B[i].length&&n.count<e.length;++r)!n.reverse&&n.L?n.L--:e[n.count++]=t.B[i][r]}function cr(t){this.Xc=0==t?lr:hr,this.ce=0==t?function(t){return null!=t?t.reverse():null}:function(t){return t||null},this.ie=0==t?pr:fr}function hr(t,n){return t>n?1:t<n?-1:0}function lr(t,n){return hr(n,t)}function fr(t,n){return de(t,n)}function pr(t,n){return de(n,t)}function dr(t){cr.call(this,t),this.Xc=0==t?vr:yr}function yr(t,n){return null===t?null===n?0:-1:null===n?1:hr(t,n)}function vr(t,n){return yr(n,t)}function br(t){this.pa=t.map((function(t){return new cr(t)}))}function mr(t,n,e,i){for(var r=0,o=0;o<t.pa.length&&0==r;++o)r=i(t.pa[o],n[o],e[o]);return r}function gr(t){br.call(this,t),this.pa=t.map((function(t){return new dr(t)}))}function wr(t){if(1==t.f.length)return new cr(t.f[0].order);var n=t.f.map((function(t){return t.order}));return t.f.some((function(t){return t.ba.hc()}))?new gr(n):new br(n)}function _r(t){this.fa=t,this.ob=xn(),this.Oc=new Hi,this.za=new Hi}function Er(t){this.A=t,this.sb=xn(),this.$=new cr(1)}function Sr(t){this.Oa=t.b(bn),this.C=t.b(gn),this.V=t.b(mn)}function Tr(){this.Z=on(),this.lc=on()}function Nr(t,n){var e=[],i=null,r=null;return ze(t,(function(t){var o=n(t);null==t.getParent()?r=o:Fe(i,o);var a=t.getParent();null!==a&&Be(a).length==Be(i).length&&-1!=(a=e.indexOf(i))&&e.splice(a,1),1<Be(t).length&&e.push(o),i=null===t.h?e[e.length-1]:o})),r}function Ar(t){var n=t.getParent(),e=0;null!==n&&(e=Be(n).indexOf(t),n.removeChild(t));var i=Be(t).slice();return i.forEach((function(i,r){t.removeChild(i),null===n||Ge(n,i,e+r)})),{parent:n,children:i}}function qr(t,n,e,i){var r=t.getParent();return null!==r&&(Ue(r,t=Be(r).indexOf(t)),Ge(r,e,t)),Be(n).slice().forEach((function(t){n.removeChild(t),Fe(i,t)})),e}function xr(t,n,e){var i=[];return function t(r){n(r)&&i.push(r),null!=e&&e(r)||Be(r).forEach(t)}(t),i}function Cr(t){He.call(this),this.pb=t,this.Wa=!1}function kr(t,n,e){He.call(this),this.ga=t,this.ma=n,this.F=e,this.de=null,t=Ie(),this.vc=Oe(t,this.ga.G(),this.F),this.ng=t.Ze.get(this.ga.G())||null}function Ir(t,n,e){var i;if(-1!=n.u().indexOf(Gr(t.ga.I()))?(i=n,n=e):i=e,i.entries.length>n.entries.length){t:{switch(e=t.ga,t.ga=t.ma,t.ma=e,t.F){case"gt":e="lt";break;case"lt":e="gt";break;case"gte":e="lte";break;case"lte":e="gte";break;default:break t}t.F=e,t.vc=Oe(Ie(),t.ga.G(),t.F)}return[n,i]}return[i,n]}function Or(t,n,e){return null===t.de&&(t.de=function(t){var n={};return t.lb().forEach((function(t){n[t.getName()]=null})),n}(t.ma.I())),xe(n,e,new Se(new sn(-1,t.de),!1),[Gr(t.ma.I())])}function jr(t,n,e,i){var r=[n,e];i||(r=Ir(t,n,e)),n=r[0],e=r[1],r=n;var o=e,a=t.ga,u=t.ma;i&&(r=e,o=n,a=t.ma,u=t.ga);var s=new Jn,c=[];r.entries.forEach((function(t){var n=String(Ae(t,a));s.set(n,t)}));var h=r.u(),l=o.u();return o.entries.forEach(function(t){var n=Ae(t,u),e=String(n);null!==n&&s.has(e)?s.get(e).forEach((function(n){n=xe(t,l,n,h),c.push(n)})):i&&c.push(Or(this,t,l))}.bind(t)),t=n.u().concat(e.u()),new ve(c,t)}function Mr(t,n,e,i,r){function o(t,n){n=new Se(n,1<h.length),t=xe(t,l,n,h),c.push(t)}var a=i.dg.I(),u=n,s=e;-1!=n.u().indexOf(Gr(a))&&(u=e,s=n);var c=[],h=s.u(),l=u.u();return u.entries.forEach((function(t){var n=this.ng(Ae(t,i.wg));0!=(n=i.index.get(n)).length&&(i.index.Ma()?o(t,r.get(n[0])):Pi(r,n).forEach(o.bind(null,t)))}),t),t=u.u().concat(s.u()),new ve(c,t)}function Rr(t,n,e){return null===n?new Ke(t,n,e):a(n.j)?new kr(t,n,e):new Ke(t,n,e)}(r=Ji.prototype).getName=e("A"),r.toString=function(){return this.ua.toString()},r.add=function(t,n){this.ua=this.ua.Ab(t,n)},r.set=function(t,n){this.ua=this.ua.Ab(t,n,!0)},r.remove=function(t,n){this.ua=this.ua.remove(t,n)},r.get=function(t){return this.ua.get(t)},r.Zc=function(t){if(null==t)return this.Y().ia;if(t instanceof ue){if(le(t))return this.Y().ia;if(fe(t))return this.get(t.from).length}return this.Va([t]).length},r.Y=e("za"),r.Vd=function(t,n,e,i){return e=Array(t),this.ua.fill({offset:n?this.za.ia-t-i:i,count:t,te:0},e),n?e.reverse():e},r.Va=function(t,n,e,i){var r=Qi(this.ua).a[0];if(!a(r)||0==e)return Ki;n=n||!1,e=null!=e?Math.min(e,this.za.ia):this.za.ia,i=i||0;var o=Math.min(Math.max(this.za.ia-i,0),e);if(0==o)return Ki;if(!a(t)||1==t.length&&t[0]instanceof ue&&le(t[0]))return this.Vd(o,n,e,i);t=this.$.uf(t);var u=Array(n?this.za.ia:o),s={count:0,X:u.length,reverse:n,L:i},c=1<this.jb().Zd();return t.forEach((function(t){for(var n=this.$.ud(t),e=(n=this.$.Xd(t)?r:n[0],n=this.ua.Yf(n),0);null!=n&&s.count<s.X;){if(c){for(var i=n,o=t,a=s,h=u,l=i.s.jb(),f=-1,p=0;p<i.a.length;++p)if(l.Bb(i.a[p],o)){f=p;break}if(-1!=f)for(p=f;p<i.a.length&&a.count<a.X;++p)l.Bb(i.a[p],o)&&sr(i,a,h,p)}else n.Va(t,s,u);0!=s.L||n.kd(t)?e=0:e++,n=2==e?null:n.next()}}),this),u.length>s.count&&u.splice(s.count,u.length-s.count),n?zi(u,n,e,i):u},r.clear=function(){this.ua=Zi(this),this.za.clear()},r.Pa=function(t){return this.ua.Pa(t)},r.min=function(){return this.Hb(this.$.min.bind(this.$))},r.max=function(){return this.Hb(this.$.max.bind(this.$))},r.Hb=function(t){var n;t:{n=Qi(this.ua);var e=0;do{if(e>=n.a.length)n=n.ya,e=0;else{var i=Vi(this,n,e);if(null!==i){n=i;break t}e++}}while(null!==n);n=null}t:{i=(e=tr(this.ua)).a.length-1;do{if(0>i)e=e.qb,i=0;else{var r=Vi(this,e,i);if(null!==r){e=r;break t}i--}}while(null!==e);e=null}return null===n||null===e?null:1==t(n[0],e[0])?n:e},r.Ma=e("yf"),r.jb=e("$"),r.Qa=function(t,n){return null!=t&&0==this.$.compare(t,n)},r.Ja=function(){for(var t=[],n=Qi(this.ua);n;)t.push(new sn(n.sa,[n.a,n.B])),n=n.ya;return t},(r=$i.prototype).next=e("ya"),r.toString=function(){var t="",n=Yi(this);return t=t+(n[0]+"\n")+n[1]+"\n",this.h.length&&(t+=this.h[0].toString()),t},r.get=function(t){var n=ur(this,t);if(Xi(this)){var e=Ki;return this.s.Qa(this.a[n],t)&&(e=e.concat(this.B[n])),e}return n=this.s.Qa(this.a[n],t)?n+1:n,this.h[n].get(t)},r.Pa=function(t){var n=ur(this,t);return!!this.s.Qa(this.a[n],t)||!Xi(this)&&this.h[n].Pa(t)},r.remove=function(t,n){return ar(this,t,-1,n),null===this.D?(t=this,1==this.h.length&&((t=this.h[0]).D=null),t):this},r.Ab=function(t,n,e){var i=ur(this,t);if(Xi(this)){if(this.s.Qa(this.a[i],t)){if(e)this.s.Y().remove(t,this.s.Ma()?1:this.B[i].length),this.B[i]=this.s.Ma()?n:[n];else{if(this.s.Ma())throw new Hn(201,this.s.getName(),JSON.stringify(t));if(!Ui(this.B[i],n))throw new Hn(109)}return this.s.Y().add(t,1),this}return this.a.splice(i,0,t),this.B.splice(i,0,this.s.Ma()?n:[n]),this.s.Y().add(t,1),512==this.a.length?(i=Zi(this.s),(t=Zi(this.s)).mb=1,t.a=[this.a[256]],t.h=[this,i],t.D=this.D,this.D=t,i.a=this.a.splice(256),i.B=this.B.splice(256),i.D=t,nr(i,this.ya),nr(this,i),i=t):i=this,i}return i=this.s.Qa(this.a[i],t)?i+1:i,Xi(t=this.h[i].Ab(t,n,e))||1!=t.a.length||(this.a.splice(i,0,t.a[0]),t.h[1].D=this,t.h[0].D=this,this.h.splice(i,1,t.h[1]),this.h.splice(i,0,t.h[0])),512==this.a.length?function(t){var n=Zi(t.s),e=Zi(t.s);return n.D=t.D,n.mb=t.mb+1,n.a=[t.a[256]],n.h=[t,e],t.a.splice(256,1),e.D=n,e.mb=t.mb,e.a=t.a.splice(256),e.h=t.h.splice(257),e.h.forEach((function(t){t.D=e})),t.D=n,nr(e,t.ya),nr(t,e),n}(this):this},r.Pe=function(t){if(!Xi(this)){var n=ur(this,t);return this.s.Qa(this.a[n],t)&&n++,this.h[n].Pe(t)}return this},r.Oe=function(t){if(!Xi(this)){var n=ur(this,t);return this.s.Qa(this.a[n],t)&&(t.some((function(t){return t==se}))||n++),this.h[n].Oe(t)}return this},r.Va=function(t,n,e){function i(t){return t[0]?t[1]?0:1:-1}var r=this.s.jb(),o=0,a=this.a.length-1,u=this.a,s=i(r.wb(u[o],t)),c=i(r.wb(u[a],t));if(1!=s&&(-1!=s||-1!=c)){var h=function(t,n){return(n=t+n>>1)==t?n+1:n},l=function(n,e,o){if(n>=e)return 0==o?e:-1;var a=i(r.wb(u[n],t));if(0==a)return n;if(1==a)return-1;if((a=h(n,e))==e)return 0==o?e:-1;var s=i(r.wb(u[a],t));return 0==s?l(n,a,s):-1==s?l(a+1,e,o):l(n+1,a,s)},f=function(n,e){if(n>=e)return n;var o=i(r.wb(u[e],t));if(0==o)return e;if(-1==o)return n;if((o=h(n,e))==e)return n;var a=i(r.wb(u[o],t));return 0==a?f(o,e):1==a?f(n,o-1):-1};0!=s&&(o=l(o+1,a,c)),-1!=o&&-1!=(a=f(o,a))&&a>=o&&function(t,n,e,i,r){for(;i<r&&(n.reverse||!(n.count>=n.X));++i)sr(t,n,e,i)}(this,n,e,o,a+1)}},r.fill=function(t,n){if(Xi(this))for(var e=0;e<this.B.length&&0<t.count;++e)if(0<t.offset){if(t.offset-=this.s.Ma()?1:this.B[e].length,0>t.offset)for(var i=this.B[e].length+t.offset;i<this.B[e].length&&0<t.count;++i)n[t.te++]=this.B[e][i],t.count--}else if(this.s.Ma())n[t.te++]=this.B[e],t.count--;else for(i=0;i<this.B[e].length&&0<t.count;++i)n[t.te++]=this.B[e][i],t.count--;else for(e=0;e<this.h.length&&0<t.count;++e)this.h[e].fill(t,n)},r.kd=function(t){return this.s.jb().kd(this.a[0],t)},(r=cr.prototype).wb=function(t,n){var e=[(n=this.ce(n)).from==se,n.o==se];if(!e[0]){var i=this.Xc(t,n.from);e[0]=n.ea?1==i:-1!=i}return e[1]||(i=this.Xc(t,n.o),e[1]=n.na?-1==i:1!=i),e},r.compare=function(t,n){return this.Xc(t,n)},r.min=function(t,n){return t<n?1:t==n?0:-1},r.max=function(t,n){return t>n?1:t==n?0:-1},r.Bb=function(t,n){return(t=this.wb(t,n))[0]&&t[1]},r.kd=function(t,n){return this.Bb(t,n)},r.uf=function(t){return t.filter((function(t){return null!==t})).sort(function(t,n){return this.ie(t,n)}.bind(this))},r.Xd=function(t){return this.ce(t).from==se},r.ud=function(t){return[(t=this.ce(t)).from,t.o]},r.Od=function(t){return null!==t},r.Zd=i(1),r.toString=function(){return this.compare==lr?"SimpleComparator_DESC":"SimpleComparator_ASC"},_(dr,cr),dr.prototype.Bb=function(t,n){return null===t?le(n):dr.hb.Bb.call(this,t,n)},dr.prototype.Hb=function(t,n){return null===t?null===n?0:-1:null===n?1:null},dr.prototype.min=function(t,n){var e=this.Hb(t,n);return null===e&&(e=dr.hb.min.call(this,t,n)),e},dr.prototype.max=function(t,n){var e=this.Hb(t,n);return null===e&&(e=dr.hb.max.call(this,t,n)),e},(r=br.prototype).compare=function(t,n){return mr(this,t,n,(function(t,n,e){return n==se||e==se?0:t.compare(n,e)}))},r.min=function(t,n){return mr(this,t,n,(function(t,n,e){return t.min(n,e)}))},r.max=function(t,n){return mr(this,t,n,(function(t,n,e){return t.max(n,e)}))},r.wb=function(t,n){for(var e=[!0,!0],i=0;i<this.pa.length&&(e[0]||e[1]);++i){var r=this.pa[i].wb(t[i],n[i]);e[0]=e[0]&&r[0],e[1]=e[1]&&r[1]}return e},r.Bb=function(t,n){for(var e=!0,i=0;i<this.pa.length&&e;++i)e=this.pa[i].Bb(t[i],n[i]);return e},r.kd=function(t,n){return this.pa[0].Bb(t[0],n[0])},r.uf=function(t){var n=t.filter((function(t){return t.every(c)}));t=Array(this.pa.length);for(var e=0;e<t.length;e++)t[e]=n.map((function(t){return t[e]}));for(t.forEach((function(t,n){t.sort(function(t,e){return this.pa[n].ie(t,e)}.bind(this))}),this),n=Array(n.length),e=0;e<n.length;e++)n[e]=t.map((function(t){return t[e]}));return n.sort(function(t,n){for(var e=0,i=0;i<this.pa.length&&0==e;++i)e=this.pa[i].ie(t[i],n[i]);return e}.bind(this))},r.Xd=function(t){return this.pa[0].Xd(t[0])},r.ud=function(t){var n=t.map((function(t,n){return this.pa[n].ud(t)[0]}),this);return t=t.map((function(t,n){return this.pa[n].ud(t)[1]}),this),[n,t]},r.Od=function(t){return t.every((function(t,n){return this.pa[n].Od(t)}),this)},r.Zd=function(){return this.pa.length},_(gr,br),(r=_r.prototype).getName=function(){return this.fa.getName()},r.add=function(t,n){null===t?(this.ob.add(n),this.Oc.add(t,1)):this.fa.add(t,n)},r.set=function(t,n){null===t?(this.ob.clear(),this.Oc.clear(),this.add(t,n)):this.fa.set(t,n)},r.remove=function(t,n){null===t?n?(this.ob.delete(n),this.Oc.remove(t,1)):(this.ob.clear(),this.Oc.clear()):this.fa.remove(t,n)},r.get=function(t){return null===t?Cn(this.ob):this.fa.get(t)},r.Zc=function(t){return this.fa.Zc(t)},r.Y=function(){return function(t,n){t.clear(),n.forEach((function(t){this.ia+=t.ia}),t)}(this.za,[this.fa.Y(),this.Oc]),this.za},r.Va=function(t,n,e,i){return n=this.fa.Va(t,n,e,i),null!=t?n:n.concat(Cn(this.ob))},r.clear=function(){this.ob.clear(),this.fa.clear()},r.Pa=function(t){return null===t?0!=this.ob.size:this.fa.Pa(t)},r.min=function(){return this.fa.min()},r.max=function(){return this.fa.max()},r.Ja=function(){return[new sn(-2,Cn(this.ob))].concat(this.fa.Ja())},r.jb=function(){return this.fa.jb()},r.Ma=function(){return this.fa.Ma()},(r=Er.prototype).getName=e("A"),r.add=function(t){if("number"!=typeof t)throw new Hn(103);this.sb.add(t)},r.set=function(t,n){this.add(t,n)},r.remove=function(t){this.sb.delete(t)},r.get=function(t){return this.Pa(t)?[t]:[]},r.min=function(){return this.Hb(this.$.min.bind(this.$))},r.max=function(){return this.Hb(this.$.max.bind(this.$))},r.Hb=function(t){if(0==this.sb.size)return null;var n=Cn(this.sb).reduce((function(n,e){return null===n||1==t(e,n)?e:n}),null);return[n,[n]]},r.Zc=function(){return this.sb.size},r.Va=function(t,n,e,i){var r=t||[he()];return t=Cn(this.sb).filter((function(t){return r.some((function(n){return this.$.Bb(t,n)}),this)}),this),zi(t,n,e,i)},r.clear=function(){this.sb.clear()},r.Pa=function(t){return this.sb.has(t)},r.Ja=function(){return[new sn(0,Cn(this.sb))]},r.jb=e("$"),r.Ma=i(!0),r.Y=function(){var t=new Hi;return t.ia=this.sb.size,t},Sr.prototype.Ea=function(t){var n=t.oa(),e=function(){if(0==n.length)return et();var t=n.shift();return(t.Cb()?function(t,n){var e=t.Oa.Fb(0,[n]),i=e.I(n.getName(),n.kb,0).get([]).then(function(t){this.V.Wb(n.getName(),t)}.bind(t));return t=n.Da().map((function(t){return function(t,n,e){e=e.I(n.j(),hn,1);var i=wr(n);return e.get([]).then(function(t){0<t.length&&(t=Br(n)?function(t,n){for(var e=-1,i=0;i<n.length;++i)if(-2==n[i].id()){e=i;break}if(-1==e)throw new Hn(102);i=n[e].m,(n=n.slice(0)).splice(e,1);var r=new _r(t=t(n));return i.forEach((function(t){r.ob.add(t)})),r}(Wi.bind(void 0,i,n.j(),n.Dc),t):Wi(i,n.j(),n.Dc,t),this.C.set(n.mc,t))}.bind(t))}(this,t,e)}),t).concat(function(t,n,e){return e.I(Fr(n),hn,1).get([]).then(function(t){0<t.length&&(t=function(t,n){var e=new Er(t);return n[0].m.forEach((function(t){e.add(t,t)})),e}(Fr(n),t),this.C.set(n.getName(),t))}.bind(t))}(t,n,e)),e.ka(),ot(t.concat(i))}(this,t):function(t,n){var e=t.Oa.Fb(0,[n]);return t=e.I(n.getName(),n.kb.bind(n),0).get([]).then(function(t){this.V.Wb(n.getName(),t),function(t,n,e){var i=t.C.lc.get(n.getName())||[];e.forEach((function(t){i.forEach((function(n){var e=t.nb(n.getName());n.add(e,t.id())}))}))}(this,n,t)}.bind(t)),e.ka(),t}(this,t)).then(e)}.bind(this);return e()},Tr.prototype.Ea=function(t){return t.oa().forEach((function(t){var n=[];this.lc.set(t.getName(),n);var e=Fr(t);if(null===this.get(e)){var i=new Er(e);n.push(i),this.Z.set(e,i)}t.Da().forEach((function(t){var e;e=wr(t),e=new Ji(t.j(),e,t.Dc),e=Br(t)&&1==t.f.length?new _r(e):e,n.push(e),this.Z.set(t.j(),e)}),this)}),this),et()},Tr.prototype.get=function(t){return this.Z.get(t)||null},Tr.prototype.set=function(t,n){var e=this.lc.get(t)||null;null===e&&(e=[],this.lc.set(t,e)),t=null;for(var i=0;i<e.length;i++)if(e[i].getName()==n.getName()){t=i;break}null!==t&&0<e.length?e.splice(t,1,n):e.push(n),this.Z.set(n.getName(),n)},_(Cr,He),(r=Cr.prototype).Nb=function(){return Nr(this,(function(t){if(t instanceof Cr){var n=new Cr(t.pb);return n.Wa=t.Wa,t=t.W(),n.sa=t,n}return t.Nb()}))},r.lb=function(t){var n=t||[];return ze(this,function(t){t!=this&&t.lb(n)}.bind(this)),Cn(t=xn(n))},r.u=function(t){var n=null!=t?t:xn();return ze(this,function(t){t!=this&&t.u(n)}.bind(this)),n},r.vd=function(t){this.Wa!=t&&(this.Wa=t,this.pb="and"==this.pb?"or":"and",Be(this).forEach((function(n){return n.vd(t)})))},r.eval=function(t){return function(t,n){return"and"==t.pb?function(t){if(0==t.length)return _e();for(var n=t.reduce((function(t,n){return t+n.entries.length}),0),e=Array(n),i=0,r=(n=t.map((function(t){var n=on();return t.entries.forEach((function(t){e[i++]=t,n.set(t.id,t)})),n})),on()),o=0;o<e.length;o++)n.every((function(t){return t.has(e[o].id)}))&&r.set(e[o].id,e[o]);return new ve(un(r),Cn(t[0].M))}(n):function(t){if(0==t.length)return _e();var n=on();return t.forEach((function(t){t.entries.forEach((function(t){n.set(t.id,t)}))})),new ve(un(n),Cn(t[0].M))}(n)}(this,Be(this).map((function(n){return n.eval(t)})))},r.toString=function(){return"combined_pred_"+this.pb.toString()},r.we=function(){if("or"==this.pb){var t=new ye;return Be(this).forEach((function(n){n=n.we().qa(),t.add(n)})),t}return new ye},r.ld=function(){return"or"==this.pb&&function(t){var n=null;return Be(t).every((function(t){return!!(t instanceof Ke&&t.ld())&&(null===n&&(n=t.J),n.j()==t.J.j())}))}(this)},_(kr,He),(r=kr.prototype).Nb=function(){var t=new kr(this.ga,this.ma,this.F),n=this.W();return t.sa=n,t},r.lb=function(t){return null!=t?(t.push(this.ga),t.push(this.ma),t):[this.ga,this.ma]},r.u=function(t){return(t=null!=t?t:xn()).add(this.ga.I()),t.add(this.ma.I()),t},r.reverse=function(){var t=this.F;switch(this.F){case"gt":t="lt";break;case"lt":t="gt";break;case"gte":t="lte";break;case"lte":t="gte"}return new kr(this.ma,this.ga,t)},r.eval=function(t){var n=t.entries.filter((function(t){var n=Ae(t,this.ga);return t=Ae(t,this.ma),this.vc(n,t)}),this);return new ve(n,t.u())},r.toString=function(){return"join_pred("+this.ga.j()+" "+this.F+" "+this.ma.j()+")"};var Dr={};function Lr(t,n,e,i){this.mc=t,this.name=n,this.Dc=e,this.f=i}function Br(t){return t.f.some((function(t){return t.ba.hc()}))}function Pr(t,n,e,i){this.A=t,this.ta=e,this.K=n,this.rd=i,this.Ka=null}function Gr(t){return t.Ka||t.A}function Fr(t){return t.A+".#"}function Ur(t,n){this.child=t,this.Lb=n,this.Ka=null}function zr(t){for(var n=[t];t instanceof Ur;)n.push(t.child),t=t.child;return n}function Hr(t){this.Ka=t||null,this.U=new Pr("#UnknownTable",[],[],!1)}function Jr(t){return new Ur(t||new Hr,"COUNT")}function Kr(t){return new Ur(t,"DISTINCT")}function Vr(t,n){Re.call(this),this.Uf=n}function Wr(t){Vr.call(this,0,1),this.Ce=t}function $r(t,n){this.Na=t,this.K=n}function Zr(t,n,e){var i=null;switch(t){case"MIN":i=Xr(n,e,(function(t,n){return n<t?n:t}));break;case"MAX":i=Xr(n,e,(function(t,n){return n>t?n:t}));break;case"DISTINCT":i=function(t,n){var e=on();return t.entries.forEach((function(t){var i=Ae(t,n);e.set(i,t)})),new ve(un(e),t.u())}(n,e);break;case"COUNT":i=Yr(n,e);break;case"SUM":i=Qr(n,e);break;case"AVG":0<(t=Yr(n,e))&&(i=Qr(n,e)/t);break;case"GEOMEAN":i=function(t,n){var e=0;return t=t.entries.reduce((function(t,i){return 0==(i=Ae(i,n))||null===i?t:(e++,t+Math.log(i))}),0),0==e?null:Math.pow(Math.E,t/e)}(n,e);break;default:i=function(t,n){var e=[];return t.entries.forEach((function(t){null===(t=Ae(t,n))||e.push(t)})),0==e.length?null:_t.apply(null,e)}(n,e)}return i}function Xr(t,n,e){return t.entries.reduce((function(t,i){return null===(i=Ae(i,n))?t:null===t?i:e(t,i)}),null)}function Yr(t,n){return n instanceof Hr?t.entries.length:t.entries.reduce((function(t,e){return t+(null===Ae(e,n)?0:1)}),0)}function Qr(t,n){return Xr(t,n,(function(t,n){return n+t}))}function to(t,n){this.Ha=t,this.aa=n}function no(){Re.call(this)}function eo(t,n){Re.call(this),this.table=t,this.values=n}function io(t,n){eo.call(this,t,n)}function ro(t){Re.call(this),this.table=t}function oo(t){Re.call(this),this.table=t}function ao(t){Re.call(this),this.O=t}function uo(t){Re.call(this),this.table=t}function so(){Re.call(this)}function co(t,n){Re.call(this),this.f=t,this.Pb=n}function ho(t){Re.call(this),this.N=t}function lo(t){Re.call(this),this.f=t}function fo(t){Re.call(this),this.f=t}function po(t){Re.call(this),this.X=t}function yo(t){Re.call(this),this.L=t}function vo(t,n){Re.call(this),this.O=t,this.Rb=n}function bo(){}function mo(){}function go(t,n){return 0==Be(n).length||"and"!=n.pb?[n]:D(t=Be(n).slice().map((function(t){return n.removeChild(t),go(this,t)}),t))}function wo(){}function _o(){Vr.call(this,0,0)}function Eo(t,n){ei.call(this,t,n),this.Ia=t.b(_n),this.Ib=t.b(En)}function So(t){$e.call(this,t)}function To(t,n,e){var i=_u(t.ba.info(),n,1);_u(t.ba.info(),n).forEach(e.add.bind(e)),i.forEach((function(t){To(this,t.getName(),e)}),t)}function No(t){$e.call(this,t)}function Ao(t){$e.call(this,t)}function qo(t,n){if(null==n)return"NULL";switch(t){case 1:return n?1:0;case 3:case 4:return n;case 0:return"'"+fn(n)+"'";default:return"'"+n.toString()+"'"}}function xo(t){switch(t){case"between":return"BETWEEN";case"eq":return"=";case"gte":return">=";case"gt":return">";case"in":return"IN";case"lte":return"<=";case"lt":return"<";case"match":return"LIKE";case"neq":return"<>";default:return"UNKNOWN"}}function Co(t){return[t.ga.j(),xo(t.F),t.ma.j()].join(" ")}function ko(t,n){if(t instanceof Ke){var e=t.J.j(),i=xo(t.F);return t=function(t,n,e,i){return t instanceof Ce?"?"+t.Ca().toString():i?null!=t?"#":"NULL":"match"==n?"'"+t.toString()+"'":"in"==n?"("+t.map((function(t){return qo(e,t)})).join(", ")+")":"between"==n?qo(e,t[0])+" AND "+qo(e,t[1]):qo(e,t).toString()}(t.value,t.F,t.J.G(),n),"="==i&&"NULL"==t?[e,"IS NULL"].join(" "):"<>"==i&&"NULL"==t?[e,"IS NOT NULL"].join(" "):[e,i,t].join(" ")}if(t instanceof Cr)return function(t,n){return Be(t).map((function(t){return"("+ko(t,n)+")"})).join("and"==t.pb?" AND ":" OR ")}(t,n);if(t instanceof kr)return Co(t);throw new Hn(357,typeof t)}function Io(t,n){return(t=ko(t,n))?" WHERE "+t:""}function Oo(t){return Gr(t)!=t.getName()?t.getName()+" AS "+Gr(t):t.getName()}function jo(t,n){if(n=n||!1,(t=t.query.clone())instanceof No)return function(t,n){var e=t.ac?"INSERT OR REPLACE":"INSERT",i=t.La.lb();return e=(e=(e=e+" INTO "+t.La.getName()+"(")+i.map((function(t){return t.getName()})).join(", "))+") VALUES (",t.values.map((function(t){var r=i.map((function(e){var i=t.m[e.getName()];return n?null!=i?"#":"NULL":qo(e.G(),i)}));return e+r.join(", ")+");"})).join("\n")}(t,n);if(t instanceof So){var e="DELETE FROM "+t.from.getName();return t.w&&(e+=Io(t.w,n)),e+";"}if(t instanceof Ao)return function(t,n){var e=(e="UPDATE "+t.table.getName()+" SET ")+t.set.map((function(t){var n=t.J.j()+" = ";return-1!=t.Tc?n+"?"+t.Tc.toString():n+qo(t.J.G(),t.value).toString()})).join(", ");return t.w&&(e+=Io(t.w,n)),e+";"}(t,n);if(t instanceof Qe)return function(t,n){var e="*";return t.f.length&&(e=t.f.map((function(t){return t.Ka?t.j()+" AS "+t.Ka:t.j()})).join(", ")),e="SELECT "+e+" FROM ",null!=t.eb&&0!=t.eb.size?e+=function(t,n){for(var e=xr(t.w,(function(t){return t instanceof kr})),i=e.map(Co),r=Oo(t.from[0]),o=1;o<t.from.length;o++){var a=Oo(t.from[o]);r=(r=t.eb.has(e[i.length-o].W())?r+" LEFT OUTER JOIN "+a:r+" INNER JOIN "+a)+" ON ("+i[i.length-o]+")"}return(t=0<Be(t=t.w).length?Pe(t,0):t)instanceof kr||(r+=" WHERE "+ko(t,n)),r}(t,n):(e+=t.from.map(Oo).join(", "),t.w&&(e+=Io(t.w,n))),t.N&&(n=t.N.map((function(t){return t.J.j()+(0==t.order?" DESC":" ASC")})).join(", "),e+=" ORDER BY "+n),t.ra&&(n=t.ra.map((function(t){return t.j()})).join(", "),e+=" GROUP BY "+n),t.X&&(e+=" LIMIT "+t.X.toString()),t.L&&(e+=" SKIP "+t.L.toString()),e+";"}(t,n);throw new Hn(358,typeof t)}function Mo(t,n){this.global=t,this.Hg=t.b(wn),this.Ia=t.b(_n),this.query=n}function Ro(t){if(null==t.hf){var n;n=t.Hg;var e=t.query,i=n.qg.create(e);n=n.Eg.create(i,e),t.hf=n}return t.hf}function Do(t){Mo.call(this,t,new So(t.b(Sn)))}function Lo(t,n){Mo.call(this,t,new No(t.b(Sn))),this.query.ac=n||!1}function Bo(t){return Po("and",Array.prototype.slice.call(arguments))}function Po(t,n){var e=new Cr(t);return n.forEach((function(t){Fe(e,t)})),e}function Go(t,n){Mo.call(this,t,new Qe(t.b(Sn))),this.Me=this.Ad=!1,this.query.f=n,function(t){var n=t.query.f.filter((function(t){return t instanceof Ur&&"DISTINCT"==t.Lb}),t);if(0!=n.length&&(1!=n.length||1!=t.query.f.length))throw new Hn(524)}(this),function(t){t.query.f.forEach((function(t){if(t instanceof Ur&&!function(t,n){switch(t){case"COUNT":case"DISTINCT":return!0;case"AVG":case"GEOMEAN":case"STDDEV":case"SUM":return 4==n||3==n;case"MAX":case"MIN":return 4==n||3==n||5==n||2==n}return!1}(t.Lb,t.G()))throw new Hn(527,t.j())}),t)}(this)}function Fo(t,n){if(null==t.query.from)throw new Hn(n)}function Uo(t,n){null!=t.query.w&&(n=Bo(n,t.query.w)),t.query.w=n}function zo(t,n){Mo.call(this,t,new Ao(t.b(Sn))),this.query.table=n}function Ho(t){this.query=t,this.Ha=null}function Jo(t){Ho.call(this,t)}function Ko(t){Ho.call(this,t)}function Vo(t,n,e){this.Ha=t,this.le=n,this.Vb=e}function Wo(t,n){Ho.call(this,t),this.Vb=n}function $o(){}function Zo(){this.Sc=xn()}function Xo(t,n,e,i){var r=e;if(function(t,n){var e=Pe(n,0);return e instanceof ao&&(null==t.eb||(n=n.O instanceof kr,t=t.eb.has(e.O.W()),n||!t))}(n,e))r=function(t){var n=Pe(t,0);return Ar(t),function(t,n){Be(t).slice().forEach((function(e){t.removeChild(e),Fe(n,e)})),Fe(t,n)}(n,t),n}(e),Xo(t,n,e,i);else if(function(t){return(t=Pe(t,0))instanceof so||t instanceof vo}(e)){var o=[];r=function(t,n,e){var i=Pe(t,0),r=Be(i).slice();return r.some((function(t){return n(t)}))?(Ar(t),r.forEach((function(r,o){if(n(r)){var a=e(t);Ue(i,o),Fe(a,r),Ge(i,a,o)}})),i):t}(e,i,(function(t){return t=new ao(t.O),o.push(t),t})),o.forEach((function(t){Xo(this,n,t,i)}),t)}return r}function Yo(t,n){Ho.call(this,t),this.Vb=n,this.kf=this.cf=this.tf=this.ff=this.De=this.Se=this.sf=this.Je=this.vf=null}function Qo(){this.re=[new mo,new wo,new Zo,new $o],this.Pd=[new mo]}function ta(t){Vr.call(this,0,1),this.U=t}function na(t,n){Vr.call(this,0,-1),this.table=n,this.C=t.b(gn)}function ea(t,n){Vr.call(this,0,-1),this.V=t.b(mn),this.C=t.b(gn),this.table=n}function ia(t){this.c=t}function ra(t){Vr.call(this,0,1),this.Re=t}function oa(t,n,e){Vr.call(this,0,0),this.C=t.b(gn),this.V=t.b(mn),this.O=n,this.Rb=e,this.Dd="eq"==this.O.F?0:2,this.Ue=null}w("lf.schema.DataStoreType",Dr),Dr.INDEXED_DB=0,Dr.MEMORY=1,Dr.LOCAL_STORAGE=2,Dr.FIREBASE=3,Dr.WEB_SQL=4,Dr.OBSERVABLE_STORE=5,Lr.prototype.j=function(){return this.mc+"."+this.name},w("lf.schema.Table",Pr),Pr.prototype.getName=e("A"),Pr.prototype.getName=Pr.prototype.getName,Pr.prototype.rc=function(t){var n=new this.constructor(this.A);return n.Ka=t,n.Ig=this.Ig,n},Pr.prototype.as=Pr.prototype.rc,Pr.prototype.createRow=Pr.prototype.xb,Pr.prototype.deserializeRow=Pr.prototype.kb,Pr.prototype.Da=e("ta"),Pr.prototype.getIndices=Pr.prototype.Da,Pr.prototype.lb=e("K"),Pr.prototype.getColumns=Pr.prototype.lb,Pr.prototype.getConstraint=Pr.prototype.Ne,Pr.prototype.Cb=e("rd"),Pr.prototype.persistentIndex=Pr.prototype.Cb,(r=Ur.prototype).getName=function(){return this.Lb+"("+this.child.getName()+")"},r.j=function(){return this.Lb+"("+this.child.j()+")"},r.I=function(){return this.child.I()},r.toString=function(){return this.j()},r.G=function(){return this.child.G()},r.Da=function(){return[]},r.Ca=i(null),r.hc=i(!1),r.rc=function(t){return this.Ka=t,this},Ur.prototype.as=Ur.prototype.rc,(r=Hr.prototype).getName=i("*"),r.j=function(){return this.getName()},r.toString=function(){return this.j()},r.I=e("U"),r.G=i(4),r.Da=function(){return[]},r.Ca=i(null),r.hc=i(!1),w("lf.fn.avg",(function(t){return new Ur(t,"AVG")})),w("lf.fn.count",Jr),w("lf.fn.distinct",Kr),w("lf.fn.max",(function(t){return new Ur(t,"MAX")})),w("lf.fn.min",(function(t){return new Ur(t,"MIN")})),w("lf.fn.stddev",(function(t){return new Ur(t,"STDDEV")})),w("lf.fn.sum",(function(t){return new Ur(t,"SUM")})),w("lf.fn.geomean",(function(t){return new Ur(t,"GEOMEAN")})),_(Vr,Re),Vr.prototype.exec=function(t,n){switch(this.Uf){case 1:return function(t,n,e){return Pe(t,0).exec(n,e).then(function(t){return this.ca(t,n,e)}.bind(t))}(this,t,n);case 0:return function(t,n,e){var i=Be(t).map((function(t){return t.exec(n,e)}));return ot(i).then(function(t){var i=[];return t.forEach((function(t){for(var n=0;n<t.length;++n)i.push(t[n])})),this.ca(i,n,e)}.bind(t))}(this,t,n);default:return function(t,n,e){return new Y(function(t){t(this.ca([],n,e))}.bind(t))}(this,t,n)}},Vr.prototype.toString=i("dummy_node"),Vr.prototype.Pc=function(){return this.toString()},_(Wr,Vr),Wr.prototype.toString=function(){return"aggregation("+this.Ce.map((function(t){return t.j()})).toString()+")"},Wr.prototype.ca=function(t){return t.forEach((function(t){!function(t){t.K.forEach((function(t){t=zr(t).reverse();for(var n=1;n<t.length;n++){var e=t[n],i=zr(e).slice(-1)[0],r=e.child instanceof Ur?ge(this.Na,e.child):this.Na;if(null!==r.$a&&r.$a.has(e.j()))break;r=Zr(e.Lb,r,i),null===(i=this.Na).$a&&(i.$a=on()),i.$a.set(e.j(),r)}}),t)}(new $r(t,this.Ce))}),this),t},to.prototype.bb=e("Ha"),to.prototype.da=e("aa"),_(no,Re),_(eo,no),_(io,eo),_(ro,no),ro.prototype.toString=function(){return"delete("+this.table.getName()+")"},_(oo,no),oo.prototype.toString=function(){return"update("+this.table.getName()+")"},_(ao,no),ao.prototype.toString=function(){return"select("+this.O.toString()+")"},_(uo,no),uo.prototype.toString=function(){var t="table_access("+this.table.getName();return null===this.table.Ka||(t+=" as "+this.table.Ka),t+")"},_(so,no),so.prototype.toString=i("cross_product"),_(co,no),co.prototype.toString=function(){var t="project("+this.f.toString();if(null!==this.Pb){var n=this.Pb.map((function(t){return t.j()})).join(", ");t=t+", groupBy("+n+")"}return t+")"},_(ho,no),ho.prototype.toString=function(){return"order_by("+ti(this.N)+")"},_(lo,no),lo.prototype.toString=function(){return"aggregation("+this.f.toString()+")"},_(fo,no),fo.prototype.toString=function(){return"group_by("+this.f.toString()+")"},_(po,no),po.prototype.toString=function(){return"limit("+this.X+")"},_(yo,no),yo.prototype.toString=function(){return"skip("+this.L+")"},_(vo,no),vo.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.O.toString()+")"},_(mo,bo),mo.prototype.gb=function(t){return this.H=t,this.ub(this.H),this.H},mo.prototype.ub=function(t){if(t instanceof ao){var n=function(t,n){var e=null,i=null;return n.map((function(t,n){t=new ao(t),0==n?e=t:Fe(i,t),i=t}),t),[e,i]}(this,n=go(this,t.O));qr(t,t,n[0],n[1]),t==this.H&&(this.H=n[0]),t=n[0]}Be(t).forEach((function(t){this.ub(t)}),this)},_(wo,bo),wo.prototype.gb=function(t,n){return 3>n.from.length?t:(this.H=t,this.ub(this.H),this.H)},wo.prototype.ub=function(t){if(t instanceof so)for(;2<Be(t).length;){for(var n=new so,e=0;2>e;e++)Fe(n,Ue(t,0));Ge(t,n,0)}Be(t).forEach((function(t){this.ub(t)}),this)},_(_o,Vr),_o.prototype.toString=i("cross_product"),_o.prototype.ca=function(t){var n=t[0],e=t[1];t=[];for(var i=n.u(),r=e.u(),o=0;o<n.entries.length;o++)for(var a=0;a<e.entries.length;a++){var u=xe(n.entries[o],i,e.entries[a],r);t.push(u)}return[new ve(t,n=n.u().concat(e.u()))]},_(Eo,ei),Eo.prototype.getPriority=i(2),Eo.prototype.ge=function(t){0==this.G()?function(t,n){t.td.forEach((function(t,e){t instanceof Qe&&uu(this.Ib,t,n[e])}),t)}(this,t):this.Mc()},Eo.prototype.Mc=function(){var t=au(this.Ib,this.da());0!=t.length&&(t=new ii(this.global,t),Wa(this.Ia,t))},_(So,$e),So.prototype.da=function(){var t=xn();return t.add(this.from),To(this,this.from.getName(),t),t},So.prototype.clone=function(){var t=new So(this.ba);return Xe(t,this),t.from=this.from,t},So.prototype.bind=function(t){return So.hb.bind.call(this,t),Ye(this,t),this},_(No,$e),No.prototype.da=function(){var t=xn();t.add(this.La);var n=this.ba.info();return wu(this.La.getName(),n.gf).forEach(t.add.bind(t)),this.ac&&_u(n,this.La.getName()).forEach(t.add.bind(t)),t},No.prototype.clone=function(){var t=new No(this.ba);return Xe(t,this),t.La=this.La,this.values&&(t.values=this.values instanceof Ce?this.values:this.values.slice()),t.ac=this.ac,t.bc=this.bc,t},No.prototype.bind=function(t){return No.hb.bind.call(this,t),this.bc&&(this.values=this.bc instanceof Ce?t[this.bc.Ca()]:this.bc.map((function(n){return n instanceof Ce?t[n.Ca()]:n}))),this},_(Ao,$e),Ao.prototype.da=function(){var t=xn();t.add(this.table);var n=this.set.map((function(t){return t.J.j()})),e=this.ba.info();return function(t,n){var e=xn();return n.forEach((function(t){(t=this.Ie.get(t))&&e.add(t)}),t),Cn(e).map((function(t){return this.g.table(t)}),t)}(e,n).forEach(t.add.bind(t)),function(t,n){var e=xn();return n.forEach((function(t){(t=this.He.get(t))&&t.forEach((function(t){e.add(t)}))}),t),Cn(e).map((function(t){return this.g.table(t)}),t)}(e,n).forEach(t.add.bind(t)),t},Ao.prototype.clone=function(){var t=new Ao(this.ba);return Xe(t,this),t.table=this.table,t.set=this.set?function(t){return t.map((function(t){var n,e={};for(n in t)e[n]=t[n];return e}))}(this.set):this.set,t},Ao.prototype.bind=function(t){return Ao.hb.bind.call(this,t),this.set.forEach((function(n){-1!=n.Tc&&(n.value=t[n.Tc])})),Ye(this,t),this},w("lf.query.BaseBuilder",Mo),Mo.prototype.exec=function(){try{this.ab()}catch(t){return it(t)}return new Y((function(t,n){var e=new Eo(this.global,[this.Bc()]);Wa(this.Ia,e).then((function(n){t(be(n[0]))}),n)}),this)},Mo.prototype.exec=Mo.prototype.exec,Mo.prototype.Wf=function(){var t=function(t){return t.Pc(this.query)+"\n"}.bind(this);return function(t,n){var e=n||function(t){return t.toString()+"\n"},i="";return ze(t,(function(t){for(var n=0;n<Le(t);n++)i+="-";i+=e(t)})),i}(Ro(this).bb(),t)},Mo.prototype.explain=Mo.prototype.Wf,Mo.prototype.bind=function(t){return this.query.bind(t),this},Mo.prototype.bind=Mo.prototype.bind,Mo.prototype.Pg=function(t){return jo(this,t)},Mo.prototype.toSql=Mo.prototype.Pg,Mo.prototype.ab=function(){},Mo.prototype.Bc=function(){return{context:this.query.clone(),je:Ro(this)}},_(Do,Mo),w("lf.query.DeleteBuilder",Do),Do.prototype.from=function(t){if(null!=this.query.from)throw new Hn(515);return this.query.from=t,this},Do.prototype.from=Do.prototype.from,Do.prototype.w=function(t){return this.Fd(),this.query.w=t,this},Do.prototype.where=Do.prototype.w,Do.prototype.Fd=function(){if(null==this.query.from)throw new Hn(548);if(null!=this.query.w)throw new Hn(516)},Do.prototype.ab=function(){if(Do.hb.ab.call(this),null==this.query.from)throw new Hn(517)},_(Lo,Mo),w("lf.query.InsertBuilder",Lo),Lo.prototype.ab=function(){Lo.hb.ab.call(this);var t=this.query;if(null==t.La||null==t.values)throw new Hn(518);if(t.ac&&null===t.La.Mb.sd)throw new Hn(519)},Lo.prototype.La=function(t){if(null!=this.query.La)throw new Hn(520);return this.query.La=t,this},Lo.prototype.into=Lo.prototype.La,Lo.prototype.values=function(t){if(null!=this.query.values)throw new Hn(521);return t instanceof Ce||t.some((function(t){return t instanceof Ce}))?this.query.bc=t:this.query.values=t,this},Lo.prototype.values=Lo.prototype.values,w("lf.op.and",Bo),w("lf.op.or",(function(t){return Po("or",Array.prototype.slice.call(arguments))})),w("lf.op.not",(function(t){return t.vd(!0),t})),_(Go,Mo),w("lf.query.SelectBuilder",Go),Go.prototype.ab=function(){Go.hb.ab.call(this);var t=this.query;if(null==t.from)throw new Hn(522);if(a(t.Sb)&&!a(t.X)||a(t.Zb)&&!a(t.L))throw new Hn(523);null!=this.query.ra?function(t){if(t.query.ra.some((function(t){return 6==(t=t.G())||0==t})))throw new Hn(525)}(this):function(t){var n=t.query.f.some((function(t){return t instanceof Ur}),t);if(t=t.query.f.some((function(t){return!(t instanceof Ur)}),t)||0==t.query.f.length,n&&t)throw new Hn(526)}(this)},Go.prototype.from=function(t){if(this.Me)throw new Hn(515);return this.Me=!0,null==this.query.from&&(this.query.from=[]),this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments)),this},Go.prototype.from=Go.prototype.from,Go.prototype.w=function(t){if(Fo(this,548),this.Ad)throw new Hn(516);return this.Ad=!0,Uo(this,t),this},Go.prototype.where=Go.prototype.w,Go.prototype.hg=function(t,n){if(Fo(this,542),this.Ad)throw new Hn(547);return this.query.from.push(t),Uo(this,n),this},Go.prototype.innerJoin=Go.prototype.hg,Go.prototype.og=function(t,n){if(Fo(this,542),!(n instanceof kr))throw new Hn(541);if(this.Ad)throw new Hn(547);this.query.from.push(t),null==this.query.eb&&(this.query.eb=xn());var e=n;return Gr(t)!=Gr(n.ma.I())&&(e=n.reverse()),this.query.eb.add(e.W()),Uo(this,e),this},Go.prototype.leftOuterJoin=Go.prototype.og,Go.prototype.X=function(t){if(null!=(this.query.X||this.query.Sb))throw new Hn(528);if(t instanceof Ce)this.query.Sb=t;else{if(0>t)throw new Hn(531);this.query.X=t}return this},Go.prototype.limit=Go.prototype.X,Go.prototype.L=function(t){if(null!=(this.query.L||this.query.Zb))throw new Hn(529);if(t instanceof Ce)this.query.Zb=t;else{if(0>t)throw new Hn(531);this.query.L=t}return this},Go.prototype.skip=Go.prototype.L,Go.prototype.N=function(t,n){return Fo(this,549),null==this.query.N&&(this.query.N=[]),this.query.N.push({J:t,order:null!=n?n:1}),this},Go.prototype.orderBy=Go.prototype.N,Go.prototype.ra=function(t){if(Fo(this,549),null!=this.query.ra)throw new Hn(530);return null==this.query.ra&&(this.query.ra=[]),this.query.ra.push.apply(this.query.ra,Array.prototype.slice.call(arguments)),this},Go.prototype.groupBy=Go.prototype.ra,Go.prototype.clone=function(){var t=new Go(this.global,this.query.f);return t.query=this.query.clone(),t.query.Wc=null,t},Go.prototype.clone=Go.prototype.clone,_(zo,Mo),w("lf.query.UpdateBuilder",zo),zo.prototype.set=function(t,n){return t={Tc:n instanceof Ce?n.Ca():-1,J:t,value:n},null!=this.query.set?this.query.set.push(t):this.query.set=[t],this},zo.prototype.set=zo.prototype.set,zo.prototype.w=function(t){return this.Fd(),this.query.w=t,this},zo.prototype.where=zo.prototype.w,zo.prototype.Fd=function(){if(null!=this.query.w)throw new Hn(516)},zo.prototype.ab=function(){if(zo.hb.ab.call(this),null==this.query.set)throw new Hn(532);if(this.query.set.some((function(t){return t.value instanceof Ce})))throw new Hn(501)},Ho.prototype.gc=function(){return null===this.Ha&&(this.Ha=this.ad()),this.Ha},_(Jo,Ho),Jo.prototype.ad=function(){return this.query.ac?new io(this.query.La,this.query.values):new eo(this.query.La,this.query.values)},_(Ko,Ho),Ko.prototype.ad=function(){var t=new oo(this.query.table),n=null!=this.query.w?new ao(this.query.w.Nb()):null,e=new uo(this.query.table);return null===n?Fe(t,e):(Fe(n,e),Fe(t,n)),t},Vo.prototype.gc=function(){return this.Vb.forEach((function(t){this.Ha=t.gb(this.Ha,this.le)}),this),this.Ha},_(Wo,Ho),Wo.prototype.ad=function(){var t=new ro(this.query.from),n=null!=this.query.w?new ao(this.query.w.Nb()):null,e=new uo(this.query.from);return null===n?Fe(t,e):(Fe(n,e),Fe(t,n)),new Vo(t,this.query,this.Vb).gc()},_($o,bo),$o.prototype.gb=function(t,n){return 2>n.from.length?t:(this.H=t,this.ub(this.H,n),this.H)},$o.prototype.ub=function(t,n){if(t instanceof ao&&t.O instanceof kr){var e=t.O.W(),i=Pe(t,0);i instanceof so&&(e=null!=n.eb&&n.eb.has(e),qr(t,i,e=new vo(t.O,e),e),t==this.H&&(this.H=e),t=e)}Be(t).forEach((function(t){this.ub(t,n)}),this)},_(Zo,bo),Zo.prototype.gb=function(t,n){return a(n.w)?(this.Sc.clear(),this.H=t,this.ub(this.H,n),this.Sc.clear(),this.H):t},Zo.prototype.ub=function(t,n){var e=function(t){Be(t).forEach(i)}.bind(this),i=function(t){if(!this.Sc.has(t)){if(t instanceof ao){var r=t.O.u(),o=function(t){return function(t,n,e){var i=xn();return function(t){return xr(t,(function(t){return null===t.h}))}(n).forEach((function(t){i.add(t.table)}),t),n instanceof uo&&i.add(n.table),function(t,n){if(n.size>t.size)return!1;var e=!0;return n.forEach((function(n){e=e&&t.has(n)})),e}(i,e)}(this,t,r)}.bind(this);o=Xo(this,n,t,o),this.Sc.add(t),o!=t&&(null===o.getParent()&&(this.H=o),i(o))}e(t)}}.bind(this);i(t)},_(Yo,Ho),Yo.prototype.ad=function(){return function(t){t.vf=t.query.from.map((function(t){return new uo(t)}),t)}(this),2<=this.query.from.length&&(this.Je=new so),this.sf=null!=this.query.w?new ao(this.query.w.Nb()):null,this.query.N&&(this.ff=new ho(this.query.N)),null!=this.query.L&&0<this.query.L&&(this.tf=new yo(this.query.L)),null!=this.query.X&&(this.cf=new po(this.query.X)),null!=this.query.ra&&(this.Se=new fo(this.query.ra)),function(t){var n=t.query.f.filter((function(t){return t instanceof Ur}));null!=t.query.N&&t.query.N.forEach((function(t){t.J instanceof Ur&&n.push(t.J)})),0<n.length&&(t.De=new lo(n))}(this),this.kf=new co(this.query.f||[],this.query.ra||null),new Vo(function(t){for(var n=[t.cf,t.tf,t.kf,t.ff,t.De,t.Se,t.sf,t.Je],e=-1,i=null,r=0;r<n.length;r++){var o=n[r];null!==o&&(null===i?i=o:Fe(n[e],o),e=r)}return t.vf.forEach((function(t){Fe(n[e],t)})),i}(this),this.query,this.Vb).gc()},Qo.prototype.create=function(t){var n;if(t instanceof No)n=new Jo(t);else if(t instanceof So)n=new Wo(t,this.Pd);else if(t instanceof Qe)n=new Yo(t,this.re);else{if(!(t instanceof Ao))throw new Hn(513);n=new Ko(t)}return new to(n=n.gc(),t.da())},_(ta,Vr),ta.prototype.toString=function(){return"delete("+this.U.getName()+")"},ta.prototype.ca=function(t,n){return t=t[0].entries.map((function(t){return t.va})),n.remove(this.U,t),[_e()]},_(na,Vr),na.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"},na.prototype.ca=function(){var t=this.C.get(Fr(this.table)),n=new ve([],[this.table.getName()]),e=Jr();return t=t.Y().ia,null===n.$a&&(n.$a=on()),n.$a.set(e.j(),t),[n]},_(ea,Vr),ea.prototype.toString=function(){var t="table_access("+this.table.getName();return null===this.table.Ka||(t+=" as "+this.table.Ka),t+")"},ea.prototype.ca=function(){var t=this.C.get(Fr(this.table)).Va();return[Ee(Pi(this.V,t),[Gr(this.table)])]},_(ia,bo),ia.prototype.gb=function(t,n){return this.H=t,this.Hd(n)?(qr(t=xr(t,(function(t){return t instanceof ea}))[0],t,n=new na(this.c,t.table),n),this.H):t},ia.prototype.Hd=function(t){return 1==t.f.length&&1==t.from.length&&null==t.w&&null==t.X&&null==t.L&&null==t.ra&&(t=t.f[0])instanceof Ur&&"COUNT"==t.Lb&&t.child instanceof Hr},_(ra,Vr),ra.prototype.toString=function(){return"groupBy("+this.Re.map((function(t){return t.j()})).toString()+")"},ra.prototype.ca=function(t){return function(t,n){var e=new Jn,i=function(t){return this.Re.map((function(n){return Ae(t,n)}),this).join(",")}.bind(t);return n.entries.forEach((function(t){e.set(i(t),t)}),t),e.keys().map((function(t){return new ve(e.get(t),n.u())}),t)}(this,t[0])},_(oa,Vr);var aa,ua=["hash","index_nested_loop","nested_loop"];function sa(t){Vr.call(this,0,-1),this.lf=t}function ca(){}function ha(t){t=t.map((function(t){return t.qa()})),t=Tt.apply(null,t);var n=[];return function(t,n){if(h(t))try{k(t,n,void 0)}catch(t){if(t!==Et)throw t}else{t=function(t){if(t instanceof St)return t;if("function"==typeof t.pc)return t.pc(!1);if(h(t)){var n=0,e=new St;return e.next=function(){for(;;){if(n>=t.length)throw Et;if(n in t)return t[n++];n++}},e}throw Error("Not implemented")}(t);try{for(;;)n.call(void 0,t.next(),void 0,t)}catch(t){if(t!==Et)throw t}}}(t,(function(t){n.push(t)})),n}function la(t){this.Qb=t}function fa(t,n){this.Qb=t,this.Ga=n,this.Ld=this.af=null}function pa(t,n){this.xd=n,this.C=t.b(gn)}function da(t){return t=t.C.get(Fr(t.xd)),Math.floor(.02*t.Y().ia)}function ya(t,n,e){if(0==(e=e.filter(t.kg,t)).length)return null;if(t=function(t,n){return t.xd.Da().map((function(t){return function(t,n){n.forEach((function(t){var n=t.lb()[0].getName();this.eg.has(n)&&(null===this.Ga&&(this.Ga=new Jn),this.Ga.set(n,t.W()))}),t)}(t=new va(this.C,t),n),t}),t).filter((function(t){if(null===t.Ga)t=!1;else{for(var n=!1,e=!0,i=0;i<t.cb.f.length;i++){var r=t.Ga.has(t.cb.f[i].ba.getName());if(n&&r){e=!1;break}r||(n=!0)}t=e}return t}))}(t,e),0==t.length)return null;if(1==t.length)return t[0];var i=Number.MAX_VALUE;return t.reduce((function(t,e){var r=function(t,n){n=ba(t).bd(n);var e=t.C.get(t.cb.j());return n.reduce((function(t,n){return t+e.Zc(n)}),0)}(e,n);return r<i?(i=r,e):t}),null)}function va(t,n){this.C=t,this.cb=n,this.eg=xn(this.cb.f.map((function(t){return t.ba.getName()}))),this.$d=this.Ga=null}function ba(t){return null===t.$d&&(t.$d=new fa(t.cb,t.Ga)),t.$d}function ma(t,n,e,i){Vr.call(this,0,-1),this.C=t.b(gn),this.index=n,this.$e=e,this.pe=i,this.Rc=this.Qc=!1}function ga(){Vr.call(this,0,0)}function wa(t){Vr.call(this,0,1),this.jc=t}function _a(t,n){Vr.call(this,0,1),this.V=t.b(mn),this.U=n}function Ea(t){this.c=t}function Sa(t,n){Vr.call(this,0,-1),this.C=t.b(gn),this.U=n}function Ta(t,n,e){if(null!==(t=t.Mb.sd)&&t.f[0].autoIncrement){var i=t.f[0].ba.getName(),r=null===(e=e.get(t.j()).Y().Fc)?0:e;n.forEach((function(t){0!=t.m[i]&&null!=t.m[i]||(r++,t.m[i]=r)}))}}function Na(t,n){Vr.call(this,0,-1),this.C=t.b(gn),this.U=n}function Aa(){Vr.call(this,0,1)}function qa(t){Vr.call(this,0,1),this.N=t}function xa(t,n){this.Na=t,this.K=n}function Ca(t){return t.K.some((function(t){return t instanceof Ur}),t)?function(t){if(1==t.K.length&&"DISTINCT"==t.K[0].Lb)return t=ge(t.Na,t.K[0]).entries.map((function(t){var n=new Se(new sn(-1,{}),1<this.Na.M.size);return qe(n,this.K[0],Ae(t,this.K[0].child)),n}),t),new ve(t,[]);var n=new Se(new sn(-1,{}),1<t.Na.M.size);return t.K.forEach((function(t){var e=t instanceof Ur?ge(this.Na,t):Ae(this.Na.entries[0],t);qe(n,t,e)}),t),new ve([n],t.Na.u())}(t):function(t){var n=Array(t.Na.entries.length),e=1<t.Na.M.size;return t.Na.entries.forEach((function(t,i){n[i]=new Se(new sn(t.va.id(),{}),e),this.K.forEach((function(e){qe(n[i],e,Ae(t,e))}),this)}),t),new ve(n,t.Na.u())}(t)}function ka(t,n){return new ve(t.map((function(t){return Ca(new xa(t,n)).entries[0]})),t[0].u())}function Ia(t,n){Vr.call(this,0,1),this.f=t,this.Pb=n}function Oa(){Vr.call(this,0,1)}function ja(){}function Ma(t){this.c=t}function Ra(t,n,e){if(1!=(i=(n=Ze(e,n.jc)).u()).size)return null;var i=Cn(i)[0],r=new pa(t.c,i),o=null;return Be(n).every((function(t){return null===(t=ya(r,e,[t]))||(null===o?o=[t]:o.push(t)),null!==t}))?o:null}function Da(t){this.c=t}function La(t,n){return t.f.length==n.length&&n.every((function(n,e){return n.J.getName()==t.f[e].ba.getName()}))?(n=function(t,n){var e=t.reduce((function(t,n){return t<<1|(0==n.order?0:1)}),0),i=n.f.reduce((function(t,n){return t<<1|(0==n.order?0:1)}),0);return[0==(e^=i),e==Math.pow(2,Math.max(t.length,n.f.length))-1]}(n,t),n[0]||n[1]?{cb:t,Xe:n[1]}:null):null}function Ba(t,n,e){this.Ha=t,this.le=n,this.Vb=e}function Pa(t){Vr.call(this,0,1),this.U=t}function Ga(t){this.c=t,this.re=[new ca,new Ea(this.c),new Ma(this.c),new Da(this.c),new ja,new ia(this.c)],this.Pd=[new Ea(this.c)]}function Fa(t,n,e,i){return t=Nr(n.bb(),t.tg.bind(t)),null!=i&&(t=new Ba(t,e,i).gc()),new ni(t,n.da())}function Ua(t){this.qg=new Qo,this.Eg=new Ga(t)}function za(){this.df=on()}function Ha(t,n){var e=t.df.get(n.getName())||null;return null===e&&(e=new Ka,t.df.set(n.getName(),e)),e}function Ja(t,n,e,i){var r=function(t,n,e,i){var r=!0;return e.forEach((function(t){if(r){var e=null===(t=Ha(this,t)).Ya||0==t.Ya.size;r=0==i?(null===t.Yb||0==t.Yb.size)&&e&&null===t.wc&&null!==t.fb&&t.fb==n:3==i?null===t.wc&&null===t.fb&&null!==t.Ya&&t.Ya.has(n):1==i?null===t.fb:e&&(null===t.fb||t.fb==n)}}),t),r}(t,n,e,i);return r&&function(t,n,e,i){e.forEach((function(t){t=Ha(this,t),0==i?(t.fb=null,t.wc=n):3==i?(null===t.Yb&&(t.Yb=xn()),t.Yb.add(n),null===t.Ya&&(t.Ya=xn()),t.Ya.delete(n)):1==i?(null===t.Ya&&(t.Ya=xn()),t.Ya.add(n)):2==i&&(t.fb=n)}),t)}(t,n,e,i),r}function Ka(){this.Yb=this.Ya=this.fb=this.wc=null}function Va(){this.Ub=new Xa,this.Ec=new za}function Wa(t,n){return(2>n.getPriority()||2>n.getPriority())&&function(t,n){n.forEach((function(t){Ha(this,t).fb=null}),t)}(t.Ec,n.da()),t.Ub.Ab(n),$a(t),n.Db.ha}function $a(t){for(var n=t.Ub.qa(),e=0;e<n.length;e++){var i=n[e];if(0==i.G()?Za(t,i,1,3):Za(t,i,2,0)){t.Ub.remove(i);var r=t;i.exec().then(r.Bg.bind(r,i),r.Ag.bind(r,i))}}}function Za(t,n,e,i){var r=!1;return Ja(t.Ec,n.W(),n.da(),e)&&(r=Ja(t.Ec,n.W(),n.da(),i)),r}function Xa(){this.Ub=[]}function Ya(){this.Nc=on()}function Qa(){return aa||(aa=new Ya),aa}function tu(t,n,e,i){return null!=t?null!=n?function(t,n,e,i){var r=eu(t);if(t=[],null!=r){var o=null;try{o=r.b(Sn).table(n)}catch(t){}null!=o&&(n=r.b(gn),r=r.b(mn),(e=n.get(Fr(o)).Va(void 0,!1,e,i)).length&&(t=Pi(r,e).map((function(t){return t.m}))))}return nu(t)}(t,n,e,i):function(t){t=eu(t);var n={};if(null!=t){var e=t.b(gn);t.b(Sn).oa().forEach((function(t){n[t.getName()]=e.get(Fr(t)).Y().ia}))}return nu(n)}(t):function(){var t={};return an(Qa().Nc).forEach((function(n){"ns_"==n.substring(0,3)&&(n=n.substring(3),t[n]=eu(n).b(Sn).version())})),nu(t)}()}function nu(t){var n="";try{n=JSON.stringify(t)}catch(t){}return n}function eu(t){var n=Qa();return t=new vn("ns_"+t),n.md(t)?n.b(t):null}function iu(t,n){this.Qd=Ie(),this.me=t,this.od=n,this.K=function(t){if(0<t.me.f.length)return t.me.f;var n=[];return t.me.from.forEach((function(t){t.lb().forEach((function(t){n.push(t)}))})),n}(this)}function ru(t,n,e,i){return{addedCount:e,index:t,object:i,removed:n,type:"splice"}}function ou(){this.fc=on()}function au(t,n){var e=xn();n.forEach((function(t){e.add(t.getName())}));var i=[];return t.fc.forEach((function(t){(t=t.Bc()).context.from.some((function(t){return e.has(t.getName())}))&&i.push(t)})),i}function uu(t,n,e){n=p(null!=n.Wc?n.Wc:n).toString(),null!==(t=t.fc.get(n)||null)&&function(t,n){var e=function(t,n,e){var i=null===n?[]:n.entries,r=bt(i,e.entries,t.$.bind(t),(function(t){return i[t]}));n=[];for(var o=0,a=0;a<i.length;a++){var u=i[a];r[o]==u?o++:(u=ru(a,u=t.od.splice(o,1),0,t.od),n.push(u))}for(r=bt(i,e.entries,t.$.bind(t),(function(t,n){return e.entries[n]})),a=o=0;a<e.entries.length;a++)u=e.entries[a],r[o]==u?o++:(t.od.splice(a,0,u.va.m),u=ru(a,[],1,t.od),n.push(u));return n}(t.Rf,t.bf,n);t.bf=n,0<e.length&&t.Hc.forEach((function(t){t(e)}))}(t,e)}function su(t){this.Hf=t,this.Hc=xn(),this.yg=[],this.bf=null,this.Rf=new iu(t.query,this.yg)}function cu(t){this.c=t,this.g=t.b(Sn),this.aa=xn(this.g.oa()),this.Db=at()}function hu(t,n){this.c=t,this.g=t.b(Sn),this.aa=xn(this.g.oa()),this.Db=at(),this.Ba=n,this.Oa=t.b(bn),this.V=t.b(mn),this.C=t.b(gn)}function lu(t,n){this.c=t,this.Oa=t.b(bn),this.Ia=t.b(_n),this.Ib=t.b(En),this.aa=xn(n),this.Ra=new re(this.c,this.aa),this.Db=at(),this.xc=at(),this.ze=at()}function fu(t){this.c=t,this.Ia=t.b(_n),this.Kb=null,this.Ta=0,0==pu.size&&(pu.set(0,xn([1,4])),pu.set(1,xn([2])),pu.set(2,xn([3,5,6])),pu.set(3,xn([2,7])),pu.set(4,xn([7])),pu.set(5,xn([7])),pu.set(6,xn([7])))}oa.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+ua[this.Dd]+", "+this.O.toString()+")"},oa.prototype.ca=function(t){switch(this.Dd){case 0:return[jr(this.O,t[0],t[1],this.Rb)];case 1:return[Mr(this.O,t[0],t[1],this.Ue,this.V)];default:var n=this.O,e=t[0];t=t[1];var i=this.Rb,r=[e,t];i||(r=Ir(n,e,t)),e=r[0],t=r[1],r=[];for(var o=e.u(),a=t.u(),u=e.entries.length,s=t.entries.length,c=s+256-1>>8,h=0;h<c;){for(var l=0;l<u;l++){var f=!1,p=Ae(e.entries[l],n.ga);if(null!==p)for(var d=Math.min(h+1<<8,s),y=h<<8;y<d;y++)if(n.vc(p,Ae(t.entries[y],n.ma))){f=!0;var v=xe(e.entries[l],o,t.entries[y],a);r.push(v)}i&&!f&&r.push(Or(n,e.entries[l],o))}h++}return[new ve(r,n=e.u().concat(t.u()))]}},_(sa,Vr),sa.prototype.toString=function(){return"no_op_step("+this.lf[0].u().join(",")+")"},sa.prototype.ca=e("lf"),_(ca,bo),ca.prototype.gb=function(t,n){return this.H=t,this.Hd(n)?(xr(t,(function(t){return t instanceof oa})).forEach(this.Gg,this),this.H):t},ca.prototype.Hd=function(t){return 1<t.from.length},ca.prototype.Gg=function(t){if("eq"==t.O.F&&!t.Rb){var n=(e=function(n){return n instanceof ea?null===(n=Gr(n.table)==Gr(t.O.ma.I())?t.O.ma:t.O.ga).Ca()?null:n:null})(Pe(t,0)),e=e(Pe(t,1));if(null!==n||null!==e){!function(t,n){t.Dd=1;var e=t.C.get(n.Ca().j());t.Ue={dg:n,wg:n==t.O.ga?t.O.ma:t.O.ga,index:e}}(t,e=null===e?n:e);var i=new ve([],[Gr(e.I())]);!function(t,n,e){Pe(t,e).D=null,n.D=t,t.h[e]=n}(t,new sa([i]),e==n?0:1)}}},la.prototype.bd=function(){return 1==this.Qb.f.length?[he()]:[this.Qb.f.map((function(){return he()}))]},fa.prototype.bd=function(t){if(this.af==t)return this.Ld;for(var n=function(t,n){var e=on();return t.Ga.keys().forEach((function(t){var i=this.Ga.get(t).map((function(t){return Ze(n,t)}),this),r=new ye([he()]);i.forEach((function(t){r=function(t,n){var e=[];return t.qa().map((function(t){return n.qa().map((function(n){var e;if(ce(t,n)){e=he();var i=0==(i=pe(t.from,n.from,!0))?t.ea?t:n:-1!=i?t:n;e.from=i.from,e.ea=i.ea,n=t.o==se||n.o==se?t.o==se?n:t:0==(i=pe(t.o,n.o,!1))?t.na?t:n:-1==i?t:n,e.o=n.o,e.na=n.na}else e=null;return e}))})).forEach((function(t){e=e.concat(t)})),new ye(e.filter((function(t){return null!==t})))}(r,t.we())})),e.set(t,r)}),t),e}(this,t),e=this.Qb.f.length-1;0<=e;e--){var i=this.Qb.f[e];if(null!==(n.get(i.ba.getName())||null))break;n.set(i.ba.getName(),new ye([he()]))}return this.Ld=1==this.Qb.f.length?un(n)[0].qa():ha(function(t,n){var e=on(),i=0;return t.Qb.f.forEach((function(t){e.set(t.ba.getName(),i),i++})),an(n).sort((function(t,n){return e.get(t)-e.get(n)})).map((function(t){return n.get(t)}))}(this,n)),this.af=t,this.Ld},pa.prototype.kg=function(t){return t instanceof Ke?!(!t.ld()||t.J.I()!=this.xd||"in"==t.F&&t.value.length>da(this)):t instanceof Cr&&!(!t.ld()||Pe(t,0).J.I()!=this.xd)&&Be(t).length<=da(this)},_(ma,Vr),ma.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.pe?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"},ma.prototype.Pc=function(t){var n=this.toString(),e=this.$e.bd(t);return n=n.replace("?",e.toString()),this.Qc&&(n=n.replace("?",t.X.toString())),this.Rc&&(n=n.replace("?",t.L.toString())),n},ma.prototype.ca=function(t,n,e){return t=this.$e.bd(e),n=this.C.get(this.index.j()),[Ee(e=(1==t.length&&t[0]instanceof ue&&fe(t[0])?zi(n.get(t[0].from),!1,this.Qc?e.X:void 0,this.Rc?e.L:void 0):n.Va(t,this.pe,this.Qc?e.X:void 0,this.Rc?e.L:void 0)).map((function(t){return new sn(t,{})}),this),[this.index.mc])]},_(ga,Vr),ga.prototype.toString=i("multi_index_range_scan()"),ga.prototype.ca=function(t){var n=on();return t.forEach((function(t){t.entries.forEach((function(t){n.set(t.va.id(),t)}))})),[new ve(un(n),t[0].u())]},_(wa,Vr),wa.prototype.toString=i("select(?)"),wa.prototype.Pc=function(t){return t=Ze(t,this.jc),this.toString().replace("?",t.toString())},wa.prototype.ca=function(t,n,e){return[Ze(e,this.jc).eval(t[0])]},_(_a,Vr),_a.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"},_a.prototype.ca=function(t){return[Ee(Pi(this.V,me(t[0])),[Gr(this.U)])]},_(Ea,bo),Ea.prototype.gb=function(t,n){return this.H=t,xr(t,(function(t){return t instanceof ea})).forEach((function(t){var e=function(t){var n=[];for(t=t.getParent();t;){if(t instanceof wa)n.push(t);else if(t instanceof oa)break;t=t.getParent()}return n}(t);if(0!=e.length){var i=ya(new pa(this.c,t.table),n,e.map((function(t){return Ze(n,t.jc)})));if(null!==i){var r=on();e.forEach((function(t){r.set(t.jc,t)}),this),this.H=function(t,n,e,i){return(null===n.Ga?[]:n.Ga.values()).map((function(t){return e.get(t)})).forEach(Ar),n=new ma(t.c,n.cb,ba(n),!1),Fe(t=new _a(t.c,i.table),n),qr(i,i,t,n),n.bb()}(this,i,r,t)}}}),this),this.H},_(Sa,Vr),Sa.prototype.toString=function(){return"insert("+this.U.getName()+")"},Sa.prototype.ca=function(t,n,e){return Ta(this.U,e.values,this.C),n.Ab(this.U,e.values),[Ee(e.values,[this.U.getName()])]},_(Na,Vr),Na.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"},Na.prototype.ca=function(t,n,e){return Ta(this.U,e.values,this.C),n.Wd(this.U,e.values),[Ee(e.values,[this.U.getName()])]},_(Aa,Vr),Aa.prototype.toString=i("limit(?)"),Aa.prototype.Pc=function(t){return this.toString().replace("?",t.X.toString())},Aa.prototype.ca=function(t,n,e){return t[0].entries.splice(e.X),t},_(qa,Vr),(r=qa.prototype).toString=function(){return"order_by("+ti(this.N)+")"},r.ca=function(t){if(1==t.length){var n;n=t[0];for(var e=null,i=0;i<this.N.length;i++){var r=Kr(this.N[i].J);if(null!==n.$a&&n.$a.has(r.j())){e=r;break}}(null===(n=e)?t[0]:ge(t[0],n)).entries.sort(this.Tf.bind(this))}else t.sort(this.Jg.bind(this));return t},r.$=function(t,n){var e,i,r,o=-1;do{o++,r=this.N[o].J,e=this.N[o].order,i=t(r),r=n(r)}while(i==r&&o+1<this.N.length);return t=i<r?-1:i>r?1:0,1==e?t:-t},r.Jg=function(t,n){return this.$((function(n){return n instanceof Ur?ge(t,n):Ae(t.entries[t.entries.length-1],n)}),(function(t){return t instanceof Ur?ge(n,t):Ae(n.entries[n.entries.length-1],t)}))},r.Tf=function(t,n){return this.$((function(n){return Ae(t,n)}),(function(t){return Ae(n,t)}))},_(Ia,Vr),Ia.prototype.toString=function(){var t="project("+this.f.toString();if(null!==this.Pb){var n=this.Pb.map((function(t){return t.j()})).join(", ");t=t+", groupBy("+n+")"}return t+")"},Ia.prototype.ca=function(t){return 0==t.length?t=[_e()]:1==t.length?(t=t[0],t=[0==this.f.length?t:Ca(new xa(t,this.f))]):t=[ka(t,this.f)],t},_(Oa,Vr),Oa.prototype.toString=i("skip(?)"),Oa.prototype.Pc=function(t){return this.toString().replace("?",t.L.toString())},Oa.prototype.ca=function(t,n,e){return[new ve(t[0].entries.slice(e.L),t[0].u())]},_(ja,bo),ja.prototype.gb=function(t,n){if(!a(n.X)&&!a(n.L))return t;var e=function(t){return 0<(t=xr(t,(function(t){return t instanceof ma}),(function(t){return t instanceof Ia&&function(t){return t.f.some((function(t){return t instanceof Ur}))||null!==t.Pb}(t)||t instanceof qa||1!=Be(t).length||t instanceof wa}))).length?t[0]:null}(t);return null===e?t:(xr(t,(function(t){return t instanceof Aa||t instanceof Oa})).forEach((function(t){t instanceof Aa?e.Qc=!0:e.Rc=!0,Ar(t)}),this),e.bb())},_(Ma,bo),Ma.prototype.gb=function(t,n){this.H=t;var e=function(t,n){return xr(t.H,(function(t){return t instanceof wa&&(t=Ze(n,t.jc))instanceof Cr&&"or"==t.pb}))}(this,n);if(0==e.length)return this.H;var i,r=0;do{t=Ra(this,i=e[r++],n)}while(null===t&&r<e.length);return null===t?this.H:(n=function(t,n){return xr(t.H,(function(t){return t instanceof ea&&t.table.getName()==n}))[0]||null}(this,t[0].cb.mc),null===n?this.H:this.H=function(t,n,e,i){var r=new _a(t.c,e.table),o=new ga;return Fe(r,o),i.forEach((function(t){t=new ma(this.c,t.cb,ba(t),!1),Fe(o,t)}),t),Ar(n),qr(e,e,r,o),o.bb()}(this,i,n,t))},_(Da,bo),Da.prototype.gb=function(t,n){if(n=function(t,n){return a(n.N)?xr(t,(function(t){return t instanceof qa}))[0]:null}(t,n),null===n)return t;t:{var e=n;if(null!==(t=function(t){return 0<(t=xr(t,(function(t){return t instanceof ea}),(function(t){return 1!=Be(t).length}))).length?t[0]:null}(Pe(n,0)))){var i;i=n.N;for(var r=null,o=t.table.Da(),u=0;u<o.length&&null===r;u++)r=La(o[u],i);if(null===(i=r)){t=e;break t}e=new ma(this.c,i.cb,new la(i.cb),i.Xe),Fe(i=new _a(this.c,t.table),e),Ar(n),e=qr(t,t,i,e)}t=e}return t==n&&(t=n,e=function(t){return 0<(t=xr(t,(function(t){return t instanceof ma}),(function(t){return 1!=Be(t).length}))).length?t[0]:null}(Pe(n,0)),null!==e&&null!==(i=La(e.index,n.N))&&(e.pe=i.Xe,t=Ar(n).parent)),t.bb()},Ba.prototype.gc=function(){return this.Vb.forEach((function(t){this.Ha=t.gb(this.Ha,this.le)}),this),this.Ha},_(Pa,Vr),Pa.prototype.toString=function(){return"update("+this.U.getName()+")"},Pa.prototype.ca=function(t,n,e){return t=t[0].entries.map((function(t){var n=this.U.kb(t.va.Ja());return e.set.forEach((function(t){n.m[t.J.getName()]=t.value}),this),n}),this),n.update(this.U,t),[_e()]},Ga.prototype.create=function(t,n){var e=t.bb();if(e instanceof io||e instanceof eo)return Fa(this,t,n);if(e instanceof co||e instanceof po||e instanceof yo)return Fa(this,t,n,this.re);if(e instanceof ro||e instanceof oo)return Fa(this,t,n,this.Pd);throw new Hn(8)},Ga.prototype.tg=function(t){if(t instanceof co)return new Ia(t.f,t.Pb);if(t instanceof fo)return new ra(t.f);if(t instanceof lo)return new Wr(t.f);if(t instanceof ho)return new qa(t.N);if(t instanceof yo)return new Oa;if(t instanceof po)return new Aa;if(t instanceof ao)return new wa(t.O.W());if(t instanceof so)return new _o;if(t instanceof vo)return new oa(this.c,t.O,t.Rb);if(t instanceof uo)return new ea(this.c,t.table);if(t instanceof ro)return new ta(t.table);if(t instanceof oo)return new Pa(t.table);if(t instanceof io)return new Na(this.c,t.table);if(t instanceof eo)return new Sa(this.c,t.table);throw new Hn(514)},za.prototype.releaseLock=function(t,n){n.forEach((function(n){Ha(this,n).releaseLock(t)}),this)},Ka.prototype.releaseLock=function(t){this.wc==t&&(this.wc=null),this.fb==t&&(this.fb=null),null===this.Ya||this.Ya.delete(t),null===this.Yb||this.Yb.delete(t)},Va.prototype.Bg=function(t,n){this.Ec.releaseLock(t.W(),t.da()),t.Db.resolve(n),$a(this)},Va.prototype.Ag=function(t,n){this.Ec.releaseLock(t.W(),t.da()),t.Db.reject(n),$a(this)},Xa.prototype.Ab=function(t){Ui(this.Ub,t,(function(t,n){var e=t.getPriority()-n.getPriority();return 0==e?t.W()-n.W():e}))},Xa.prototype.qa=function(){return this.Ub.slice()},Xa.prototype.remove=function(t){var n,e=this.Ub;return(n=0<=(t=C(e,t)))&&Array.prototype.splice.call(e,t,1),n},Ya.prototype.clear=function(){this.Nc.clear()},Ya.prototype.clear=Ya.prototype.clear,Ya.prototype.rb=function(t,n){return this.Nc.set(t.toString(),n),n},Ya.prototype.registerService=Ya.prototype.rb,Ya.prototype.b=function(t){var n=this.Nc.get(t.toString())||null;if(null===n)throw new Hn(7,t.toString());return n},Ya.prototype.getService=Ya.prototype.b,Ya.prototype.md=function(t){return this.Nc.has(t.toString())},Ya.prototype.isRegistered=Ya.prototype.md,iu.prototype.$=function(t,n){return this.K.every((function(e){return 6==e.G()||0==e.G()?Ae(t,e)===Ae(n,e):Oe(this.Qd,e.G(),"eq")(Ae(t,e),Ae(n,e))}),this)},ou.prototype.Cd=function(t,n){var e=p(t.query).toString(),i=this.fc.get(e)||null;null===i&&(i=new su(t),this.fc.set(e,i)),i.Cd(n)},ou.prototype.ne=function(t,n){t=p(t.query).toString();var e=this.fc.get(t)||null;e.ne(n),0<e.Hc.size||this.fc.delete(t)},su.prototype.Cd=function(t){this.Hc.has(t)||this.Hc.add(t)},su.prototype.ne=function(t){return this.Hc.delete(t)},su.prototype.Bc=function(){var t=this.Hf;return{context:t.query,je:Ro(t)}},(r=cu.prototype).exec=function(){return et([new ve([new Se(new sn(-1,function(t){var n=t.c.b(gn),e=t.c.b(mn),i={};return t.g.oa().forEach((function(t){var r=n.get(Fr(t)).Va();r=Pi(e,r).map((function(t){return t.m})),i[t.getName()]=r})),{name:t.g.name(),version:t.g.version(),tables:i}}(this)),!0)],[])])},r.G=i(0),r.da=e("aa"),r.W=function(){return p(this)},r.getPriority=i(0),(r=hu.prototype).exec=function(){if(!(this.Oa instanceof Si||this.Oa instanceof Ai||this.Oa instanceof Li))throw new Hn(300);var t;t:{t=this.g.oa();for(var n=0;n<t.length;++n)if(0<this.C.get(Fr(t[n])).Y().ia){t=!1;break t}t=!0}if(!t)throw new Hn(110);if(this.g.name()!=this.Ba.name||this.g.version()!=this.Ba.version)throw new Hn(111);if(null==this.Ba.tables)throw new Hn(112);return function(t){var n,e=new re(t.c,t.aa);for(n in e=t.Oa.Fb(t.G(),Cn(t.aa),e),t.Ba.tables){var i=t.g.table(n),r=t.Ba.tables[n].map((function(t){return i.xb(t)})),o=e.I(n,i.kb,0);t.V.Wb(n,r);var a=t.C.lc.get(n)||[];r.forEach((function(t){a.forEach((function(n){var e=t.nb(n.getName());n.add(e,t.id())}))})),o.put(r)}return e.ka()}(this)},r.G=i(1),r.da=e("aa"),r.W=function(){return p(this)},r.getPriority=i(0),(r=lu.prototype).exec=function(){return this.ze.resolve(),this.xc.ha},r.G=i(1),r.da=e("aa"),r.W=function(){return p(this)},r.getPriority=i(2),r.ka=function(){return this.ja=this.Oa.Fb(this.G(),Cn(this.aa),this.Ra),this.ja.ka().then(function(){this.Mc(),this.xc.resolve()}.bind(this),function(t){this.Ra.Jb(),this.xc.reject(t)}.bind(this)),this.Db.ha},r.Jb=function(){return this.Ra.Jb(),this.xc.resolve(),this.Db.ha},r.Mc=function(){var t=au(this.Ib,this.aa);0!=t.length&&(t=new ii(this.c,t),Wa(this.Ia,t))},r.Y=function(){var t=null;return null!=this.ja&&(t=this.ja.Y()),null===t?new dn(!1,0,0,0,0):t},w("lf.proc.Transaction",fu);var pu=on();function du(t,n){var e=pu.get(t.Ta)||null;if(null===e||!e.has(n))throw new Hn(107,t.Ta,n);t.Ta=n}function yu(t){this.c=t,this.g=t.b(Sn),this.hd=!1}function vu(t){if(!t.hd)throw new Hn(2)}function bu(t,n,e,i,r,o){this.U=t,this.A=n,this.Ye=e,this.We=i,this.xf=r,this.Ka=o||null}function mu(t){this.g=t,this.Id=new Jn,this.oe=new Jn,this.gf=new Jn,this.Ie=on(),this.h=new Jn,this.Ee=new Jn,this.mf=new Jn,this.He=new Jn,function(t){t.g.oa().forEach((function(t){var n=t.getName();t.Mb.Ud.forEach((function(e){this.gf.set(n,this.g.table(e.Xa)),this.h.set(e.Xa,t),0==e.action?(this.oe.set(e.Xa,e),this.mf.set(e.Xa,t)):(this.Id.set(e.Xa,e),this.Ee.set(e.Xa,t)),this.Ie.set(t.getName()+"."+e.vb,e.Xa),this.He.set(e.Xa+"."+e.Jc,t.getName())}),this)}),t)}(this)}function gu(t,n,e){return null!=e?1==e?t.Id.get(n):t.oe.get(n):(e=t.Id.get(n),t=t.oe.get(n),null===e&&null===t?null:(e||[]).concat(t||[]))}function wu(t,n){return null===(t=n.get(t))?[]:t}function _u(t,n,e){return wu(n,null!=e?0==e?t.mf:t.Ee:t.h)}function Eu(t,n,e){this.sd=t,this.xg=n,this.Ud=e}function Su(t,n,e){var i=t.ref.split(".");if(2!=i.length)throw new Hn(540,e);this.Ge=n,this.vb=t.local,this.Xa=i[0],this.Jc=i[1],this.name=n+"."+e,this.action=t.action,this.timing=t.timing}function Tu(t){qu(t),this.Qd=Ie(),this.A=t,this.K=on(),this.zd=xn(),this.nc=xn(),this.nd=xn(),this.Fa=null,this.ta=on(),this.rd=!1,this.yb=[]}function Nu(t){this.name=t.name,this.order=t.order,this.autoIncrement=t.autoIncrement}fu.prototype.exec=function(t){du(this,4);var n=[];try{t.forEach((function(t){t.ab(),n.push(t.Bc())}),this)}catch(t){return du(this,7),it(t)}return this.Kb=new Eo(this.c,n),Wa(this.Ia,this.Kb).then(function(t){return du(this,7),t.map((function(t){return be(t)}))}.bind(this),function(t){throw du(this,7),t}.bind(this))},fu.prototype.exec=fu.prototype.exec,fu.prototype.Ff=function(t){return du(this,1),this.Kb=new lu(this.c,t),function(t){return Wa(t.Ia,t),t.ze.ha}(this.Kb).then(function(){du(this,2)}.bind(this))},fu.prototype.begin=fu.prototype.Ff,fu.prototype.Ef=function(t){du(this,3);try{t.ab()}catch(t){return du(this,7),it(t)}return function(t,n){return(n=n.Bc()).je.bb().exec(t.Ra,n.context).then((function(t){return be(t[0])}),function(t){this.Ra.Jb();var n=new yt(t.name);throw this.xc.reject(n),t}.bind(t))}(this.Kb,t).then(function(t){return du(this,2),t}.bind(this),function(t){throw du(this,7),t}.bind(this))},fu.prototype.attach=fu.prototype.Ef,fu.prototype.ka=function(){return du(this,5),this.Kb.ka().then(function(){du(this,7)}.bind(this))},fu.prototype.commit=fu.prototype.ka,fu.prototype.Jb=function(){return du(this,6),this.Kb.Jb().then(function(){du(this,7)}.bind(this))},fu.prototype.rollback=fu.prototype.Jb,fu.prototype.Y=function(){if(7!=this.Ta)throw new Hn(105);return this.Kb.Y()},fu.prototype.stats=fu.prototype.Y,w("lf.proc.Database",yu),yu.prototype.Ea=function(t){return this.c.rb(Sn,this.g),function(t,n){var e=t.b(Sn),i=n||{};n=new Bi(e),t.rb(mn,n),n=null;var r=!1;switch(n=null!=i.storeType?i.storeType:(n=nn()).fg?0:n.Ug?4:1){case 0:n=new Si(t,e);break;case 1:n=new Ai(e);break;case 5:n=new xi(e);break;case 4:n=new Li(t,e,i.webSqlDbSize);break;case 3:n=new yi(e,i.firebase),r=!0;break;default:throw new Hn(300)}t.rb(bn,n);var o=new Tr;return t.rb(gn,o),n.Ea(i.onUpgrade).then((function(){var n=new Ua(t);return t.rb(wn,n),n=new Va,t.rb(_n,n),n=new ou,t.rb(En,n),o.Ea(e)})).then((function(){if(r){var n=new oi(t);n.Oa.subscribe(n.ee.bind(n))}return i.enableInspector&&(window.top["#lfInspect"]=tu),new Sr(t).Ea(e)}))}(this.c,t).then(function(){return this.hd=!0,this.Ia=this.c.b(_n),this}.bind(this))},yu.prototype.init=yu.prototype.Ea,yu.prototype.zb=e("g"),yu.prototype.getSchema=yu.prototype.zb,yu.prototype.select=function(t){return vu(this),new Go(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])},yu.prototype.select=yu.prototype.select,yu.prototype.Ab=function(){return vu(this),new Lo(this.c)},yu.prototype.insert=yu.prototype.Ab,yu.prototype.Wd=function(){return vu(this),new Lo(this.c,!0)},yu.prototype.insertOrReplace=yu.prototype.Wd,yu.prototype.update=function(t){return vu(this),new zo(this.c,t)},yu.prototype.update=yu.prototype.update,yu.prototype.delete=function(){return vu(this),new Do(this.c)},yu.prototype.delete=yu.prototype.delete,yu.prototype.observe=function(t,n){vu(this),this.c.b(En).Cd(t,n)},yu.prototype.observe=yu.prototype.observe,yu.prototype.unobserve=function(t,n){vu(this),this.c.b(En).ne(t,n)},yu.prototype.unobserve=yu.prototype.unobserve,yu.prototype.Nf=function(){return vu(this),new fu(this.c)},yu.prototype.createTransaction=yu.prototype.Nf,yu.prototype.close=function(){try{this.c.b(bn).close()}catch(t){}this.c.clear(),this.hd=!1},yu.prototype.close=yu.prototype.close,yu.prototype.Xf=function(){vu(this);var t=new cu(this.c);return Wa(this.Ia,t).then((function(t){return be(t[0])[0]}))},yu.prototype.export=yu.prototype.Xf,yu.prototype.import=function(t){return vu(this),t=new hu(this.c,t),Wa(this.Ia,t).then(i(null))},yu.prototype.import=yu.prototype.import,w("lf.schema.BaseColumn",bu),(r=bu.prototype).getName=e("A"),r.j=function(){return Gr(this.U)+"."+this.A},r.toString=function(){return this.j()},r.I=e("U"),r.G=e("xf"),bu.prototype.getType=bu.prototype.G,bu.prototype.Da=function(){return null==this.ta&&(this.ta=[],this.I().Da().forEach((function(t){-1!=t.f.map((function(t){return t.ba.getName()})).indexOf(this.A)&&this.ta.push(t)}),this)),this.ta},bu.prototype.Ca=function(){if(!a(this.fa)){var t=this.Da().filter((function(t){return 1==t.f.length&&t.f[0].ba.getName()==this.getName()}),this);this.fa=0<t.length?t[0]:null}return this.fa},bu.prototype.hc=e("We"),bu.prototype.isNullable=bu.prototype.hc,bu.prototype.Dc=e("Ye"),bu.prototype.Qa=function(t){return Rr(this,t,"eq")},bu.prototype.eq=bu.prototype.Qa,bu.prototype.ef=function(t){return Rr(this,t,"neq")},bu.prototype.neq=bu.prototype.ef,bu.prototype.rg=function(t){return Rr(this,t,"lt")},bu.prototype.lt=bu.prototype.rg,bu.prototype.sg=function(t){return Rr(this,t,"lte")},bu.prototype.lte=bu.prototype.sg,bu.prototype.ag=function(t){return Rr(this,t,"gt")},bu.prototype.gt=bu.prototype.ag,bu.prototype.bg=function(t){return Rr(this,t,"gte")},bu.prototype.gte=bu.prototype.bg,bu.prototype.match=function(t){return Rr(this,t,"match")},bu.prototype.match=bu.prototype.match,bu.prototype.Gf=function(t,n){return Rr(this,[t,n],"between")},bu.prototype.between=bu.prototype.Gf,bu.prototype.cg=function(t){return Rr(this,t,"in")},bu.prototype.in=bu.prototype.cg,bu.prototype.mg=function(){return this.Qa(null)},bu.prototype.isNull=bu.prototype.mg,bu.prototype.lg=function(){return this.ef(null)},bu.prototype.isNotNull=bu.prototype.lg,bu.prototype.rc=function(t){return new bu(this.U,this.A,this.Ye,this.We,this.xf,t)},bu.prototype.as=bu.prototype.rc,w("lf.schema.Constraint",Eu),Eu.prototype.$f=e("sd"),Eu.prototype.getPrimaryKey=Eu.prototype.$f,Eu.prototype.Zf=e("Ud"),Eu.prototype.getForeignKeys=Eu.prototype.Zf,w("lf.schema.TableBuilder",Tu);var Au=xn([0,6]);function qu(t){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(t))throw new Hn(502,t)}function xu(t,n){if(n==t.A)throw new Hn(546,n);if(t.K.has(n)||t.ta.has(n)||t.nc.has(n))throw new Hn(503,t.A+"."+n)}function Cu(t,n,e,i,r){var o=n;return o="string"==typeof n[0]?n.map((function(t){return new Nu({name:t,order:null!=i?i:1,autoIncrement:r||!1})})):n.map((function(t){return new Nu(t)})),o.forEach((function(t){if(!this.K.has(t.name))throw new Hn(508,this.A,t.name);if(e){var n=this.K.get(t.name);if(0==n||6==n)throw new Hn(509,this.A,t.name)}}),t),o}function ku(t,n){this.g=new Mu(t,n),this.tb=on(),this.yc=!1,this.i=null,this.Yc=!1}function Iu(t){t.yc||(t.tb.forEach((function(t){!function(t,n){n.yb.forEach((function(t){var e=t.Xa;if(!this.tb.has(e))throw new Hn(536,t.name);e=this.tb.get(e).zb();var i=t.Jc;if(!e.hasOwnProperty(i))throw new Hn(537,t.name);if(n.zb()[t.vb].G()!=e[i].G())throw new Hn(538,t.name);if(!e[i].Dc())throw new Hn(539,t.name)}),t)}(this,t),t=t.zb(),this.g.M.set(t.getName(),t)}),t),un(t.tb).forEach(t.Kf,t),function(t){var n=on();t.g.M.forEach((function(t,e){n.set(e,new ju(e))}),t),t.tb.forEach((function(t,e){t.yb.forEach((function(t){n.get(t.Xa).Le.add(e)}))})),un(n).forEach((function(t){Ou(this,t,n)}),t)}(t),t.tb.clear(),t.yc=!0)}function Ou(t,n,e){n.ye||(n.ye=!0,n.fe=!0,n.Le.forEach((function(t){if((t=e.get(t)).ye){if(t.fe&&n!=t)throw new Hn(533)}else Ou(this,t,e)}),t)),n.fe=!1}function ju(t){this.fe=this.ye=!1,this.Le=xn(),this.mc=t}function Mu(t,n){this.A=t,this.Ua=n,this.M=on(),this.ke={Sf:!1}}Tu.prototype.zf=function(t,n){return qu(t),xu(this,t),this.K.set(t,n),Au.has(n)&&this.Be([t]),this},Tu.prototype.addColumn=Tu.prototype.zf,Tu.prototype.Bf=function(t,n){var e=this.A;return this.Fa="pk"+(e[0].toUpperCase()+e.substring(1)),qu(this.Fa),xu(this,this.Fa),function(t,n){var e=!1;if(n.forEach((function(t){var n=this.K.get(t.name);if(e=e||t.autoIncrement,t.autoIncrement&&3!=n)throw new Hn(504)}),t),e&&1<n.length)throw new Hn(505)}(this,t=Cu(this,t,!0,void 0,n)),1==t.length&&this.zd.add(t[0].name),this.nc.add(this.Fa),this.ta.set(this.Fa,t),this},Tu.prototype.addPrimaryKey=Tu.prototype.Bf,Tu.prototype.Af=function(t,n){if(qu(t),xu(this,t),a((n=new Su(n,this.A,t)).action)||(n.action=0),a(n.timing)||(n.timing=0),1==n.action&&1==n.timing)throw new Hn(506);if(!this.K.has(n.vb))throw new Hn(540,t);return this.yb.push(n),this.Ae(t,[n.vb],this.zd.has(n.vb)),this},Tu.prototype.addForeignKey=Tu.prototype.Af,Tu.prototype.Cf=function(t,n){return qu(t),xu(this,t),1==(n=Cu(this,n,!0)).length&&(this.zd.add(n[0].name),function(t,n){t.yb.forEach((function(t){t.vb==n&&this.nc.add(t.name.split(".")[1])}),t)}(this,n[0].name)),this.ta.set(t,n),this.nc.add(t),this},Tu.prototype.addUnique=Tu.prototype.Cf,Tu.prototype.Be=function(t){return Cu(this,t,!1).forEach((function(t){this.nd.add(t.name)}),this),this},Tu.prototype.addNullable=Tu.prototype.Be,Tu.prototype.Ae=function(t,n,e,i){return qu(t),xu(this,t),n=Cu(this,n,!0,i),e&&this.nc.add(t),this.ta.set(t,n),this},Tu.prototype.addIndex=Tu.prototype.Ae,Tu.prototype.Cb=n("rd"),Tu.prototype.persistentIndex=Tu.prototype.Cb,Tu.prototype.zb=function(){return function(t){if(null!==t.Fa){var n=t.ta.get(t.Fa).map((function(t){return t.name})),e=0;if(t.yb.some((function(t,i){return e=i,-1!=n.indexOf(t.vb)}),t))throw new Hn(543,t.yb[e].name)}}(this),function(t){if(null!==t.Fa){var n=function(t){return t.name},e=JSON.stringify(t.ta.get(t.Fa).map(n));t.ta.forEach((function(t,i){if(i!=this.Fa&&(t=t.map(n),JSON.stringify(t)==e))throw new Hn(544,this.A+"."+i)}),t)}}(this),function(t){null===t.Fa||t.ta.get(t.Fa).forEach((function(t){if(this.nd.has(t.name))throw new Hn(545,this.A+"."+t.name)}),t)}(this),new(function(t){function n(){function n(n){return t.ta.get(n).map((function(t){return{ba:this[t.name],order:t.order,autoIncrement:t.autoIncrement}}),this)}var e=an(t.K).map((function(n){return this[n]=new bu(this,n,t.zd.has(n),t.nd.has(n),t.K.get(n)),this[n]}),this),i=an(t.ta).map((function(e){return new Lr(t.A,e,t.nc.has(e),n.call(this,e))}),this);Pr.call(this,t.A,e,i,t.rd);var r=null===t.Fa?null:new Lr(t.A,t.Fa,!0,n.call(this,t.Fa)),o=e.filter((function(n){return!t.nd.has(n.getName())}));this.Mb=new Eu(r,o,t.yb),this.qf=function(t,n,e){function i(t,i){this.K=n,this.ta=e,sn.call(this,t,i)}_(i,sn),i.prototype.Ke=function(){var t={};return this.K.forEach((function(n){t[n.getName()]=n.hc()?null:zn[n.G()]})),t},i.prototype.wf=function(){var t={};return this.K.forEach((function(n){var e=n.getName();n=n.G();var i=this.m[e];t[e]=0==n?null!=i?fn(i):null:2==n?null!=i?i.getTime():null:6==n?null!=i?i:null:i}),this),t};var r=function(t){var n=this.K.get(t.getName()),e=this.Qd.Ze.get(n)||null;return function(n){return e(n[t.getName()])}}.bind(t),o=function(t){var n=t.map((function(t){return r(t.ba)}));return function(t){return n.map((function(n){return n(t)}))}}.bind(t),a={};return e.forEach((function(t){var n=t.j();t=1==t.f.length?r(t.f[0].ba):o(t.f),a[n]=t})),i.prototype.nb=function(t){return-1!=t.indexOf("#")?this.id():a.hasOwnProperty(t)?a[t](this.m):null},i}(t,e,i)}return _(n,Pr),n.prototype.xb=function(t){return new this.qf(cn++,t)},n.prototype.createRow=n.prototype.xb,n.prototype.kb=function(t){var n={};return this.lb().forEach((function(e){var i=e.getName();e=e.G();var r=t.value[i];if(0==e)if(null!=(e=r)&&""!=e){0!=e.length%2&&(e="0"+e),r=new ArrayBuffer(e.length/2);for(var o=new Uint8Array(r),a=0,u=0;a<e.length;a+=2)o[u++]=parseInt(e.substr(a,2),16);e=r}else e=null;else e=2==e?null!=r?new Date(r):null:r;n[i]=e}),this),new this.qf(t.id,n)},n.prototype.deserializeRow=n.prototype.kb,n.prototype.Ne=e("Mb"),n.prototype.getConstraint=n.prototype.Ne,n}(this))},Tu.prototype.getSchema=Tu.prototype.zb,w("lf.schema.Builder",ku),ku.prototype.Kf=function(t){t.yb.forEach((function(t){this.tb.get(t.Xa).yb.forEach((function(n){if(n.vb==t.Jc)throw new Hn(534,t.name)}),this)}),this)},ku.prototype.zb=function(){return this.yc||Iu(this),this.g},ku.prototype.getSchema=ku.prototype.zb,ku.prototype.Qe=function(){var t,n=new vn("ns_"+this.g.name()),e=Qa();return e.md(n)?t=e.b(n):(t=new Ya,e.rb(n,t)),t},ku.prototype.getGlobal=ku.prototype.Qe,ku.prototype.connect=function(t){if(this.Yc||null!==this.i&&this.i.hd)throw new Hn(113);if(this.Yc=!0,null===this.i){var n=this.Qe();n.md(Sn)||n.rb(Sn,this.zb()),this.i=new yu(n)}return this.i.Ea(t).then(function(t){return this.Yc=!1,t}.bind(this),function(t){throw this.Yc=!1,t}.bind(this))},ku.prototype.connect=ku.prototype.connect,ku.prototype.Mf=function(t){if(this.tb.has(t))throw new Hn(503,t);if(this.yc)throw new Hn(535);return this.tb.set(t,new Tu(t)),this.tb.get(t)},ku.prototype.createTable=ku.prototype.Mf,ku.prototype.se=function(t){if(this.yc)throw new Hn(535);return this.g.se(t),this},ku.prototype.setPragma=ku.prototype.se,w("lf.schema.DatabaseSchema",Mu),Mu.prototype.name=e("A"),Mu.prototype.name=Mu.prototype.name,Mu.prototype.version=e("Ua"),Mu.prototype.version=Mu.prototype.version,Mu.prototype.oa=function(){return un(this.M)},Mu.prototype.tables=Mu.prototype.oa,Mu.prototype.table=function(t){if(!this.M.has(t))throw new Hn(101,t);return this.M.get(t)},Mu.prototype.table=Mu.prototype.table,Mu.prototype.info=function(){return this.Ve||(this.Ve=new mu(this)),this.Ve},Mu.prototype.Fg=e("ke"),Mu.prototype.pragma=Mu.prototype.Fg,Mu.prototype.se=n("ke"),w("lf.schema.create",(function(t,n){return new ku(t,n)})),Y.prototype.catch=Y.prototype.ve,Y.prototype.catch=Y.prototype.catch;try{t&&(t.exports=lf)}catch(t){}}.bind(window)()}},n={};function e(i){var r=n[i];if(void 0!==r)return r.exports;var o=n[i]={id:i,loaded:!1,exports:{}};return t[i](o,o.exports,e),o.loaded=!0,o.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=e(197),n=e.n(t),i=n().schema.create("lf_websql1_db",6);i.createTable("m_heroine").addColumn("id",n().Type.INTEGER).addColumn("name",n().Type.STRING).addColumn("front",n().Type.INTEGER).addColumn("back",n().Type.INTEGER).addColumn("position_label",n().Type.STRING).addColumn("Costume",n().Type.STRING).addColumn("position_order",n().Type.INTEGER).addColumn("created_date",n().Type.DATE_TIME).addColumn("last_modified_date",n().Type.DATE_TIME).addColumn("star_6_date",n().Type.DATE_TIME).addColumn("special_weapon_date",n().Type.DATE_TIME).addColumn("since",n().Type.DATE_TIME).addColumn("style",n().Type.INTEGER).addNullable(["star_6_date","special_weapon_date"]).addPrimaryKey(["id"],!0),i.createTable("t_party").addColumn("id",n().Type.INTEGER).addColumn("remark",n().Type.STRING).addColumn("created_date",n().Type.DATE_TIME).addColumn("last_modified_date",n().Type.DATE_TIME).addNullable(["remark"]).addPrimaryKey(["id"],!0),i.createTable("t_party_member").addColumn("id",n().Type.INTEGER).addColumn("party_id",n().Type.INTEGER).addColumn("heroine_id",n().Type.INTEGER).addColumn("star",n().Type.INTEGER).addColumn("has_special_weapon",n().Type.BOOLEAN).addColumn("level",n().Type.INTEGER).addColumn("rank",n().Type.INTEGER).addColumn("created_date",n().Type.DATE_TIME).addColumn("last_modified_date",n().Type.DATE_TIME).addNullable(["star","has_special_weapon","level","rank"]).addPrimaryKey(["id"],!0).addForeignKey("fk_party_id",{local:"party_id",ref:"t_party.id"}).addForeignKey("fk_heroine_id",{local:"heroine_id",ref:"m_heroine.id"}),i.createTable("t_match").addColumn("id",n().Type.INTEGER).addColumn("winner_party_id",n().Type.INTEGER).addColumn("loser_party_id",n().Type.INTEGER).addColumn("remark",n().Type.STRING).addColumn("created_date",n().Type.DATE_TIME).addColumn("last_modified_date",n().Type.DATE_TIME).addNullable(["remark"]).addPrimaryKey(["id"],!0).addForeignKey("fk_winner_party_id",{local:"winner_party_id",ref:"t_party.id"}).addForeignKey("fk_loser_party_id",{local:"loser_party_id",ref:"t_party.id"}),i.createTable("t_heroine_status").addColumn("id",n().Type.INTEGER).addColumn("heroine_id",n().Type.INTEGER).addColumn("star",n().Type.INTEGER).addColumn("special_weapon_level",n().Type.INTEGER).addColumn("level",n().Type.INTEGER).addColumn("rank",n().Type.INTEGER).addColumn("created_date",n().Type.DATE_TIME).addColumn("last_modified_date",n().Type.DATE_TIME).addColumn("deleted",n().Type.BOOLEAN).addNullable(["level","rank"]).addPrimaryKey(["id"],!0).addForeignKey("fk_heroine_id",{local:"heroine_id",ref:"m_heroine.id"});const r=i.connect();let o=r.then((function(t){let n=new XMLHttpRequest;return new Promise(((t,e)=>{n.onreadystatechange=n=>{4==n.target.readyState&&200==n.target.status?t(JSON.parse(n.target.responseText)):4==n.target.readyState&&e()},n.open("GET","./m_heroine.json?d="+(new Date).getTime(),!1),n.send()})).then((function(n){let e=t.getSchema().table("m_heroine"),i=n.map((t=>(t.since=new Date,t.style=-1,t.created_date=new Date(t.created_date),t.last_modified_date?t.last_modified_date=new Date(t.created_date):t.last_modified_date=t.created_date,e.createRow(t))));return t.insertOrReplace().into(e).values(i).exec()})).then((()=>{}))}));class a extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"}),n=e(377);console.log(n),t.innerHTML=n.default;let i=t.querySelector("dialog#register_dialog"),a=t.querySelector("dialog#heroine_select_dialog");i&&(t=>{t.querySelectorAll("fieldset>button").forEach((t=>{t.addEventListener("click",(()=>{a&&(a.sender=t,a.showModal())}))})),t.addEventListener("close",(function(){"ok"==t.returnValue&&o.then((()=>{r.then((n=>{var e,i;let r=n.getSchema().table("t_match"),o=n.getSchema().table("t_party"),a=n.getSchema().table("t_party_member"),u=n.createTransaction(),s=[];t.querySelectorAll("[data-match]").forEach((t=>{s.push(t)}));let c=null!==(i=null===(e=t.querySelector('[name="match_remark"]'))||void 0===e?void 0:e.value)&&void 0!==i?i:"",h=-1,l=-1;u.begin([r,o,a]).then((()=>{let t=n.insert().into(o).values([o.createRow({created_date:new Date,last_modified_date:new Date})]);return u.attach(t)})).then((t=>{const e=t[0].id;h=e;let i=n.insert().into(a).values(s.filter((t=>"winner"==t.getAttribute("data-match"))).map((t=>a.createRow({party_id:e,heroine_id:t.value,created_date:new Date,last_modified_date:new Date}))));return u.attach(i)})).then((()=>{let t=n.insert().into(o).values([o.createRow({created_date:new Date,last_modified_date:new Date})]);return u.attach(t)})).then((t=>{const e=t[0].id;l=e;let i=n.insert().into(a).values(s.filter((t=>"loser"==t.getAttribute("data-match"))).map((t=>a.createRow({party_id:e,heroine_id:t.value,created_date:new Date,last_modified_date:new Date}))));return u.attach(i)})).then((()=>{let t=n.insert().into(r).values([r.createRow({winner_party_id:h,loser_party_id:l,remark:c,created_date:new Date,last_modified_date:new Date})]);return u.attach(t)})).then((t=>{const n=t[0].id;return u.commit(),{party_id:h,match_id:n}}))}))}))}))})(i),a&&(t=>{t.addEventListener("close",(function(){let n=JSON.parse(t.returnValue),e=t.sender;if(e.value=n.id,e.innerHTML=n.innerHTML,"winner"==e.getAttribute("data-match")){const t=e.getAttribute("data-party_member_id");let r=null==i?void 0:i.querySelector('div[data-party_member_id="'+t+'"]');r&&(r.querySelectorAll('[name="star"]').forEach((t=>{t.value=null==n?void 0:n.star})),r.querySelectorAll('[name="level"]').forEach((t=>{t.value=null==n?void 0:n.level})),r.querySelectorAll('[name="rank"]').forEach((t=>{t.value=null==n?void 0:n.rank})),r.querySelectorAll('[name="special_weapon_level"]').forEach((t=>{t.value=null==n?void 0:n.special_weapon_level})))}}))})(a)}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(t,n,e){}adoptedCallback(){}showModal(){this.preopen()}preopen(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow({mode:"open"});e.querySelector("dialog#heroine_select_dialog");let i=e.querySelector("dialog#heroine_select_dialog>form");i&&(t=>{t.innerHTML="",o.then((()=>{r.then((i=>{Promise.resolve().then((function(){let t=i.getSchema().table("m_heroine"),e=i.getSchema().table("t_heroine_status");return i.select().from(t).leftOuterJoin(e,e.heroine_id.eq(t.id)).orderBy(t.name,n().Order.ASC).exec()})).then((function(n){n.forEach((n=>{(n=>{let e=document.createElement("button");t.appendChild((t=>{var n,i,r,o,a,u;return e.innerText=t.m_heroine.name+"("+t.m_heroine.Costume+")",e.value=JSON.stringify({id:t.m_heroine.id,innerHTML:e.innerText,star:null===(n=t.t_heroine_status.deleted)||void 0===n||n?null:t.t_heroine_status.star,level:null===(i=t.t_heroine_status.deleted)||void 0===i||i?null:t.t_heroine_status.level,rank:null===(r=t.t_heroine_status.deleted)||void 0===r||r?null:t.t_heroine_status.rank,special_weapon_level:null===(o=t.t_heroine_status.deleted)||void 0===o||o?null:t.t_heroine_status.special_weapon_level}),e.setAttribute("data-deleted",`${null!==(a=t.t_heroine_status.deleted)&&void 0!==a&&a}`),e.setAttribute("data-initial",t.m_heroine.name.substr(0,1)),e.setAttribute("data-initial_group",(u=t.m_heroine.name.substr(0,1),"アイウエオ".indexOf(u)>=0?"1":"カキクケコガギグゲゴ".indexOf(u)>=0?"2":"サシスセソザジズゼゾ".indexOf(u)>=0?"3":"タチツテトナニヌネノハヒフヘホダヂヅデドバビブベボパピプペポ".indexOf(u)>=0?"4":"マミムメモ".indexOf(u)>=0?"5":"ヤユヨラリルレロワヲン".indexOf(u)>=0?"6":"0")),e})(n))})(n)}))})).then((()=>{let t=e.querySelector("dialog#register_dialog");null==t||t.showModal()}))}))}))})(i)}}class u extends HTMLElement{constructor(){var t;super();const i=this,a=this.attachShadow({mode:"open"});a.innerHTML=e(983).Z+e(758).Z+e(215).Z;let u=a.querySelector("dialog#search_dialog"),s=a.querySelector("div#matchs"),c=null!==(t=a.querySelector("div#history"))&&void 0!==t?t:document.createElement("div");c.querySelectorAll("ol li").forEach((t=>{t.remove()})),u&&(t=>{var a;t.addEventListener("close",(function(){if("ok"==t.returnValue){let a=t.querySelectorAll("form :checked"),u=[];a.forEach((t=>{u.push(t.value)})),o.then((()=>{r.then((r=>{let o=r.getSchema().table("m_heroine"),h=r.getSchema().table("t_party_member"),l=r.getSchema().table("t_match");r.select(h.party_id.as("party_id"),n().fn.count(n().fn.distinct(h.heroine_id)).as("count")).from(h).innerJoin(l,l.loser_party_id.eq(h.party_id)).where(h.heroine_id.in(u)).groupBy(h.party_id).exec().then((f=>{0!=(f=f.filter((t=>t.count<6))).length&&(f=(f=f.sort(((t,n)=>n.count-t.count))).filter((t=>t.count==f[0].count)),r.select(l.id.as("match_id"),h.party_id.as("party_id"),l.winner_party_id.as("winner_party_id"),l.loser_party_id.as("loser_party_id"),o.id.as("heroine_id"),o.name.as("name"),o.Costume.as("Costume"),l.remark.as("match_remark"),l.created_date.as("created_date")).from(h).leftOuterJoin(o,o.id.eq(h.heroine_id)).innerJoin(l,n().op.or(l.winner_party_id.eq(h.party_id),n().op.and(l.loser_party_id.eq(h.party_id),l.loser_party_id.in(f.map((t=>t.party_id)))))).orderBy(l.created_date,n().Order.DESC).orderBy(h.party_id,n().Order.ASC).orderBy(o.position_order,n().Order.ASC).exec().then((t=>{let n={};return t.forEach((t=>{(t=>{var e;n[t.match_id]||(n[t.match_id]={match_id:t.match_id,winner:[],loser:[],created_date:t.created_date,match_remark:null!==(e=t.match_remark)&&void 0!==e?e:""});let i=t.name+"("+t.Costume+")";t.party_id==t.winner_party_id?n[t.match_id].winner.push(i):n[t.match_id].loser.push({name:i,heroine_id:t.heroine_id})})(t)})),Object.values(n).filter((t=>t.loser.length)).sort(((t,n)=>n.created_date.getTime()-t.created_date.getTime()))})).then((n=>{var r;s&&(t=>{t.innerHTML="",n.forEach((n=>{let i=document.createElement("div");i.innerHTML=e(442).Z,n.winner.forEach(((t,n)=>{i.querySelectorAll("[name=winner_party] [name=h"+n+"]").forEach((n=>{n.innerText=t}))})),n.loser.forEach(((t,n)=>{i.querySelectorAll("[name=loser_party] [name=h"+n+"]").forEach((n=>{n.innerText=t.name,u.includes(""+t.heroine_id)&&(n.style.color="red")}))})),i.querySelectorAll("[name=match_info] [name=match_remark]").forEach((t=>{t.innerText=n.match_remark})),i.querySelectorAll("[name=match_info] [name=created_date]").forEach((t=>{t.innerText=`${n.created_date}`})),t.appendChild(i)}))})(s),(n=>{var e;let r=document.createElement("li");a.forEach((t=>{let n=t;const e=n.getAttribute("data-name"),i=n.getAttribute("data-Costume"),o=n.getAttribute("data-id");let a=document.createElement("span");a.innerText=`${e}（${i}）`,a.setAttribute("data-id",`${o}`),r.appendChild(a)})),r.addEventListener("click",(()=>{i.preopen((()=>{u.forEach((n=>{t.querySelectorAll('input[type=checkbox][value="'+n+'"]').forEach((t=>{t.checked=!0}))}))}))})),n.prepend(r),n.querySelectorAll("li").length>5&&(null===(e=n.querySelector("li:last-of-type"))||void 0===e||e.remove())})(null!==(r=c.querySelector("ol"))&&void 0!==r?r:document.createElement("ol"))})))}))}))}))}})),null===(a=t.querySelector('button[value="ok"]'))||void 0===a||a.addEventListener("click",(()=>{let n=t.querySelectorAll("form :checked");return 0!=n.length&&!(n.length>5)&&void 0}))})(u)}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(t,n,e){}adoptedCallback(){}showModal(){this.preopen()}preopen(t=(()=>{})){var e;let i=(null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow({mode:"open"})).querySelector("dialog#search_dialog");if(i){let e=i.querySelector("#heroine");e&&(e.innerHTML=""),r.then((function(r){let a=r.getSchema().table("m_heroine");o.then((()=>r.select().from(a).orderBy(a.name,n().Order.ASC).exec())).then((function(t){t.forEach((t=>{null==e||e.appendChild((t=>{let n=document.createElement("input");n.type="checkbox",n.id=`heroine_id_${t.id}`,n.name=`heroine_id_${t.id}`,n.value=`${t.id}`,Object.entries(t).forEach((([t,e])=>{n.setAttribute("data-"+t,`${e}`)}));let e=document.createElement("label");e.setAttribute("for",n.id),e.innerText=t.name+"("+t.Costume+")";let i=document.createElement("div");return i.appendChild(n),i.appendChild(e),i})(t))}))})).then((()=>t())).then((()=>{null==i||i.showModal()}))}))}}}class s extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"});t.innerHTML=e(51).Z;let i=t.querySelector("dialog#heroines_possession_status_dialog");null==i||i.addEventListener("close",(function(){i=i,"ok"==i.returnValue&&o.then((()=>{r.then((t=>{let e=t.getSchema().table("t_heroine_status"),r=[];null==i||i.querySelectorAll('[name="heroines"] [name="row"]').forEach((t=>{var n,e,i,o;let a=t.getAttribute("data-id"),u={id:null,heroine_id:t.getAttribute("data-heroine_id"),deleted:!t.querySelector('[name="has_this"] input[type="checkbox"]:checked'),star:null===(n=t.querySelector("[data-star]"))||void 0===n?void 0:n.value,special_weapon_level:null===(e=t.querySelector("[data-special_weapon_level]"))||void 0===e?void 0:e.value,level:null===(i=t.querySelector("[data-level]"))||void 0===i?void 0:i.value,rank:null===(o=t.querySelector("[data-rank]"))||void 0===o?void 0:o.value,created_date:null,last_modified_date:new Date};a?u.id=a:u.created_date=new Date,r.push(u)}));let o=t.createTransaction();o.begin([e]).then((()=>{let i=t.update(e).set(e.deleted,n().bind(1)).set(e.star,n().bind(2)).set(e.special_weapon_level,n().bind(3)).set(e.level,n().bind(4)).set(e.rank,n().bind(5)).set(e.last_modified_date,new Date).where(n().op.and(e.id.eq(n().bind(0)),n().op.or(e.deleted.neq(n().bind(1)),e.star.neq(n().bind(2)),e.special_weapon_level.neq(n().bind(3)),e.level.neq(n().bind(4)),e.rank.neq(n().bind(5)))));return console.log(i.toSql()),(async()=>{for(let t of r.filter((t=>!!t.id)))await o.attach(i.bind([t.id,t.deleted,t.star,t.special_weapon_level,t.level,t.rank]))})()})).then((()=>{let n=t.insert().into(e).values(r.filter((t=>!t.id)).map((t=>e.createRow(t))));return console.log(n.toSql()),o.attach(n)})).then((()=>{o.commit()}))}))}))}))}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(t,n,e){}adoptedCallback(){}showModal(){this.preopen()}preopen(){var t;let i=(null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow({mode:"open"})).querySelector("dialog#heroines_possession_status_dialog");null==i||i.querySelectorAll('[name="heroines"]').forEach((t=>{t.innerHTML=""})),o.then((()=>{r.then((t=>{let r=t.getSchema().table("m_heroine"),o=t.getSchema().table("t_heroine_status");t.select().from(r).leftOuterJoin(o,o.heroine_id.eq(r.id)).orderBy(r.name,n().Order.ASC).orderBy(r.Costume,n().Order.ASC).exec().then((t=>{const n=e(485).Z;let r=null==i?void 0:i.querySelector('[name="heroines"]');t.forEach((t=>{var e;let i=t,o=document.createElement("div");o.innerHTML=n;const a=i.t_heroine_status&&null!=i.t_heroine_status.id;o.querySelectorAll("[data-id]").forEach((t=>{i.t_heroine_status.id?t.setAttribute("data-id",`${i.t_heroine_status.id}`):t.removeAttribute("data-id")})),o.querySelectorAll("[data-heroine_id]").forEach((t=>{t.setAttribute("data-heroine_id",`${i.m_heroine.id}`)})),o.querySelectorAll('[name="name"]').forEach((t=>{t.innerText=i.m_heroine.name+"("+i.m_heroine.Costume+")",t.setAttribute("for","heroines_possession_status_dialog_heroine_row_"+i.m_heroine.id)})),o.querySelectorAll('[name="has_this"] input[type="checkbox"]').forEach((t=>{t.id="heroines_possession_status_dialog_heroine_row_"+i.m_heroine.id,i.t_heroine_status&&null!=i.t_heroine_status.id?t.checked=!i.t_heroine_status.deleted:t.checked=!0})),a&&(o.querySelectorAll("[data-star]").forEach((t=>{t.value=`${i.t_heroine_status.star}`,t.setAttribute("data-star",t.value)})),o.querySelectorAll("[data-special_weapon_level]").forEach((t=>{t.value=`${i.t_heroine_status.special_weapon_level}`,t.setAttribute("data-special_weapon_level",t.value)})),o.querySelectorAll("[data-level]").forEach((t=>{t.value=`${i.t_heroine_status.level}`,t.setAttribute("data-level",t.value)})),o.querySelectorAll("[data-rank]").forEach((t=>{t.value=`${i.t_heroine_status.rank}`,t.setAttribute("data-rank",t.value)})),o.querySelectorAll('[name="last_modified_date"]').forEach((t=>{t.innerText=i.t_heroine_status.last_modified_date.toLocaleDateString()}))),null==r||r.appendChild(null!==(e=o.querySelector('[name="row"]'))&&void 0!==e?e:document.createElement("div"))}))})).then((()=>{null==i||i.showModal()}))}))}))}}var c,h,l;o.then((()=>{window.customElements.define("ib7zpxivoeuou9s6-search_dialog",u),window.customElements.define("ib7zpxivoeuou9s6-register_dialog",a),window.customElements.define("ib7zpxivoeuou9s6-heroines_possession_status_dialog",s)})),null===(c=document.querySelector("button#open_search_dialog"))||void 0===c||c.addEventListener("click",(()=>{document.querySelectorAll("ib7zpxivoeuou9s6-search_dialog").forEach((t=>{t.showModal()}))})),null===(h=document.querySelector("button#open_register_dialog"))||void 0===h||h.addEventListener("click",(()=>{document.querySelectorAll("ib7zpxivoeuou9s6-register_dialog").forEach((t=>{t.showModal()}))})),null===(l=document.querySelector("button#open_heroines_possession_status_dialog"))||void 0===l||l.addEventListener("click",(()=>{document.querySelectorAll("ib7zpxivoeuou9s6-heroines_possession_status_dialog").forEach((t=>{t.showModal()}))}))})()})();